(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1210:function(module,exports,__webpack_require__){"use strict";__webpack_require__(10),__webpack_require__(78),__webpack_require__(64),__webpack_require__(52),__webpack_require__(66),__webpack_require__(1211),__webpack_require__(1212),__webpack_require__(20),__webpack_require__(65);var _clientApi=__webpack_require__(77),_clientLogger=__webpack_require__(53),_configFilename=__webpack_require__(1213);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),_configFilename.loaders&&_configFilename.loaders.forEach((function(loader){return(0,_clientApi.addLoader)(loader,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},1213:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"parameters",(function(){return parameters}));var _storybook_addon_docs_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(631),_storybook_theming__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(18),_documentation_json__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(632);Object(_storybook_addon_docs_angular__WEBPACK_IMPORTED_MODULE_0__.setCompodocJson)(_documentation_json__WEBPACK_IMPORTED_MODULE_2__);var parameters={actions:{argTypesRegex:"^on[A-Z].*"},docs:{theme:_storybook_theming__WEBPACK_IMPORTED_MODULE_1__.themes.dark},options:{storySort:{order:["Getting Started","Node","Link","Port","Label","Actions","Plugins","Examples"]}}}},1215:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(99).configure)([__webpack_require__(1216),__webpack_require__(1220)],module,!1)}).call(this,__webpack_require__(166)(module))},1216:function(module,exports,__webpack_require__){var map={"./changelog.stories.mdx":1308,"./getting-started.stories.mdx":1217};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1216},1217:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(25),__webpack_require__(11),__webpack_require__(20),__webpack_require__(1);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(144),_assets_code_brackets_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(633),_assets_code_brackets_svg__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_assets_code_brackets_svg__WEBPACK_IMPORTED_MODULE_6__),_assets_colors_svg__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(634),_assets_colors_svg__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_assets_colors_svg__WEBPACK_IMPORTED_MODULE_7__),_assets_comments_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(635),_assets_comments_svg__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_assets_comments_svg__WEBPACK_IMPORTED_MODULE_8__),_assets_flow_svg__WEBPACK_IMPORTED_MODULE_10__=(__webpack_require__(1218),__webpack_require__(636)),_assets_flow_svg__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_assets_flow_svg__WEBPACK_IMPORTED_MODULE_10__),_assets_plugin_svg__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(637),_assets_plugin_svg__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_assets_plugin_svg__WEBPACK_IMPORTED_MODULE_11__),_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_13__=(__webpack_require__(1219),__webpack_require__(638)),_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_13__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_5__.Meta,{title:"Getting Started",mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("style",null,"\n  .subheading {\n    --mediumdark: '#999999';\n    font-weight: 900;\n    font-size: 13px;\n    color: #999;\n    letter-spacing: 6px;\n    line-height: 24px;\n    text-transform: uppercase;\n    margin-bottom: 12px;\n    margin-top: 40px;\n  }\n\n  .link-list {\n    display: grid;\n    grid-template-columns: 1fr;\n    grid-template-rows: 1fr 1fr;\n    row-gap: 10px;\n  }\n\n  @media (min-width: 620px) {\n    .link-list {\n      row-gap: 20px;\n      column-gap: 20px;\n      grid-template-columns: 1fr 1fr;\n    }\n  }\n\n  @media all and (-ms-high-contrast:none) {\n  .link-list {\n      display: -ms-grid;\n      -ms-grid-columns: 1fr 1fr;\n      -ms-grid-rows: 1fr 1fr;\n    }\n  }\n\n  .link-item {\n    display: block;\n    padding: 20px 30px 20px 15px;\n    border: 1px solid white;\n    border-radius: 5px;\n    transition: background 150ms ease-out, border 150ms ease-out, transform 150ms ease-out;\n    display: flex;\n    align-items: flex-start;\n  }\n\n  .link-item:hover {\n    border-color: #1EA7FD50;\n    transform: translate3d(0, -3px, 0);\n    box-shadow: rgba(0, 0, 0, 0.08) 0 3px 10px 0;\n  }\n\n  .link-item:active {\n    border-color: #1EA7FD;\n    transform: translate3d(0, 0, 0);\n  }\n\n  .link-item strong {\n    font-weight: 700;\n    display: block;\n    margin-bottom: 2px;\n  }\n\n  .link-item img {\n    height: 40px;\n    width: 40px;\n    margin-right: 15px;\n    flex: none;\n  }\n\n  .link-item span {\n    font-size: 14px;\n    line-height: 20px;\n  }\n\n  .tip {\n    display: inline-block;\n    border-radius: 1em;\n    font-size: 11px;\n    line-height: 12px;\n    font-weight: 700;\n    background: #E7FDD8;\n    color: #66BF3C;\n    padding: 4px 12px;\n    margin-right: 10px;\n    vertical-align: top;\n  }\n\n  .tip-wrapper {\n    font-size: 13px;\n    line-height: 20px;\n    margin-top: 40px;\n    margin-bottom: 40px;\n  }\n\n  .tip-wrapper code {\n    font-size: 12px;\n    display: inline-block;\n  }\n\n\n"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("h1",{id:"welcome-to-rxzu"},"Welcome to RxZu"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("p",null,"RxZu is a diagrams engine system, built on top of RxJS, which takes the idea of graphic visualization to the next level in terms of performance, rendering optimization, and customizability."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("p",null,"RxZu encourages creativity. It allows you to create any node, link, label, or even a custom entity and provide powerful tools with a moderate learning curve, suitable for both experienced and inexperienced developers alike."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("p",null,"Browse example stories now by navigating to them in the sidebar.\nView their code in the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("inlineCode",{parentName:"p"},"./stories")," directory to learn how they work."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("div",{class:"subheading"},"Installation"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("p",null,"Install from the NPM repository using yarn or npm:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("code",_extends({parentName:"pre"},{className:"language-shell"}),"yarn add @rxzu/angular\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("code",_extends({parentName:"pre"},{className:"language-shell"}),"npm install @rxzu/angular\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("p",null,"On production environemnt add the following:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("inlineCode",{parentName:"p"},"main.ts")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("code",_extends({parentName:"pre"},{className:"language-typescript"}),"import { enableProdMode } from '@angular/core';\nimport { enableDiagramProdMode } from '@rxzu/angular';\n\n...\nif(environemnt.production) {\n    enableDiagramProdMode();\n    enableProdMode();\n}\n...\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("div",{class:"subheading"},"Configure"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("div",{class:"link-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("a",{class:"link-item",href:"https://storybook.js.org/docs/react/api/presets",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("img",{src:_assets_plugin_svg__WEBPACK_IMPORTED_MODULE_11___default.a,alt:"plugin"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("strong",null,"Presets for popular entities"),"Easy setup for default entities")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("a",{class:"link-item",href:"https://storybook.js.org/docs/react/configure/webpack",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("img",{src:_assets_stackalt_svg__WEBPACK_IMPORTED_MODULE_13___default.a,alt:"Build"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("strong",null,"Build customized entities"),"How to customize and create your own entities")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("a",{class:"link-item",href:"https://storybook.js.org/docs/react/configure/styling-and-css",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("img",{src:_assets_colors_svg__WEBPACK_IMPORTED_MODULE_7___default.a,alt:"colors"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("strong",null,"Styling"),"How to configure CSS for the diagram")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("a",{class:"link-item",href:"https://storybook.js.org/docs/react/get-started/setup#configure-storybook-for-your-stack",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("img",{src:_assets_flow_svg__WEBPACK_IMPORTED_MODULE_10___default.a,alt:"flow"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("strong",null,"Plugins"),"Plugins and libraries for additional functionality"))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("div",{class:"subheading"},"Learn"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("div",{class:"link-list"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("a",{class:"link-item",href:"https://github.com/Vonage/rxzu",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("img",{src:_assets_code_brackets_svg__WEBPACK_IMPORTED_MODULE_6___default.a,alt:"code"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("strong",null,"GitHub project"),"View the source and add issues")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("a",{class:"link-item",href:"https://gitter.im/vonage-rxzu/community",target:"_blank"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("img",{src:_assets_comments_svg__WEBPACK_IMPORTED_MODULE_8___default.a,alt:"comments"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("span",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)("strong",null,"Gitter chat"),"Chat with maintainers and the community"))))}MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Getting Started",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_5__.AddContext,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__.mdx)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},1218:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/direction.b770f9af.svg"},1219:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/repo.6d496322.svg"},1220:function(module,exports,__webpack_require__){var map={"./examples/examples.stories.ts":1302,"./label/label.stories.ts":1303,"./link/link.stories.ts":1304,"./node/node.stories.ts":1305,"./port/port.stories.ts":1306};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1220},1302:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Basic",(function(){return Basic})),__webpack_require__.d(__webpack_exports__,"Events",(function(){return Events})),__webpack_require__.d(__webpack_exports__,"Serialization",(function(){return Serialization})),__webpack_require__.d(__webpack_exports__,"AutoArrange",(function(){return AutoArrange})),__webpack_require__.d(__webpack_exports__,"Performance",(function(){return Performance}));var _a,_b,client=__webpack_require__(99),common=__webpack_require__(14),dist=__webpack_require__(242),tslib_es6=__webpack_require__(3),core=__webpack_require__(0),src=__webpack_require__(5),core_src=__webpack_require__(9);let auto_arrange_component_AutoArrangeExampleStoryComponent=class AutoArrangeExampleStoryComponent{constructor(diagramEngine,dagreEngine){this.diagramEngine=diagramEngine,this.dagreEngine=dagreEngine}ngOnInit(){const nodesDefaultDimensions={height:200,width:200};this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions);const outport1=node1.addOutPort({name:"outport1"}),node2=new core_src.e;node2.setCoords({x:1e3,y:0}),node2.setDimensions(nodesDefaultDimensions);const inport=node2.addInPort({name:"inport2"});for(let index=0;index<2;index++){const nodeLoop=new core_src.e;nodeLoop.setCoords({x:10*Math.random()*1e3,y:300+index*(10*Math.random())*300}),nodeLoop.setDimensions(nodesDefaultDimensions);const inportLoop=nodeLoop.addInPort({name:"inport"+(index+3)});this.diagramModel.addNode(nodeLoop);const linkLoop=outport1.link(inportLoop);this.diagramModel.addLink(linkLoop)}const link=outport1.link(inport);this.diagramModel.addAll(node1,node2,link),this.diagramEngine.zoomToFit()}autoArrange(){this.dagreEngine.redistribute(this.diagramModel,{graph:{align:"DL",rankdir:"LR",ranksep:150}}),this.diagramEngine.zoomToFit()}};var basic_component_a;auto_arrange_component_AutoArrangeExampleStoryComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'\n    <div class="action-bar">\n      <button (click)="autoArrange()">Auto Arrange</button>\n    </div>\n    <ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>\n  ',styles:[(__webpack_require__(62).default||__webpack_require__(62)).length?__webpack_require__(62).default||__webpack_require__(62):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_a=void 0!==src.f&&src.f)?_a:Object,"function"==typeof(_b=void 0!==core_src.b&&core_src.b)?_b:Object])],auto_arrange_component_AutoArrangeExampleStoryComponent);let basic_component_BasicExampleStoryComponent=class BasicExampleStoryComponent{constructor(diagramEngine){this.diagramEngine=diagramEngine}ngOnInit(){const nodesDefaultDimensions={height:200,width:200};this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions);const outport1=node1.addOutPort({name:"outport1"}),node2=new core_src.e;node2.setCoords({x:1e3,y:0}),node2.setDimensions(nodesDefaultDimensions);const inport=node2.addInPort({name:"inport2"});for(let index=0;index<2;index++){const nodeLoop=new core_src.e;nodeLoop.setCoords({x:1e3,y:300+300*index}),nodeLoop.setDimensions(nodesDefaultDimensions),nodeLoop.addInPort({name:"inport"+(index+3)}),this.diagramModel.addNode(nodeLoop)}const link=outport1.link(inport);link.setLocked(),this.diagramModel.addAll(node1,node2,link),this.diagramModel.getDiagramEngine().zoomToFit()}};basic_component_BasicExampleStoryComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>',styles:[(__webpack_require__(62).default||__webpack_require__(62)).length?__webpack_require__(62).default||__webpack_require__(62):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(basic_component_a=void 0!==src.f&&src.f)?basic_component_a:Object])],basic_component_BasicExampleStoryComponent);var events_component_a,events_component_b,filter=__webpack_require__(82);let events_component_EventsExampleStoryComponent=class EventsExampleStoryComponent{constructor(diagramEngine){this.diagramEngine=diagramEngine,this.events=new core.EventEmitter}ngOnInit(){const nodesDefaultDimensions={height:200,width:200};this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions);const outport1=node1.addOutPort({name:"outport1"}),node2=new core_src.e;node2.setCoords({x:1e3,y:0}),node2.setDimensions(nodesDefaultDimensions);const inport=node2.addInPort({name:"inport2"});for(let index=0;index<2;index++){const nodeLoop=new core_src.e;nodeLoop.setCoords({x:1e3,y:300+300*index}),nodeLoop.setDimensions(nodesDefaultDimensions),nodeLoop.addInPort({name:"inport"+(index+3)}),this.diagramModel.addNode(nodeLoop)}const link=outport1.link(inport);link.setLocked(),this.diagramModel.addAll(node1,node2,link),this.diagramModel.getDiagramEngine().zoomToFit(),this.subscribeToDiagramEvents()}subscribeToDiagramEvents(){this.diagramEngine.selectAction().pipe(Object(filter.a)(Boolean)).subscribe(e=>this.events.emit(e))}};var performance_component_a;Object(tslib_es6.a)([Object(core.Output)(),Object(tslib_es6.b)("design:type","function"==typeof(events_component_a=void 0!==core.EventEmitter&&core.EventEmitter)?events_component_a:Object)],events_component_EventsExampleStoryComponent.prototype,"events",void 0),events_component_EventsExampleStoryComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram\n    class="demo-diagram"\n    [model]="diagramModel"\n  ></ngdx-diagram>',styles:[(__webpack_require__(62).default||__webpack_require__(62)).length?__webpack_require__(62).default||__webpack_require__(62):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(events_component_b=void 0!==src.f&&src.f)?events_component_b:Object])],events_component_EventsExampleStoryComponent);let performance_component_PerformanceExampleStoryComponent=class PerformanceExampleStoryComponent{constructor(diagramEngine){this.diagramEngine=diagramEngine,this.isResseted=!1,this.numberOfNodes=200}ngOnInit(){this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createModel(),this.createDiagram()}createDiagram(){this.createNodes(),this.diagramEngine.zoomToFit()}resetDiagram(){this.diagramModel.reset(),this.isResseted=!0}createNodes(){this.isResseted=!1;const startTime=performance.now(),nodesDefaultDimensions={height:200,width:200};for(let index=0;index<this.numberOfNodes;index++){const nodeLoop=new core_src.e({id:index.toString()}),row=index%10,col=Math.floor(index/10);nodeLoop.setCoords({x:1e3*row,y:300*col}),nodeLoop.setDimensions(nodesDefaultDimensions),nodeLoop.addInPort({name:"inport"+index,id:"inport"+index});const outport=nodeLoop.addOutPort({name:"outport"+index,id:"outport"+index});if(this.diagramModel.addNode(nodeLoop),index>0){const link=outport.link(this.diagramModel.getNode(""+(index-1)).getPort("inport"+(index-1))),label=new core_src.c("label");link.setLabel(label),this.diagramModel.addLink(link)}}const endTime=performance.now();this.initialRenderTimer=endTime-startTime}clearGraph(){this.diagramModel.reset()}};var serialization_component_a,serialization_component_b;performance_component_PerformanceExampleStoryComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'\n    <div class="action-bar">\n      <button (click)="resetDiagram()" *ngIf="isResseted === false">Reset</button\n      ><button (click)="createDiagram()" *ngIf="isResseted">Recreate</button>Rendered {{ numberOfNodes }} nodes and\n      links in {{ initialRenderTimer }} ms\n    </div>\n    <ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>\n  ',styles:[(__webpack_require__(62).default||__webpack_require__(62)).length?__webpack_require__(62).default||__webpack_require__(62):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(performance_component_a=void 0!==src.f&&src.f)?performance_component_a:Object])],performance_component_PerformanceExampleStoryComponent);let serialization_component_SerializationExampleStoryComponent=class SerializationExampleStoryComponent{constructor(diagramEngine){this.diagramEngine=diagramEngine,this.serialized=new core.EventEmitter}ngOnInit(){const nodesDefaultDimensions={height:200,width:200};this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions);const outport1=node1.addOutPort({name:"outport1"}),node2=new core_src.e;node2.setCoords({x:1e3,y:0}),node2.setDimensions(nodesDefaultDimensions);const inport=node2.addInPort({name:"inport2"});for(let index=0;index<2;index++){const nodeLoop=new core_src.e;nodeLoop.setCoords({x:1e3,y:300+300*index}),nodeLoop.setDimensions(nodesDefaultDimensions),nodeLoop.addInPort({name:"inport"+(index+3)}),this.diagramModel.addNode(nodeLoop)}const link=outport1.link(inport);link.setLocked(),this.diagramModel.addAll(node1,node2,link),this.diagramModel.getDiagramEngine().zoomToFit()}serialize(){const serializedModel=this.diagramModel.serialize();this.serialized.emit(serializedModel)}clearGraph(){this.diagramModel.reset()}};Object(tslib_es6.a)([Object(core.Output)(),Object(tslib_es6.b)("design:type","function"==typeof(serialization_component_a=void 0!==core.EventEmitter&&core.EventEmitter)?serialization_component_a:Object)],serialization_component_SerializationExampleStoryComponent.prototype,"serialized",void 0),serialization_component_SerializationExampleStoryComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'\n    <div class="action-bar">\n      <button (click)="serialize()">Serialize Diagram Model</button>\n      <button (click)="clearGraph()">Clear Graph</button>\n    </div>\n    <ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>\n  ',styles:[(__webpack_require__(62).default||__webpack_require__(62)).length?__webpack_require__(62).default||__webpack_require__(62):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(serialization_component_b=void 0!==src.f&&src.f)?serialization_component_b:Object])],serialization_component_SerializationExampleStoryComponent);__webpack_exports__.default={title:"Examples",component:src.c,parameters:{docs:{iframeHeight:"400px"}},decorators:[Object(client.moduleMetadata)({declarations:[src.d,basic_component_BasicExampleStoryComponent,serialization_component_SerializationExampleStoryComponent,auto_arrange_component_AutoArrangeExampleStoryComponent,performance_component_PerformanceExampleStoryComponent,src.c,src.b,src.e],providers:[core_src.b],imports:[common.a,src.g],entryComponents:[src.d,src.c,src.b,src.e]})]};const Basic=(args=>({component:basic_component_BasicExampleStoryComponent,props:args})).bind({}),Events=(args=>({component:events_component_EventsExampleStoryComponent,props:Object.assign(Object.assign({},args),{events:Object(dist.action)("events")})})).bind({}),Serialization=(args=>({component:serialization_component_SerializationExampleStoryComponent,props:Object.assign(Object.assign({},args),{serialized:Object(dist.action)("serialized")})})).bind({}),AutoArrange=(args=>({component:auto_arrange_component_AutoArrangeExampleStoryComponent,props:args})).bind({}),Performance=(args=>({component:performance_component_PerformanceExampleStoryComponent,props:args})).bind({});Basic.parameters=Object.assign({storySource:{source:"BasicDiagramTemplate.bind({})"}},Basic.parameters),Events.parameters=Object.assign({storySource:{source:"EventsDiagramTemplate.bind({})"}},Events.parameters),Serialization.parameters=Object.assign({storySource:{source:"SerializationDiagramTemplate.bind({})"}},Serialization.parameters),AutoArrange.parameters=Object.assign({storySource:{source:"AutoArrangeDiagramTemplate.bind({})"}},AutoArrange.parameters),Performance.parameters=Object.assign({storySource:{source:"PerformanceDiagramTemplate.bind({})"}},Performance.parameters)},1303:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Custom",(function(){return Custom}));var _a,client=__webpack_require__(99),common=__webpack_require__(14),tslib_es6=__webpack_require__(3),core=__webpack_require__(0),src=__webpack_require__(5),core_src=__webpack_require__(9),takeUntil=__webpack_require__(535);let custom_label_component_CustomLabelComponent=class CustomLabelComponent extends core_src.c{constructor(cdRef){super("custom"),this.cdRef=cdRef}ngOnInit(){this.selectCoords().pipe(Object(takeUntil.a)(this.destroyed$)).subscribe(()=>{this.cdRef.detectChanges()}),this.setPainted(!0)}};custom_label_component_CustomLabelComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"custom-label",template:(__webpack_require__(305).default||__webpack_require__(305)).length?__webpack_require__(305).default||__webpack_require__(305):"",styles:[(__webpack_require__(306).default||__webpack_require__(306)).length?__webpack_require__(306).default||__webpack_require__(306):""],changeDetection:core.ChangeDetectionStrategy.OnPush}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_a=void 0!==core.ChangeDetectorRef&&core.ChangeDetectorRef)?_a:Object])],custom_label_component_CustomLabelComponent);class custom_factory_CustomLabelFactory extends src.a{constructor(resolver,renderer){super("custom-label"),this.resolver=resolver,this.renderer=renderer}generateWidget({model:model,host:host}){const componentRef=host.createComponent(this.getRecipe()),rootNode=componentRef.location.nativeElement;return this.renderer.setStyle(rootNode,"position","absolute"),this.renderer.setAttribute(rootNode,"data-labelid",model.id),model.onEntityDestroy().subscribe(()=>{componentRef.destroy()}),Object.entries(model).forEach(([key,value])=>{componentRef.instance[key]=value}),componentRef.instance.ngOnInit(),componentRef}getRecipe(){return this.resolver.resolveComponentFactory(custom_label_component_CustomLabelComponent)}}var diagram_component_a,_b,_c;let diagram_component_CustomLabelDiagramComponent=class CustomLabelDiagramComponent{constructor(diagramEngine,resolver,renderer){this.diagramEngine=diagramEngine,this.resolver=resolver,this.renderer=renderer}ngOnInit(){const nodesDefaultDimensions={height:200,width:200};this.diagramEngine.registerDefaultFactories(),this.diagramEngine.getFactoriesManager().registerFactory({type:"labelFactories",factory:new custom_factory_CustomLabelFactory(this.resolver,this.renderer)}),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions);const outport1=node1.addOutPort({name:"outport1"}),node2=new core_src.e;node2.setCoords({x:1500,y:300}),node2.setDimensions(nodesDefaultDimensions);const inport=node2.addInPort({name:"inport2"}),link=outport1.link(inport),label=new core_src.c("I'm a custom label","custom-label");link.setLabel(label),link.setLocked(),this.diagramModel.addAll(node1,node2,link),this.diagramModel.getDiagramEngine().zoomToFit()}};var default_component_a;diagram_component_CustomLabelDiagramComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>',styles:[(__webpack_require__(158).default||__webpack_require__(158)).length?__webpack_require__(158).default||__webpack_require__(158):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(diagram_component_a=void 0!==src.f&&src.f)?diagram_component_a:Object,"function"==typeof(_b=void 0!==core.ComponentFactoryResolver&&core.ComponentFactoryResolver)?_b:Object,"function"==typeof(_c=void 0!==core.Renderer2&&core.Renderer2)?_c:Object])],diagram_component_CustomLabelDiagramComponent);let default_component_DefaultLabelStoryComponent=class DefaultLabelStoryComponent{constructor(diagramEngine){this.diagramEngine=diagramEngine}ngOnInit(){const nodesDefaultDimensions={height:200,width:200};this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions);const outport1=node1.addOutPort({name:"outport1"}),node2=new core_src.e;node2.setCoords({x:1e3,y:300}),node2.setDimensions(nodesDefaultDimensions);const inport=node2.addInPort({name:"inport2"}),link=outport1.link(inport),label=new core_src.c("I'm a label");link.setLabel(label),link.setLocked(),this.diagramModel.addAll(node1,node2,link),this.diagramModel.getDiagramEngine().zoomToFit()}};default_component_DefaultLabelStoryComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>',styles:[(__webpack_require__(158).default||__webpack_require__(158)).length?__webpack_require__(158).default||__webpack_require__(158):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(default_component_a=void 0!==src.f&&src.f)?default_component_a:Object])],default_component_DefaultLabelStoryComponent);__webpack_exports__.default={title:"Label",component:src.c,parameters:{docs:{iframeHeight:"400px"}},decorators:[Object(client.moduleMetadata)({declarations:[src.d,custom_label_component_CustomLabelComponent,default_component_DefaultLabelStoryComponent,src.c,src.b,src.e],imports:[common.a,src.g],entryComponents:[src.d,src.c,custom_label_component_CustomLabelComponent,src.b,src.e]})]};const Default=(args=>({component:default_component_DefaultLabelStoryComponent,props:args})).bind({}),Custom=(args=>({component:diagram_component_CustomLabelDiagramComponent,props:args})).bind({});Default.parameters=Object.assign({storySource:{source:"DefaultLinkTemplate.bind({})"}},Default.parameters),Custom.parameters=Object.assign({storySource:{source:"CustomLinkTemplate.bind({})"}},Custom.parameters)},1304:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Custom",(function(){return Custom}));var _a,_b,client=__webpack_require__(99),common=__webpack_require__(14),tslib_es6=__webpack_require__(3),core=__webpack_require__(0),src=__webpack_require__(5),core_src=__webpack_require__(9),combineLatest=__webpack_require__(199),takeUntil=__webpack_require__(535);let custom_link_component_CustomLinkComponent=class CustomLinkComponent extends core_src.d{constructor(cdRef){super({type:"custom-link",logPrefix:"[CustomLink]"}),this.cdRef=cdRef,this.path$=Object(core_src.k)(null,this.entityPipe("path")),this.points$=Object(core_src.k)([],this.entityPipe("points"))}trackByPoints(i,point){return point.id}ngOnInit(){this.setPainted(!0)}ngAfterViewInit(){const firstPCoords$=this.getFirstPoint().selectCoords(),lastPCoords$=this.getLastPoint().selectCoords();Object(combineLatest.b)([firstPCoords$,lastPCoords$]).pipe(Object(takeUntil.a)(this.onEntityDestroy())).subscribe(([firstPCoords,lastPCoords])=>{const points=[firstPCoords,lastPCoords],xOrY=Math.abs(firstPCoords.x-lastPCoords.x)>Math.abs(firstPCoords.y-lastPCoords.y)?"x":"y";let isStraight=!1;Math.abs(points[0][xOrY]-points[1][xOrY])<50&&(isStraight=!0);const path=Object(core_src.l)(firstPCoords,lastPCoords,isStraight?0:this.curvyness);this.path$.set(path).emit();const label=this.getLabel();label&&label.setCoords(this.calcCenterOfPath()),this.cdRef.detectChanges()}),this.setPainted(!0)}calcLabelIncline(firstPoint,secondPoint){const dy=secondPoint.y-firstPoint.y,dx=secondPoint.x-firstPoint.x;if(0===dx)return 0;let inclineAngle=180*Math.atan(dy/dx)/Math.PI;return inclineAngle<0&&(inclineAngle+=180),inclineAngle}calcCenterOfPath(){const firstPointCoords=this.getFirstPoint().getCoords(),lastPointCoords=this.getLastPoint().getCoords();return{x:(firstPointCoords.x+lastPointCoords.x)/2,y:(firstPointCoords.y+lastPointCoords.y)/2}}selectPath(){return this.path$.value$}deleteLink(){this.destroy()}};Object(tslib_es6.a)([Object(core.ViewChild)("labelLayer",{read:core.ViewContainerRef,static:!0}),Object(tslib_es6.b)("design:type","function"==typeof(_a=void 0!==core.ViewContainerRef&&core.ViewContainerRef)?_a:Object)],custom_link_component_CustomLinkComponent.prototype,"labelLayer",void 0),custom_link_component_CustomLinkComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"custom-link",template:(__webpack_require__(307).default||__webpack_require__(307)).length?__webpack_require__(307).default||__webpack_require__(307):"",styles:[(__webpack_require__(308).default||__webpack_require__(308)).length?__webpack_require__(308).default||__webpack_require__(308):""],changeDetection:core.ChangeDetectionStrategy.Default}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_b=void 0!==core.ChangeDetectorRef&&core.ChangeDetectorRef)?_b:Object])],custom_link_component_CustomLinkComponent);class custom_factory_CustomLinkFactory extends src.a{constructor(resolver,renderer){super("custom-link"),this.resolver=resolver,this.renderer=renderer}generateWidget({host:host,model:model}){const componentRef=host.createComponent(this.getRecipe());model.setWidth(1),model.setColor("pink");const rootNode=componentRef.location.nativeElement;return this.renderer.setStyle(rootNode,"position","absolute"),this.renderer.setAttribute(rootNode,"data-linkid",model.id),model.onEntityDestroy().subscribe(()=>{componentRef.destroy()}),Object.entries(model).forEach(([key,value])=>{componentRef.instance[key]=value}),componentRef.instance.ngOnInit(),componentRef}getRecipe(){return this.resolver.resolveComponentFactory(custom_link_component_CustomLinkComponent)}}var diagram_component_a,diagram_component_b,_c;let diagram_component_CustomLinkDiagramComponent=class CustomLinkDiagramComponent{constructor(diagramEngine,resolver,renderer){this.diagramEngine=diagramEngine,this.resolver=resolver,this.renderer=renderer,this.nodeHeight=200,this.nodeWidth=200}ngOnInit(){const nodesDefaultDimensions={height:this.nodeHeight,width:this.nodeWidth};this.diagramEngine.registerDefaultFactories(),this.diagramEngine.getFactoriesManager().registerFactory({type:"linkFactories",factory:new custom_factory_CustomLinkFactory(this.resolver,this.renderer)}),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions);const outport1=node1.addOutPort({name:"outport1",linkType:"custom-link",maximumLinks:3}),node2=new core_src.e;node2.setCoords({x:1e3,y:300}),node2.setDimensions(nodesDefaultDimensions);const inport=node2.addInPort({name:"inport2"}),link=new core_src.d({type:"custom-link"});link.setSourcePort(outport1),link.setTargetPort(inport),this.diagramModel.addAll(node1,node2,link),this.diagramModel.getDiagramEngine().zoomToFit()}};var default_component_a;Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object)],diagram_component_CustomLinkDiagramComponent.prototype,"nodeHeight",void 0),Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object)],diagram_component_CustomLinkDiagramComponent.prototype,"nodeWidth",void 0),diagram_component_CustomLinkDiagramComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>',styles:[(__webpack_require__(159).default||__webpack_require__(159)).length?__webpack_require__(159).default||__webpack_require__(159):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(diagram_component_a=void 0!==src.f&&src.f)?diagram_component_a:Object,"function"==typeof(diagram_component_b=void 0!==core.ComponentFactoryResolver&&core.ComponentFactoryResolver)?diagram_component_b:Object,"function"==typeof(_c=void 0!==core.Renderer2&&core.Renderer2)?_c:Object])],diagram_component_CustomLinkDiagramComponent);let default_component_DefaultLinkStoryComponent=class DefaultLinkStoryComponent{constructor(diagramEngine){this.diagramEngine=diagramEngine}ngOnInit(){const nodesDefaultDimensions={height:200,width:200};this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions);const outport1=node1.addOutPort({name:"outport1"}),node2=new core_src.e;node2.setCoords({x:1e3,y:0}),node2.setDimensions(nodesDefaultDimensions);const inport=node2.addInPort({name:"inport2"});for(let index=0;index<2;index++){const nodeLoop=new core_src.e;nodeLoop.setCoords({x:1e3,y:300+300*index}),nodeLoop.setDimensions(nodesDefaultDimensions),nodeLoop.addInPort({name:"inport"+(index+3)}),this.diagramModel.addNode(nodeLoop)}const link=outport1.link(inport);link.setLocked(),this.diagramModel.addAll(node1,node2,link),this.diagramModel.getDiagramEngine().zoomToFit()}};default_component_DefaultLinkStoryComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>',styles:[(__webpack_require__(159).default||__webpack_require__(159)).length?__webpack_require__(159).default||__webpack_require__(159):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(default_component_a=void 0!==src.f&&src.f)?default_component_a:Object])],default_component_DefaultLinkStoryComponent);__webpack_exports__.default={title:"Link",component:src.c,parameters:{docs:{iframeHeight:"400px"}},decorators:[Object(client.moduleMetadata)({declarations:[src.d,custom_link_component_CustomLinkComponent,default_component_DefaultLinkStoryComponent,src.c,src.b,src.e],imports:[common.a,src.g],entryComponents:[src.d,src.c,custom_link_component_CustomLinkComponent,src.b,src.e]})]};const Default=(args=>({component:default_component_DefaultLinkStoryComponent,props:args})).bind({}),Custom=(args=>({component:diagram_component_CustomLinkDiagramComponent,props:args})).bind({});Default.parameters=Object.assign({storySource:{source:"DefaultLinkTemplate.bind({})"}},Default.parameters),Custom.parameters=Object.assign({storySource:{source:"CustomLinkTemplate.bind({})"}},Custom.parameters)},1305:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Custom",(function(){return Custom}));var client=__webpack_require__(99),common=__webpack_require__(14),tslib_es6=__webpack_require__(3),core=__webpack_require__(0),src=__webpack_require__(5),core_src=__webpack_require__(9);let custom_component_CustomNodeComponent=class CustomNodeComponent extends core_src.e{constructor(){super({type:"custom-node"})}ngOnInit(){this.nodeContent="Pick me!",this.selectSelected().subscribe(selected=>{this.nodeContent=selected?"Thank you 🙏":"Pick me!"}),this.setPainted(!0)}};custom_component_CustomNodeComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"custom-node",template:(__webpack_require__(309).default||__webpack_require__(309)).length?__webpack_require__(309).default||__webpack_require__(309):"",styles:[(__webpack_require__(310).default||__webpack_require__(310)).length?__webpack_require__(310).default||__webpack_require__(310):""],changeDetection:core.ChangeDetectionStrategy.Default}),Object(tslib_es6.b)("design:paramtypes",[])],custom_component_CustomNodeComponent);class custom_factory_CustomNodeFactory extends src.a{constructor(resolver,renderer){super("custom-node"),this.resolver=resolver,this.renderer=renderer}generateWidget({model:model,host:host}){const componentRef=host.createComponent(this.getRecipe()),rootNode=componentRef.location.nativeElement;return this.renderer.setStyle(rootNode,"position","absolute"),this.renderer.setStyle(rootNode,"display","block"),this.renderer.setAttribute(rootNode,"data-nodeid",model.id),model.selectCoords().subscribe(({x:x,y:y})=>{this.renderer.setStyle(rootNode,"left",x+"px"),this.renderer.setStyle(rootNode,"top",y+"px")}),model.selectionChanges().subscribe(e=>{e.isSelected?this.renderer.addClass(rootNode,"selected"):this.renderer.removeClass(rootNode,"selected")}),model.onEntityDestroy().subscribe(()=>{componentRef.destroy()}),Object.entries(model).forEach(([key,value])=>{componentRef.instance[key]=value}),componentRef.instance.ngOnInit(),componentRef}getRecipe(){return this.resolver.resolveComponentFactory(custom_component_CustomNodeComponent)}}var _a,_b,_c;let diagram_component_CustomNodeDiagramComponent=class CustomNodeDiagramComponent{constructor(diagramEngine,resolver,renderer){this.diagramEngine=diagramEngine,this.resolver=resolver,this.renderer=renderer,this.nodeHeight=200,this.nodeWidth=200}ngOnInit(){const nodesDefaultDimensions={height:this.nodeHeight,width:this.nodeWidth};this.diagramEngine.registerDefaultFactories(),this.diagramEngine.getFactoriesManager().registerFactory({type:"nodeFactories",factory:new custom_factory_CustomNodeFactory(this.resolver,this.renderer)}),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e({type:"custom-node"});node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions),this.diagramModel.addAll(node1),this.diagramModel.getDiagramEngine().zoomToFit()}ngOnChanges(e){this.diagramModel&&(e.nodeHeight&&Object.values(this.diagramModel.getNodes()).forEach(node=>{node.setHeight(e.nodeHeight.currentValue)}),e.nodeWidth&&Object.values(this.diagramModel.getNodes()).forEach(node=>{node.setWidth(e.nodeWidth.currentValue)}))}};var default_component_a;Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object)],diagram_component_CustomNodeDiagramComponent.prototype,"nodeHeight",void 0),Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object)],diagram_component_CustomNodeDiagramComponent.prototype,"nodeWidth",void 0),diagram_component_CustomNodeDiagramComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>',styles:[(__webpack_require__(160).default||__webpack_require__(160)).length?__webpack_require__(160).default||__webpack_require__(160):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_a=void 0!==src.f&&src.f)?_a:Object,"function"==typeof(_b=void 0!==core.ComponentFactoryResolver&&core.ComponentFactoryResolver)?_b:Object,"function"==typeof(_c=void 0!==core.Renderer2&&core.Renderer2)?_c:Object])],diagram_component_CustomNodeDiagramComponent);let default_component_DefaultNodeComponent=class DefaultNodeComponent{constructor(diagramEngine){this.diagramEngine=diagramEngine}ngOnInit(){this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions({height:200,width:200}),this.diagramModel.addAll(node1),this.diagramModel.getDiagramEngine().zoomToFit()}ngOnChanges(e){this.diagramModel&&(e.nodeHeight&&Object.values(this.diagramModel.getNodes()).forEach(node=>{node.setHeight(e.nodeHeight.currentValue)}),e.nodeWidth&&Object.values(this.diagramModel.getNodes()).forEach(node=>{node.setWidth(e.nodeWidth.currentValue)}))}};default_component_DefaultNodeComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>',styles:[(__webpack_require__(160).default||__webpack_require__(160)).length?__webpack_require__(160).default||__webpack_require__(160):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(default_component_a=void 0!==src.f&&src.f)?default_component_a:Object])],default_component_DefaultNodeComponent);__webpack_exports__.default={title:"Node",component:src.d,parameters:{docs:{iframeHeight:"400px"}},decorators:[Object(client.moduleMetadata)({declarations:[src.d,custom_component_CustomNodeComponent,src.c,src.b,src.e],imports:[common.a,src.g],entryComponents:[src.d,src.c,custom_component_CustomNodeComponent,src.b,src.e]})]};const Default=(args=>({component:default_component_DefaultNodeComponent,props:args})).bind({}),Custom=(args=>({component:diagram_component_CustomNodeDiagramComponent,props:args})).bind({});Custom.args={nodeHeight:200,nodeWidth:200},Default.parameters=Object.assign({storySource:{source:"DefaultNodeTemplate.bind({})"}},Default.parameters),Custom.parameters=Object.assign({storySource:{source:"CustomNodeTemplate.bind({})"}},Custom.parameters)},1306:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Default",(function(){return Default})),__webpack_require__.d(__webpack_exports__,"Custom",(function(){return Custom}));var client=__webpack_require__(99),common=__webpack_require__(14),tslib_es6=__webpack_require__(3),core=__webpack_require__(0),src=__webpack_require__(5),core_src=__webpack_require__(9),takeUntil=__webpack_require__(535),map=__webpack_require__(49);let custom_component_CustomPortComponent=class CustomPortComponent extends core_src.f{constructor(){super()}};custom_component_CustomPortComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"custom-port",template:(__webpack_require__(311).default||__webpack_require__(311)).length?__webpack_require__(311).default||__webpack_require__(311):"",styles:[(__webpack_require__(312).default||__webpack_require__(312)).length?__webpack_require__(312).default||__webpack_require__(312):""]}),Object(tslib_es6.b)("design:paramtypes",[])],custom_component_CustomPortComponent);class custom_factory_CustomPortFactory extends src.a{constructor(resolver,renderer){super("custom-port"),this.resolver=resolver,this.renderer=renderer}generateWidget({model:model,host:host}){const componentRef=host.createComponent(this.getRecipe()),rootNode=componentRef.location.nativeElement;return this.renderer.setAttribute(rootNode,"data-portid",model.id),this.renderer.setAttribute(rootNode,"data-name",model.getName()),model.in?this.renderer.addClass(rootNode,"in"):this.renderer.addClass(rootNode,"out"),Object.entries(model).forEach(([key,value])=>{componentRef.instance[key]=value}),this.isConnected(model).subscribe(connected=>{connected?this.renderer.addClass(rootNode,"connected"):this.renderer.removeClass(rootNode,"connected")}),model.onEntityDestroy().subscribe(()=>{componentRef.destroy()}),componentRef}getRecipe(){return this.resolver.resolveComponentFactory(custom_component_CustomPortComponent)}isConnected(port){return port.selectLinks().pipe(Object(takeUntil.a)(port.onEntityDestroy()),Object(map.a)(links=>Object.keys(links).length>0))}}var _a,_b,_c;let diagram_component_CustomPortDiagramComponent=class CustomPortDiagramComponent{constructor(diagramEngine,resolver,renderer){this.diagramEngine=diagramEngine,this.resolver=resolver,this.renderer=renderer}ngOnInit(){this.diagramEngine.registerDefaultFactories(),this.diagramEngine.getFactoriesManager().registerFactory({type:"portFactories",factory:new custom_factory_CustomPortFactory(this.resolver,this.renderer)}),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions({height:200,width:200});const port1=new core_src.f({type:"custom-port"});node1.addPort(port1),this.diagramModel.addAll(node1),this.diagramModel.getDiagramEngine().zoomToFit()}};var default_component_a;diagram_component_CustomPortDiagramComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>',styles:[(__webpack_require__(161).default||__webpack_require__(161)).length?__webpack_require__(161).default||__webpack_require__(161):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_a=void 0!==src.f&&src.f)?_a:Object,"function"==typeof(_b=void 0!==core.ComponentFactoryResolver&&core.ComponentFactoryResolver)?_b:Object,"function"==typeof(_c=void 0!==core.Renderer2&&core.Renderer2)?_c:Object])],diagram_component_CustomPortDiagramComponent);let default_component_DefaultPortComponent=class DefaultPortComponent{constructor(diagramEngine){this.diagramEngine=diagramEngine}ngOnInit(){this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createModel();const node1=new core_src.e;node1.setCoords({x:500,y:300}),node1.setDimensions({height:200,width:200}),node1.addInPort({name:"inport1"}),node1.addOutPort({name:"outport1"}),this.diagramModel.addAll(node1),this.diagramModel.getDiagramEngine().zoomToFit()}};default_component_DefaultPortComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"app-root",template:'<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>',styles:[(__webpack_require__(161).default||__webpack_require__(161)).length?__webpack_require__(161).default||__webpack_require__(161):""]}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(default_component_a=void 0!==src.f&&src.f)?default_component_a:Object])],default_component_DefaultPortComponent);__webpack_exports__.default={title:"Port",component:src.d,parameters:{docs:{iframeHeight:"400px"}},decorators:[Object(client.moduleMetadata)({declarations:[src.d,custom_component_CustomPortComponent,src.c,src.b,src.e],imports:[common.a,src.g],entryComponents:[src.d,src.c,custom_component_CustomPortComponent,src.b,src.e]})]};const Default=(args=>({component:default_component_DefaultPortComponent,props:args})).bind({}),Custom=(args=>({component:diagram_component_CustomPortDiagramComponent,props:args})).bind({});Custom.args={nodeHeight:200,nodeWidth:200},Default.parameters=Object.assign({storySource:{source:"DefaultNodeTemplate.bind({})"}},Default.parameters),Custom.parameters=Object.assign({storySource:{source:"CustomNodeTemplate.bind({})"}},Custom.parameters)},1308:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"__page",(function(){return __page}));__webpack_require__(25),__webpack_require__(11),__webpack_require__(20),__webpack_require__(1);var esm=__webpack_require__(17),blocks=__webpack_require__(144);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(esm.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(esm.mdx)(blocks.Meta,{title:"Changelog",mdxType:"Meta"}),Object(esm.mdx)(blocks.Description,{mdxType:"Description"},"# 1.0.0 (2021-01-02)\n\n\n### Features\n\n* **rxzu:** complete restructure and rename for library ([d3dbd47](https://github.com/Vonage/rxzu/commit/d3dbd4742d08573e747aa7bcd75691aafe60e241))\n\n# 1.0.0 (2021-01-02)\n\n\n### Features\n\n* **rxzu:** complete restructure and rename for library ([d3dbd47](https://github.com/Vonage/rxzu/commit/d3dbd4742d08573e747aa7bcd75691aafe60e241))\n\n# 1.0.0 (2021-01-02)\n\n\n### Features\n\n* **rxzu:** complete restructure and rename for library ([d3dbd47](https://github.com/Vonage/rxzu/commit/d3dbd4742d08573e747aa7bcd75691aafe60e241))\n\n# 1.0.0 (2021-01-02)\n\n\n### Features\n\n* **rxzu:** complete restructure and rename for library ([d3dbd47](https://github.com/Vonage/rxzu/commit/d3dbd4742d08573e747aa7bcd75691aafe60e241))\n\n## [3.3.4](https://github.com/Vonage/rxzu/compare/v3.3.3...v3.3.4) (2020-12-16)\n\n\n### Performance Improvements\n\n* **components:** set change detection to OnPush to reduce cd cycles ([80d2339](https://github.com/Vonage/rxzu/commit/80d23399b8bf9c9615673ce7b021c346bc6e86ba))\n* **diagram:** run dom changes outside of zone ([0d5fd04](https://github.com/Vonage/rxzu/commit/0d5fd04144ece14accc5dd229bde3c179a044481))\n\n## [3.3.3](https://github.com/DanielNetzer/rxzu/compare/v3.3.2...v3.3.3) (2020-12-11)\n\n### Performance Improvements\n\n- **diagram:** improve reset and addAll performance ([d809b29](https://github.com/DanielNetzer/rxzu/commit/d809b298cd1c2be90c96500ec8594fceb44efdcf))\n\n## [3.3.2](https://github.com/DanielNetzer/rxzu/compare/v3.3.1...v3.3.2) (2020-11-22)\n\n### Bug Fixes\n\n- **links:** unfound model errors, links layer position ([431c282](https://github.com/DanielNetzer/rxzu/commit/431c282dd4bccc2584701b29e0461c128260e8f2))\n\n## [3.3.1](https://github.com/DanielNetzer/rxzu/compare/v3.3.0...v3.3.1) (2020-11-19)\n\n### Bug Fixes\n\n- upgrade snyk from 1.419.1 to 1.420.0 ([4a49514](https://github.com/DanielNetzer/rxzu/commit/4a49514445bbbfd69cb62522e0b628b54f074209))\n- **dependencies:** updated all relevant dependencies ([dec8e9e](https://github.com/DanielNetzer/rxzu/commit/dec8e9e00537f261b2731b04d09ea6d4eaa2cc8d))\n- **merged:** lock file ([2182347](https://github.com/DanielNetzer/rxzu/commit/21823478f92a863ccf14e93d0c10c683a7d9e6d1))\n- **on mouse up:** handle edge cases where models cleared manually mid iteration ([a9d3603](https://github.com/DanielNetzer/rxzu/commit/a9d3603d03362189ade36740523cd57c2c123947))\n\n# [3.3.0](https://github.com/DanielNetzer/rxzu/compare/v3.2.0...v3.3.0) (2020-11-15)\n\n### Features\n\n- **angular 11:** updated library, storybook to angular 11 ([d67fd6b](https://github.com/DanielNetzer/rxzu/commit/d67fd6b63acc9d77837bbcb5482038feb82c17ff))\n\n# [3.2.0](https://github.com/DanielNetzer/rxzu/compare/v3.1.1...v3.2.0) (2020-11-15)\n\n### Features\n\n- **logger:** every event changes can be monitored using log level info ([d7b217d](https://github.com/DanielNetzer/rxzu/commit/d7b217dfa292f3d0876a5c7a583ddba7cca3c2cb))\n- **no zone:** everything rx with proper pipes ([fa400a2](https://github.com/DanielNetzer/rxzu/commit/fa400a2c398ff6d37cf65334263dc96c11057d08))\n- **smart routing:** mid implementation of smart links ([a074ac2](https://github.com/DanielNetzer/rxzu/commit/a074ac27fec3698cf889343b8fddd7779b1d646e))\n- **smart routing:** working, now to optmizations ([ea301f5](https://github.com/DanielNetzer/rxzu/commit/ea301f5e14aa3a8135c04b60eeb72440d80c548d))\n- **smart-routing:** working, still have to restrict canvas limits ([d82479e](https://github.com/DanielNetzer/rxzu/commit/d82479e8e59609feaa49450561421be1ce7fb7cf))\n\n## [3.1.1](https://github.com/DanielNetzer/rxzu/compare/v3.1.0...v3.1.1) (2020-11-14)\n\n### Bug Fixes\n\n- upgrade snyk from 1.415.0 to 1.419.1 ([d7e38df](https://github.com/DanielNetzer/rxzu/commit/d7e38df9ef538904b2fa619121f78d17db2adc7d))\n\n# [3.1.0](https://github.com/DanielNetzer/rxzu/compare/v3.0.1...v3.1.0) (2020-11-12)\n\n### Features\n\n- **serialization:** from and to json ([6fbd0be](https://github.com/DanielNetzer/rxzu/commit/6fbd0bea4009b3add591df80ff2e1143f1066e90))\n- **serialization:** interface for all serialized models ([4a3539a](https://github.com/DanielNetzer/rxzu/commit/4a3539a0a9b9c51d1dd0ce6da02b6aabffece70a))\n- **serialization:** serialize graph to json ([df6aa19](https://github.com/DanielNetzer/rxzu/commit/df6aa193f4a9ea1f8d886272e05756a622a56137)), closes [#17](https://github.com/DanielNetzer/rxzu/issues/17)\n\n## [3.0.1](https://github.com/DanielNetzer/rxzu/compare/v3.0.0...v3.0.1) (2020-11-12)\n\n### Bug Fixes\n\n- upgrade multiple dependencies with Snyk ([fec3a5b](https://github.com/DanielNetzer/rxzu/commit/fec3a5bbe919348f4aaad8ae6c214232b5cd856d))\n- upgrade snyk from 1.414.1 to 1.415.0 ([3ed91ef](https://github.com/DanielNetzer/rxzu/commit/3ed91ef88f1cca8fb2b0035a96fec6cc2d81248b))\n\n# [3.0.0](https://github.com/DanielNetzer/rxzu/compare/v2.18.7...v3.0.0) (2020-11-07)\n\n### Bug Fixes\n\n- **links model:** auto resolve the correct model for ports links ([cf6d074](https://github.com/DanielNetzer/rxzu/commit/cf6d0740e8c0177af38c50b85ce9c991daddd8e0))\n- **magnets:** resseting all previously defined magnets on selection models ([63d17f8](https://github.com/DanielNetzer/rxzu/commit/63d17f80a52b826444a253cf7c08dcedc91fb6d9))\n- **points:** reselecting points and moving links ([f123e05](https://github.com/DanielNetzer/rxzu/commit/f123e05ba2ca97bb9b17d1bce0e5b9443cf4c03e))\n- **ports:** multiple bugs and rendering races ([636aa39](https://github.com/DanielNetzer/rxzu/commit/636aa394af6dea42e7ba46b10bbb62d3150e9bc7))\n- **ports coords:** on initialization ports coords will align based on their true position ([22dd4bd](https://github.com/DanielNetzer/rxzu/commit/22dd4bd8ed710386d4be70ad26cf675868d3fc1b))\n\n### Documentation\n\n- **changelog:** added to stories ([c43b109](https://github.com/DanielNetzer/rxzu/commit/c43b109d8c943308f804dbf1e88874ba271cd4ec))\n- **custom link:** updated models and template according to changes ([1d09e0f](https://github.com/DanielNetzer/rxzu/commit/1d09e0f8a1347a9c4b7d2f6295cd1802eb57a0b0))\n\n### Features\n\n- **magnetic ports:** on link drag when getting to 30px proximity, magnetize ([a696474](https://github.com/DanielNetzer/rxzu/commit/a696474c69538ec04d84f5aa7ca0672da48ef264))\n\n### BREAKING CHANGES\n\n- **changelog:** models changes\n- **custom link:** models changes\n- **magnets:** models changes\n- **points:** models changes\n\n## [2.18.7](https://github.com/DanielNetzer/rxzu/compare/v2.18.6...v2.18.7) (2020-10-25)\n\n### Bug Fixes\n\n- **default link:** using public members selectColor ([99f5ab9](https://github.com/DanielNetzer/rxzu/commit/99f5ab987d33d9caff341603b6a9075b14582db4))\n\n## [2.18.6](https://github.com/DanielNetzer/rxzu/compare/v2.18.5...v2.18.6) (2020-06-10)\n\n### Bug Fixes\n\n- upgrade multiple dependencies with Snyk ([6b502d8](https://github.com/DanielNetzer/rxzu/commit/6b502d85fec81eb886d75a66d02928e5db2b6779))\n- upgrade snyk from 1.317.0 to 1.319.0 ([5e12d4a](https://github.com/DanielNetzer/rxzu/commit/5e12d4a31f897bed7080fc8c313e8a8ec2fc4bbb))\n- upgrade snyk from 1.317.0 to 1.319.0 ([a81d4aa](https://github.com/DanielNetzer/rxzu/commit/a81d4aacc0a3a30e92411909db030c99b28d4a87))\n- upgrade tslib from 1.11.1 to 1.11.2 ([48dbaf7](https://github.com/DanielNetzer/rxzu/commit/48dbaf7956c4e5173f0f97e0e6a627bf8de23034))\n- upgrade tslib from 1.11.1 to 1.11.2 ([98c84ca](https://github.com/DanielNetzer/rxzu/commit/98c84caadfd54a74ab224f720bf3a188848191bf))\n\n## [2.18.5](https://github.com/DanielNetzer/rxzu/compare/v2.18.4...v2.18.5) (2020-06-10)\n\n### Bug Fixes\n\n- upgrade ngx-markdown from 9.0.0 to 9.1.0 ([bc89e53](https://github.com/DanielNetzer/rxzu/commit/bc89e53ed6a238f817812e3b03d8549217d8bc2f))\n\n## [2.18.4](https://github.com/DanielNetzer/rxzu/compare/v2.18.3...v2.18.4) (2020-06-02)\n\n### Bug Fixes\n\n- **link model:** lock child points when locking link ([c07cf37](https://github.com/DanielNetzer/rxzu/commit/c07cf374b906240a3d1368cf1639c2c78c09c2d5))\n\n## [2.18.3](https://github.com/DanielNetzer/rxzu/compare/v2.18.2...v2.18.3) (2020-06-02)\n\n### Bug Fixes\n\n- upgrade multiple dependencies with Snyk ([55fd568](https://github.com/DanielNetzer/rxzu/commit/55fd568e9d20a719b9308ea15eb9288b69346ded))\n- upgrade multiple dependencies with Snyk ([b62f06b](https://github.com/DanielNetzer/rxzu/commit/b62f06bd15724d2fc118d250d429d0e320cbfd6a))\n\n## [2.18.2](https://github.com/DanielNetzer/rxzu/compare/v2.18.1...v2.18.2) (2020-05-07)\n\n### Bug Fixes\n\n- **links:** new links wont be created if canLinkToPort fail ([2a1ea0f](https://github.com/DanielNetzer/rxzu/commit/2a1ea0fba7b6ded4197b6de5f18187b6c0dee16e))\n\n## [2.18.1](https://github.com/DanielNetzer/rxzu/compare/v2.18.0...v2.18.1) (2020-05-04)\n\n### Bug Fixes\n\n- **zoom:** fixed issue with zoom to fit ([62777c7](https://github.com/DanielNetzer/rxzu/commit/62777c7a98a84152e77f5e9fc10d9bf47be82839))\n\n# [2.18.0](https://github.com/DanielNetzer/rxzu/compare/v2.17.0...v2.18.0) (2020-05-04)\n\n### Features\n\n- **zoom to fit:** taking under consideration min/max zoom ([2adc18d](https://github.com/DanielNetzer/rxzu/commit/2adc18db3747323823acf3b28cfd98abcf24e8eb))\n\n# [2.17.0](https://github.com/DanielNetzer/rxzu/compare/v2.16.0...v2.17.0) (2020-05-04)\n\n### Bug Fixes\n\n- package.json, package-lock.json & .snyk to reduce vulnerabilities ([71edd1e](https://github.com/DanielNetzer/rxzu/commit/71edd1e051ad2270536a6bb8edaf06abf8be0177))\n- package.json, package-lock.json & .snyk to reduce vulnerabilities ([8f4613d](https://github.com/DanielNetzer/rxzu/commit/8f4613d2ca2ec7ac2ff967e601be2939bfe0f726))\n- package.json, package-lock.json & .snyk to reduce vulnerabilities ([4da388b](https://github.com/DanielNetzer/rxzu/commit/4da388b98f39e5d44212dc9684a386ed1c64159c))\n- upgrade multiple dependencies with Snyk ([35e5380](https://github.com/DanielNetzer/rxzu/commit/35e5380bc92b86a20e36dd3c7c4f26c9c43a28f3))\n- upgrade rxjs from 6.5.4 to 6.5.5 ([59483a1](https://github.com/DanielNetzer/rxzu/commit/59483a16d26af5f633f7dc804a6d39cee711f898))\n- upgrade rxjs from 6.5.4 to 6.5.5 ([275b457](https://github.com/DanielNetzer/rxzu/commit/275b4575cf383322c315dc3b1c24d298d48f0313))\n- **deps:** updated all deps to address vuln ([e2323d1](https://github.com/DanielNetzer/rxzu/commit/e2323d1d25dfb8f15f6f9a88b1eff8b8f8159b6a))\n\n### Features\n\n- **zoom:** min and max zoom levels properties ([f8470cb](https://github.com/DanielNetzer/rxzu/commit/f8470cbe8ba55a8421ed9af4cfb2fa52aa9fc721))\n\n# [2.16.0](https://github.com/DanielNetzer/rxzu/compare/v2.15.0...v2.16.0) (2020-04-12)\n\n### Features\n\n- **links:** canCreateLinks property on ports ([73eba4b](https://github.com/DanielNetzer/rxzu/commit/73eba4b334c5cab50ad00f49754f94124b4d090e))\n\n# [2.15.0](https://github.com/DanielNetzer/rxzu/compare/v2.14.0...v2.15.0) (2020-04-12)\n\n### Features\n\n- **actions:** invalid link destroyed action dispatched ([d942119](https://github.com/DanielNetzer/rxzu/commit/d942119f5fe59045ed01191559ad79c994c90ca4))\n\n# [2.14.0](https://github.com/DanielNetzer/rxzu/compare/v2.13.2...v2.14.0) (2020-03-29)\n\n### Features\n\n- **actions:** loose link destroyed action ([4b47147](https://github.com/DanielNetzer/rxzu/commit/4b47147e07f9a152e36b3848f425f0d633513a44))\n- **colors:** links colors are now subscribable ([face093](https://github.com/DanielNetzer/rxzu/commit/face093b405cfa1d575b5da4abe1e4ce96b81e0c))\n\n## [2.13.2](https://github.com/DanielNetzer/rxzu/compare/v2.13.1...v2.13.2) (2020-02-09)\n\n### Bug Fixes\n\n- **imports:** coords interface import ([7b649a7](https://github.com/DanielNetzer/rxzu/commit/7b649a7e69ad7b570d05cfe9f12842fe43098f00))\n\n## [2.13.1](https://github.com/DanielNetzer/rxzu/compare/v2.13.0...v2.13.1) (2020-02-09)\n\n### Bug Fixes\n\n- **imports:** bad imports naming ([014f17a](https://github.com/DanielNetzer/rxzu/commit/014f17a4f3dbd8e4b166e072a67918a46c9760c3))\n\n# [2.13.0](https://github.com/DanielNetzer/rxzu/compare/v2.12.1...v2.13.0) (2019-12-25)\n\n### Features\n\n- **node model:** remove, update, add ports ([e334267](https://github.com/DanielNetzer/rxzu/commit/e3342674a5aad82d2e5e4c0839a989c2d371abb0))\n\n## [2.12.1](https://github.com/DanielNetzer/rxzu/compare/v2.12.0...v2.12.1) (2019-12-25)\n\n### Bug Fixes\n\n- **base event:** null reference in options for event ([8a69a51](https://github.com/DanielNetzer/rxzu/commit/8a69a51f16a172514030c20f2c628fd5aec31206))\n\n# [2.12.0](https://github.com/DanielNetzer/rxzu/compare/v2.11.2...v2.12.0) (2019-12-25)\n\n### Features\n\n- **base entity:** passing options to constructor ([5cd07d9](https://github.com/DanielNetzer/rxzu/commit/5cd07d956528d4a26c708ab45ae8b933ad76ebda))\n\n## [2.11.2](https://github.com/DanielNetzer/rxzu/compare/v2.11.1...v2.11.2) (2019-12-19)\n\n### Bug Fixes\n\n- **on entity destroyed:** reverted the filtering ([2b92467](https://github.com/DanielNetzer/rxzu/commit/2b92467c29907c489b958abef84e47c1470a5265))\n\n## [2.11.1](https://github.com/DanielNetzer/rxzu/compare/v2.11.0...v2.11.1) (2019-12-19)\n\n### Performance Improvements\n\n- **destroy options:** moved interface to a their right place ([c032bd5](https://github.com/DanielNetzer/rxzu/commit/c032bd5e0829d734ed125dd4c4d093a391a54132))\n\n# [2.11.0](https://github.com/DanielNetzer/rxzu/compare/v2.10.0...v2.11.0) (2019-12-19)\n\n### Features\n\n- **destroy options:** allowing to pass options to destroy method ([06373bf](https://github.com/DanielNetzer/rxzu/commit/06373bf193f8fcf42b4156bdb651dae42698ec85))\n- **destroy-options:** emit property ([16a4a2e](https://github.com/DanielNetzer/rxzu/commit/16a4a2e7585b680aff81fb70bfae29cba55a8bad))\n\n# [2.10.0](https://github.com/DanielNetzer/rxzu/compare/v2.9.0...v2.10.0) (2019-11-21)\n\n### Features\n\n- **port:** added getters and setters for width and height ([ba2c6c5](https://github.com/DanielNetzer/rxzu/commit/ba2c6c581bd3f5a586dd44bb286f6a5c7351f1a4))\n\n# [2.9.0](https://github.com/DanielNetzer/rxzu/compare/v2.8.3...v2.9.0) (2019-11-21)\n\n### Features\n\n- **port:** get x,y coords ([5162334](https://github.com/DanielNetzer/rxzu/commit/5162334b1005b3a557e3363d414148c5e2bb3a13))\n\n## [2.8.3](https://github.com/DanielNetzer/rxzu/compare/v2.8.2...v2.8.3) (2019-09-16)\n\n### Bug Fixes\n\n- **actions:** links created action ([f031475](https://github.com/DanielNetzer/rxzu/commit/f031475))\n\n## [2.8.2](https://github.com/DanielNetzer/rxzu/compare/v2.8.1...v2.8.2) (2019-09-15)\n\n### Bug Fixes\n\n- **defaults:** default link coords binding ([1f54ccd](https://github.com/DanielNetzer/rxzu/commit/1f54ccd))\n- **links:** maximum links ([554e76e](https://github.com/DanielNetzer/rxzu/commit/554e76e))\n- **points:** bad coords observable for points ([1936d62](https://github.com/DanielNetzer/rxzu/commit/1936d62)), closes [#13](https://github.com/DanielNetzer/rxzu/issues/13)\n\n## [2.8.1](https://github.com/DanielNetzer/rxzu/compare/v2.8.0...v2.8.1) (2019-09-11)\n\n### Bug Fixes\n\n- **actions:** link connection action now trigger when link is valid ([60d413e](https://github.com/DanielNetzer/rxzu/commit/60d413e))\n\n# [2.8.0](https://github.com/DanielNetzer/rxzu/compare/v2.7.1...v2.8.0) (2019-09-09)\n\n### Features\n\n- **actions:** on link connected between two ports ([55f492e](https://github.com/DanielNetzer/rxzu/commit/55f492e))\n\n## [2.7.1](https://github.com/DanielNetzer/rxzu/compare/v2.7.0...v2.7.1) (2019-09-09)\n\n### Bug Fixes\n\n- **selection:** multiple selection ([49ab712](https://github.com/DanielNetzer/rxzu/commit/49ab712)), closes [#12](https://github.com/DanielNetzer/rxzu/issues/12)\n\n# [2.7.0](https://github.com/DanielNetzer/rxzu/compare/v2.6.4...v2.7.0) (2019-09-04)\n\n### Features\n\n- **auto arrange:** dagre based auto arrange engine ([4e6263a](https://github.com/DanielNetzer/rxzu/commit/4e6263a))\n\n## [2.6.4](https://github.com/DanielNetzer/rxzu/compare/v2.6.3...v2.6.4) (2019-09-03)\n\n### Bug Fixes\n\n- **custom links:** outport can now define their links type per port ([68d0b95](https://github.com/DanielNetzer/rxzu/commit/68d0b95)), closes [#10](https://github.com/DanielNetzer/rxzu/issues/10) [#11](https://github.com/DanielNetzer/rxzu/issues/11)\n\n## [2.6.3](https://github.com/DanielNetzer/rxzu/compare/v2.6.2...v2.6.3) (2019-07-11)\n\n### Bug Fixes\n\n- **defauls:** changed exports to point to index file ([c3032e0](https://github.com/DanielNetzer/rxzu/commit/c3032e0))\n\n## [2.6.2](https://github.com/DanielNetzer/rxzu/compare/v2.6.1...v2.6.2) (2019-07-11)\n\n### Bug Fixes\n\n- **defaults:** exporting all default components ([3bb0ec8](https://github.com/DanielNetzer/rxzu/commit/3bb0ec8))\n\n## [2.6.1](https://github.com/DanielNetzer/rxzu/compare/v2.6.0...v2.6.1) (2019-07-08)\n\n### Bug Fixes\n\n- **security:** updated packages to remove security issues ([6643aa5](https://github.com/DanielNetzer/rxzu/commit/6643aa5))\n\n### Performance Improvements\n\n- **default components:** exported as individual modules ([2a4bff6](https://github.com/DanielNetzer/rxzu/commit/2a4bff6))\n\n# [2.6.0](https://github.com/DanielNetzer/rxzu/compare/v2.5.1...v2.6.0) (2019-07-04)\n\n### Features\n\n- **labels:** links can now have a label ([4359cb5](https://github.com/DanielNetzer/rxzu/commit/4359cb5))\n\n## [2.5.1](https://github.com/DanielNetzer/rxzu/compare/v2.5.0...v2.5.1) (2019-06-26)\n\n### Bug Fixes\n\n- **change detection:** on widget created run change detection ref check ([05f1eec](https://github.com/DanielNetzer/rxzu/commit/05f1eec))\n\n# [2.5.0](https://github.com/DanielNetzer/rxzu/compare/v2.4.0...v2.5.0) (2019-06-25)\n\n### Features\n\n- **default port:** custom ids ([6e7772a](https://github.com/DanielNetzer/rxzu/commit/6e7772a))\n\n# [2.4.0](https://github.com/DanielNetzer/rxzu/compare/v2.3.0...v2.4.0) (2019-06-25)\n\n### Features\n\n- **default node:** support for custom ids ([0e3ff7f](https://github.com/DanielNetzer/rxzu/commit/0e3ff7f))\n\n# [2.3.0](https://github.com/DanielNetzer/rxzu/compare/v2.2.0...v2.3.0) (2019-06-25)\n\n### Features\n\n- **default node:** support for custom ID ([ddd8b92](https://github.com/DanielNetzer/rxzu/commit/ddd8b92))\n\n# [2.2.0](https://github.com/DanielNetzer/rxzu/compare/v2.1.1...v2.2.0) (2019-06-24)\n\n### Features\n\n- **ports:** support for different types of ports ([9c9af1e](https://github.com/DanielNetzer/rxzu/commit/9c9af1e))\n\n## [2.1.1](https://github.com/DanielNetzer/rxzu/compare/v2.1.0...v2.1.1) (2019-06-24)\n\n### Bug Fixes\n\n- **util:** exporting utils ([eed447d](https://github.com/DanielNetzer/rxzu/commit/eed447d))\n\n# [2.1.0](https://github.com/DanielNetzer/rxzu/compare/v2.0.4...v2.1.0) (2019-06-24)\n\n### Bug Fixes\n\n- **storybook:** imports are now from the library and not the dist ([9a487cf](https://github.com/DanielNetzer/rxzu/commit/9a487cf))\n\n### Features\n\n- **exports:** exporting all relevant apis ([0d24b42](https://github.com/DanielNetzer/rxzu/commit/0d24b42))\n\n## [2.0.4](https://github.com/DanielNetzer/rxzu/compare/v2.0.3...v2.0.4) (2019-06-24)\n\n### Bug Fixes\n\n- **main module:** declared all components inside self ([80a55b3](https://github.com/DanielNetzer/rxzu/commit/80a55b3))\n\n## [2.0.3](https://github.com/DanielNetzer/rxzu/compare/v2.0.2...v2.0.3) (2019-06-23)\n\n### Bug Fixes\n\n- **public api:** fixed exposed public apis ([9861bda](https://github.com/DanielNetzer/rxzu/commit/9861bda))\n\n## [2.0.2](https://github.com/DanielNetzer/rxzu/compare/v2.0.1...v2.0.2) (2019-06-23)\n\n### Bug Fixes\n\n- **ci:** fixed issue with ci ([ff380d6](https://github.com/DanielNetzer/rxzu/commit/ff380d6))\n- **package lock:** updated package lock ([fb0d604](https://github.com/DanielNetzer/rxzu/commit/fb0d604))\n\n## [2.0.1](https://github.com/DanielNetzer/rxzu/compare/v2.0.0...v2.0.1) (2019-06-23)\n\n### Bug Fixes\n\n- **public api:** exporting all required modules ([69a80de](https://github.com/DanielNetzer/rxzu/commit/69a80de))\n\n# [2.0.0](https://github.com/DanielNetzer/rxzu/compare/v1.5.0...v2.0.0) (2019-06-23)\n\n### Bug Fixes\n\n- **base entity:** removed unused import ([24a366b](https://github.com/DanielNetzer/rxzu/commit/24a366b))\n- **default-factories:** use renderer2 instead direct DOM ([c10970d](https://github.com/DanielNetzer/rxzu/commit/c10970d))\n- **layers overlapping:** layers wont overlap each ([045cffb](https://github.com/DanielNetzer/rxzu/commit/045cffb))\n\n### Features\n\n- **rxstate:** move all library and engine to rx style [WIP](<[24d2b03](https://github.com/DanielNetzer/rxzu/commit/24d2b03)>)\n\n### BREAKING CHANGES\n\n- **rxstate:** CHANGES\n\n# [1.5.0](https://github.com/DanielNetzer/rxzu/compare/v1.4.0...v1.5.0) (2019-05-18)\n\n### Features\n\n- **selection:** links, points selection ([ad6e1dd](https://github.com/DanielNetzer/rxzu/commit/ad6e1dd))\n\n# [1.4.0](https://github.com/DanielNetzer/rxzu/compare/v1.3.0...v1.4.0) (2019-05-12)\n\n### Features\n\n- **multiple selection:** selection box, multiple entities selection ([ef6677a](https://github.com/DanielNetzer/rxzu/commit/ef6677a))\n\n# [1.3.0](https://github.com/DanielNetzer/rxzu/compare/v1.2.0...v1.3.0) (2019-05-11)\n\n### Bug Fixes\n\n- **actions:** once action stop firing, clear the action from the state ([c77571e](https://github.com/DanielNetzer/rxzu/commit/c77571e))\n- **build:** clean build errors ([adf7bf8](https://github.com/DanielNetzer/rxzu/commit/adf7bf8))\n- **build:** expose props to be used in html ([4a11834](https://github.com/DanielNetzer/rxzu/commit/4a11834))\n- **configs:** configurations and node models ([a545c2c](https://github.com/DanielNetzer/rxzu/commit/a545c2c))\n- **engine:** missed refactoring parent prop ([4de3a63](https://github.com/DanielNetzer/rxzu/commit/4de3a63))\n- **merge:** correct merge conflict glitch ([115eb19](https://github.com/DanielNetzer/rxzu/commit/115eb19))\n- **merge:** merged all branches to master ([64fdb92](https://github.com/DanielNetzer/rxzu/commit/64fdb92))\n- **release:** change semantic release prepare stage ([89131f8](https://github.com/DanielNetzer/rxzu/commit/89131f8))\n\n### Features\n\n- **abstract factories:** node, links, ports abstract factories added ([ad58aa9](https://github.com/DanielNetzer/rxzu/commit/ad58aa9))\n- **component:** default link component impl ([f870137](https://github.com/DanielNetzer/rxzu/commit/f870137))\n- **data attribs:** entities id, name data attribs, get mouse element ([a847af9](https://github.com/DanielNetzer/rxzu/commit/a847af9))\n- **data attributes:** nodes, ports id and name data attributes ([56ddcca](https://github.com/DanielNetzer/rxzu/commit/56ddcca))\n- **default models:** node, port, link default models added ([3378b34](https://github.com/DanielNetzer/rxzu/commit/3378b34))\n- **default models:** node, port, link default models created ([ecbadf3](https://github.com/DanielNetzer/rxzu/commit/ecbadf3))\n- **engine service:** all core functionality implemented ([123010e](https://github.com/DanielNetzer/rxzu/commit/123010e))\n- **links:** links are rendered, port coords inaccurate ([54b99a0](https://github.com/DanielNetzer/rxzu/commit/54b99a0))\n- **links:** mid work on links, change detection issue ([84b292f](https://github.com/DanielNetzer/rxzu/commit/84b292f))\n- **links:** mid work on ports position ([1c285cc](https://github.com/DanielNetzer/rxzu/commit/1c285cc))\n- **merge:** branch feature/links merged ([52a9fa4](https://github.com/DanielNetzer/rxzu/commit/52a9fa4))\n- **models:** added models for all entities ([04a5f65](https://github.com/DanielNetzer/rxzu/commit/04a5f65))\n- **models:** change props to private and expose with get/set ([cdf10d4](https://github.com/DanielNetzer/rxzu/commit/cdf10d4))\n- **ports:** factory ports implemented ([c148aaf](https://github.com/DanielNetzer/rxzu/commit/c148aaf))\n- **ports:** mid work on ports factory ([b748bc9](https://github.com/DanielNetzer/rxzu/commit/b748bc9))\n- **rendering:** programmatic rendering of links ([58eabe4](https://github.com/DanielNetzer/rxzu/commit/58eabe4))\n- **zoom to fit:** canvas zoom level fit to elements in it ([5fbd783](https://github.com/DanielNetzer/rxzu/commit/5fbd783))\n"))}MDXContent.isMDXComponent=!0;var __page=function __page(){throw new Error("Docs-only story")};__page.parameters={docsOnly:!0};var componentMeta={title:"Changelog",includeStories:["__page"]},mdxStoryNameToKey={};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(esm.mdx)(blocks.AddContext,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentMeta:componentMeta},Object(esm.mdx)(MDXContent,null))}});__webpack_exports__.default=componentMeta},158:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".demo-diagram {\n  display: flex;\n  height: 100%;\n  min-height: 100vh;\n  background-color: #3c3c3c;\n  background-image: linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent);\n  background-size: 50px 50px;\n}"},159:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".demo-diagram {\n  display: flex;\n  height: 100%;\n  min-height: 100vh;\n  background-color: #3c3c3c;\n  background-image: linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent);\n  background-size: 50px 50px;\n}"},160:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".demo-diagram {\n  display: flex;\n  height: 100%;\n  min-height: 100vh;\n  background-color: #3c3c3c;\n  background-image: linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent);\n  background-size: 50px 50px;\n}"},161:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".demo-diagram {\n  display: flex;\n  height: 100%;\n  min-height: 100vh;\n  background-color: #3c3c3c;\n  background-image: linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent);\n  background-size: 50px 50px;\n}"},295:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='\x3c!-- Label Host --\x3e\n<ng-template #labelLayer></ng-template>\n\n<svg class="link-container">\n  \x3c!-- Link --\x3e\n  <g [id]="id">\n    <path\n      [attr.stroke-width]="width"\n      [attr.stroke]="selectColor() | async"\n      [attr.d]="selectPath() | async"\n      class="default-link"\n      (mouseleave)="setHovered(false)"\n      (mouseenter)="setHovered()"\n      [ngClass]="{ hovered: selectHovered() | async }"\n    ></path>\n    <path\n      class="default-link"\n      (mouseleave)="setHovered(false)"\n      (mouseenter)="setHovered()"\n      [attr.stroke-width]="20"\n      [attr.stroke]="selectColor() | async"\n      [attr.stroke-linecap]="\'round\'"\n      [attr.data-linkid]="id"\n      [attr.stroke-opacity]="(selectHovered() | async) ? \'0.1\' : \'0\'"\n      [attr.d]="selectPath() | async"\n    ></path>\n  </g>\n\n  \x3c!-- Points --\x3e\n  <g *ngFor="let point of getPoints(); trackBy: trackByPoints" [id]="point.id">\n    <circle\n      fill="currentColor"\n      [attr.cx]="point.selectX() | async"\n      [attr.cy]="point.selectY() | async"\n      r="5"\n      class="default-point"\n      [ngClass]="{ hovered: point.selectHovered() | async }"\n    />\n    <circle\n      [attr.data-pointid]="point.id"\n      [attr.data-linkid]="id"\n      (mouseleave)="point.setHovered(false); setHovered(false)"\n      (mouseenter)="point.setHovered(); setHovered()"\n      [attr.cx]="point.selectX() | async"\n      [attr.cy]="point.selectY() | async"\n      r="15"\n      [attr.opacity]="0"\n      [ngClass]="{ selected: point.selectSelected() | async }"\n    />\n  </g>\n</svg>\n'},296:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".link-container {\n  position: relative;\n  fill: none;\n  overflow: visible;\n  pointer-events: all;\n}\n\n.default-link {\n  fill: none;\n  overflow: visible;\n}\n\n@-webkit-keyframes dash {\n  from {\n    stroke-dashoffset: 24;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n\n@keyframes dash {\n  from {\n    stroke-dashoffset: 24;\n  }\n  to {\n    stroke-dashoffset: 0;\n  }\n}\n\n.default-link.hovered {\n  stroke: #00c0ff;\n  stroke-dasharray: 10, 2;\n  -webkit-animation: dash 1s linear infinite;\n          animation: dash 1s linear infinite;\n}\n\n.default-point {\n  color: lightgray;\n  overflow: visible;\n  pointer-events: all;\n}\n\n.default-point.hovered {\n  color: #00c0ff;\n}"},297:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="<div\n  class=\"default-node\"\n  [ngStyle]=\"{\n    'height.px': height$ | async,\n    'width.px': width$ | async,\n    'background-color': color\n  }\"\n>\n  <div class=\"ports\">\n    <ng-template #portsLayer></ng-template>\n  </div>\n</div>\n"},298:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=":host.selected .default-node {\n  background-color: white !important;\n  border-color: blue;\n}\n:host .default-node {\n  pointer-events: all;\n  width: 100%;\n  border-radius: 10px;\n  transition: all 0.3s ease-in-out;\n  cursor: auto;\n}\n:host .default-node .title {\n  padding: 10px;\n  text-align: center;\n  border-bottom: 1px solid blue;\n}\n:host .ports {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: column;\n}"},299:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="<div [ngClass]=\"in ? 'in' : 'out'\" draggable=\"false\"></div>\n"},300:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=":host {\n  position: relative;\n  width: 10px;\n  height: 10px;\n  border-radius: 60px;\n  border: 1px solid gray;\n  background-color: lightgray;\n  margin: 10px 0;\n}\n:host:hover {\n  background-color: green;\n}\n:host.out {\n  right: -195px;\n}\n:host.in {\n  left: -5px;\n}"},301:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="<div\n  class=\"default-label\"\n  [ngStyle]=\"{\n    transform:\n      'translate(' +\n      (selectCoords() | async).x +\n      'px, ' +\n      (selectCoords() | async).y +\n      'px)' +\n      'rotate(' +\n      (selectRotation() | async) +\n      'deg)'\n  }\"\n>\n  {{ selectLabel() | async }}\n</div>\n"},302:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".default-label {\n  color: white;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}"},303:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div\n  class="ngdx-diagram"\n  #canvas\n  (mousedown)="onMouseDown($event)"\n  (wheel)="onMouseWheel($event)"\n>\n  \x3c!-- Nodes Layer --\x3e\n  <div class="ngdx-nodes-layer">\n    <ng-template #nodesLayer></ng-template>\n  </div>\n\n  \x3c!-- Links Layer --\x3e\n  <div class="ngdx-links-layer">\n    <ng-template #linksLayer></ng-template>\n  </div>\n\n  \x3c!-- Selection Box --\x3e\n  <div\n    *ngIf="selectionBox$ | async as selectionBox"\n    class="selector"\n    [ngStyle]="{\n      top: selectionBox.dimensions.top + \'px\',\n      left: selectionBox.dimensions.left + \'px\',\n      width: selectionBox.dimensions.width + \'px\',\n      height: selectionBox.dimensions.height + \'px\'\n    }"\n  ></div>\n</div>\n'},304:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".ngdx-diagram {\n  position: relative;\n  flex-grow: 1;\n  display: flex;\n  cursor: move;\n  overflow: hidden;\n}\n.ngdx-diagram .selector {\n  position: absolute;\n  background-color: rgba(0, 192, 255, 0.2);\n  border: solid 2px #00c0ff;\n}\n.ngdx-diagram .ngdx-nodes-layer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  transform-origin: 0 0;\n  overflow: visible !important;\n  pointer-events: none;\n  z-index: 150;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.ngdx-diagram .ngdx-links-layer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  transform-origin: 0 0;\n  overflow: visible !important;\n  pointer-events: none;\n  z-index: 100;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}"},305:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default="<div\n  [ngStyle]=\"{\n    transform:\n      'translate(' +\n      (selectCoords() | async).x +\n      'px, ' +\n      (selectCoords() | async).y +\n      'px)' +\n      'rotate(' +\n      (selectRotation() | async) +\n      'deg)'\n  }\"\n>\n  <span class=\"default-label\">\n    {{ selectLabel() | async }}\n  </span>\n</div>\n"},306:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".default-label {\n  background-image: linear-gradient(to left, violet, indigo, blue, green, yellow, orange, red);\n  -webkit-background-clip: text;\n          background-clip: text;\n  color: transparent;\n  font-size: 24px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}"},307:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='\x3c!-- Label Host --\x3e\n<ng-template #labelLayer></ng-template>\n\n<svg class="custom-link-container" [ngStyle]="{ color: selectColor() | async }">\n  <defs>\n    <marker\n      id="triangle"\n      viewBox="0 0 20 20"\n      refX="15"\n      refY="4"\n      markerUnits="strokeWidth"\n      markerWidth="1"\n      markerHeight="1"\n      orient="auto"\n    >\n      <path d="M 0 0 L 10 5 L 0 10 z" fill="currentcolor" stroke="currentcolor" />\n    </marker>\n  </defs>\n  \x3c!-- Link --\x3e\n  <g [id]="id">\n    <path\n      [attr.stroke-width]="width"\n      [attr.stroke]="selectColor() | async"\n      [attr.d]="selectPath() | async"\n      class="custom-link"\n      (mouseleave)="setHovered(false)"\n      (mouseenter)="setHovered()"\n      [ngClass]="{ hovered: selectHovered() | async }"\n      marker-end="url(#triangle)"\n    ></path>\n    <path\n      class="custom-link"\n      (mouseleave)="setHovered(false)"\n      (mouseenter)="setHovered()"\n      [attr.stroke-width]="20"\n      [attr.stroke]="selectColor() | async"\n      [attr.stroke-linecap]="\'round\'"\n      [attr.data-linkid]="id"\n      [attr.stroke-opacity]="(selectHovered() | async) ? \'0.1\' : \'0\'"\n      [attr.d]="selectPath() | async"\n      marker-end="url(#triangle)"\n    ></path>\n  </g>\n\n  \x3c!-- Points --\x3e\n  <g *ngFor="let point of getPoints(); trackBy: trackByPoints" [id]="point.id">\n    <circle\n      fill="currentColor"\n      [attr.cx]="point.selectX() | async"\n      [attr.cy]="point.selectY() | async"\n      r="5"\n      class="default-point"\n      [ngClass]="{ hovered: point.selectHovered() | async }"\n    />\n    <circle\n      [attr.data-pointid]="point.id"\n      [attr.data-linkid]="id"\n      (mouseleave)="point.setHovered(false); setHovered(false)"\n      (mouseenter)="point.setHovered(); setHovered()"\n      [attr.cx]="point.selectX() | async"\n      [attr.cy]="point.selectY() | async"\n      r="15"\n      [attr.opacity]="0"\n      [ngClass]="{ selected: point.selectSelected() | async }"\n    />\n  </g>\n</svg>\n\n<div\n  (click)="deleteLink()"\n  class="delete-icon"\n  [ngStyle]="{\n    transform: \'translate(\' + calcCenterOfPath().x + \'px, \' + (calcCenterOfPath().y - 200) + \'px)\'\n  }"\n>\n  <svg fill="currentcolor" xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="-47 0 512 512" width="30px">\n    <path\n      fill="currentcolor"\n      d="m416.875 114.441406-11.304688-33.886718c-4.304687-12.90625-16.339843-21.578126-29.941406-21.578126h-95.011718v-30.933593c0-15.460938-12.570313-28.042969-28.027344-28.042969h-87.007813c-15.453125 0-28.027343 12.582031-28.027343 28.042969v30.933593h-95.007813c-13.605469 0-25.640625 8.671876-29.945313 21.578126l-11.304687 33.886718c-2.574219 7.714844-1.2695312 16.257813 3.484375 22.855469 4.753906 6.597656 12.445312 10.539063 20.578125 10.539063h11.816406l26.007813 321.605468c1.933594 23.863282 22.183594 42.558594 46.109375 42.558594h204.863281c23.921875 0 44.175781-18.695312 46.105469-42.5625l26.007812-321.601562h6.542969c8.132812 0 15.824219-3.941407 20.578125-10.535157 4.753906-6.597656 6.058594-15.144531 3.484375-22.859375zm-249.320312-84.441406h83.0625v28.976562h-83.0625zm162.804687 437.019531c-.679687 8.402344-7.796875 14.980469-16.203125 14.980469h-204.863281c-8.40625 0-15.523438-6.578125-16.203125-14.980469l-25.816406-319.183593h288.898437zm-298.566406-349.183593 9.269531-27.789063c.210938-.640625.808594-1.070313 1.484375-1.070313h333.082031c.675782 0 1.269532.429688 1.484375 1.070313l9.269531 27.789063zm0 0"\n    />\n    <path\n      fill="currentcolor"\n      d="m282.515625 465.957031c.265625.015625.527344.019531.792969.019531 7.925781 0 14.550781-6.210937 14.964844-14.21875l14.085937-270.398437c.429687-8.273437-5.929687-15.332031-14.199219-15.761719-8.292968-.441406-15.328125 5.925782-15.761718 14.199219l-14.082032 270.398437c-.429687 8.273438 5.925782 15.332032 14.199219 15.761719zm0 0"\n    />\n    <path\n      fill="currentcolor"\n      d="m120.566406 451.792969c.4375 7.996093 7.054688 14.183593 14.964844 14.183593.273438 0 .554688-.007812.832031-.023437 8.269531-.449219 14.609375-7.519531 14.160157-15.792969l-14.753907-270.398437c-.449219-8.273438-7.519531-14.613281-15.792969-14.160157-8.269531.449219-14.609374 7.519532-14.160156 15.792969zm0 0"\n    />\n    <path\n      fill="currentcolor"\n      d="m209.253906 465.976562c8.285156 0 15-6.714843 15-15v-270.398437c0-8.285156-6.714844-15-15-15s-15 6.714844-15 15v270.398437c0 8.285157 6.714844 15 15 15zm0 0"\n    />\n  </svg>\n</div>\n'},308:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".custom-link #triangle path {\n  fill: currentColor;\n}\n\n.custom-link-container {\n  position: relative;\n  fill: none;\n  overflow: visible;\n  pointer-events: all;\n}\n\n.default-point {\n  color: lightgray;\n  overflow: visible;\n  pointer-events: all;\n}\n\n.default-point.hovered {\n  color: #00c0ff;\n}\n\n.delete-icon {\n  color: white;\n  cursor: pointer;\n  display: flex;\n  pointer-events: all;\n}"},309:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<div class="custom-node">\n  <div>{{ nodeContent }}</div>\n\n  <div class="ports">\n    <ng-template #portsLayer></ng-template>\n  </div>\n</div>\n'},310:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=':host.selected .custom-node:after {\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n  border-color: #86d8b9;\n}\n:host .custom-node {\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  pointer-events: all;\n  background-color: white !important;\n  border-radius: 16px;\n  transition: all 0.3s ease-in-out;\n  padding: 20px;\n  cursor: auto;\n  border: 1px solid #e1e2e6;\n}\n:host .custom-node:hover {\n  cursor: pointer;\n  border-color: #86d8b9;\n}\n:host .custom-node:after {\n  transition: all 0.3s ease-in-out;\n  content: "";\n  position: absolute;\n  top: 12px;\n  right: 4px;\n  bottom: 4px;\n  left: 12px;\n  z-index: -1;\n  margin: -9px;\n  border-radius: 16px;\n}\n:host .custom-node:after {\n  background: #86d8b9;\n}'},311:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default='<svg class="in" *ngIf="in" width="24" height="16" viewBox="0 0 24 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path\n    d="M23.4092 0.839456L23.4096 0.839967C23.4709 0.93801 23.5 1.04467 23.5 1.14951C23.5 1.24656 23.4748 1.34624 23.421 1.44004L12.6823 15.1163L12.6657 15.1375L12.6514 15.1603C12.5272 15.3593 12.2828 15.5 11.9998 15.5C11.7164 15.5 11.4727 15.3596 11.3489 15.1608L11.3345 15.1377L11.3177 15.1163L0.578554 1.44007C0.470045 1.25053 0.474001 1.02677 0.590099 0.84006C0.714827 0.640412 0.959347 0.499999 1.2421 0.499999L22.7579 0.5C23.041 0.5 23.285 0.640261 23.4092 0.839456Z"\n    fill="white"\n    stroke="#B0B0B0"\n  />\n</svg>\n'},312:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=":host {\n  position: absolute;\n}\n:host.in {\n  left: 45%;\n  top: -10px;\n}"},5:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return default_link_component_DefaultLinkComponent})),__webpack_require__.d(__webpack_exports__,"d",(function(){return default_node_component_DefaultNodeComponent})),__webpack_require__.d(__webpack_exports__,"e",(function(){return default_port_component_DefaultPortComponent})),__webpack_require__.d(__webpack_exports__,"b",(function(){return default_label_component_DefaultLabelComponent})),__webpack_require__.d(__webpack_exports__,"a",(function(){return angular_factory_AbstractAngularFactory})),__webpack_require__.d(__webpack_exports__,"f",(function(){return engine_service_DiagramEngine})),__webpack_require__.d(__webpack_exports__,"g",(function(){return RxZuDiagramsModule}));var _a,_b,tslib_es6=__webpack_require__(3),core=__webpack_require__(0),common=__webpack_require__(14),src=__webpack_require__(9),combineLatest=__webpack_require__(199),takeUntil=__webpack_require__(535);let default_link_component_DefaultLinkComponent=class DefaultLinkComponent extends src.d{constructor(cdRef){super({type:"ngdx-default-link"}),this.cdRef=cdRef,this.path$=Object(src.k)(null,this.entityPipe("path")),this.points$=Object(src.k)([],this.entityPipe("points"))}trackByPoints(i,point){return point.id}ngOnInit(){this.setPainted(!0)}ngAfterViewInit(){const firstPCoords$=this.getFirstPoint().selectCoords(),lastPCoords$=this.getLastPoint().selectCoords();Object(combineLatest.b)([firstPCoords$,lastPCoords$]).pipe(Object(takeUntil.a)(this.onEntityDestroy())).subscribe(([firstPCoords,lastPCoords])=>{const points=[firstPCoords,lastPCoords],xOrY=Math.abs(firstPCoords.x-lastPCoords.x)>Math.abs(firstPCoords.y-lastPCoords.y)?"x":"y";let isStraight=!1;Math.abs(points[0][xOrY]-points[1][xOrY])<50&&(isStraight=!0);const path=Object(src.l)(firstPCoords,lastPCoords,isStraight?0:this.curvyness);this.path$.set(path).emit();const label=this.getLabel();label&&label.setCoords(this.calcCenterOfPath(firstPCoords,lastPCoords)),this.cdRef.detectChanges()}),this.setPainted(!0)}calcLabelIncline(firstPoint,secondPoint){const dy=secondPoint.y-firstPoint.y,dx=secondPoint.x-firstPoint.x;if(0===dx)return 0;let inclineAngel=180*Math.atan(dy/dx)/Math.PI;return inclineAngel<0&&(inclineAngel+=180),inclineAngel}calcCenterOfPath(firstPoint,secondPoint){return{x:(firstPoint.x+secondPoint.x)/2+20,y:(firstPoint.y+secondPoint.y)/2+20}}selectPath(){return this.path$.value$}};Object(tslib_es6.a)([Object(core.ViewChild)("labelLayer",{read:core.ViewContainerRef,static:!0}),Object(tslib_es6.b)("design:type","function"==typeof(_a=void 0!==core.ViewContainerRef&&core.ViewContainerRef)?_a:Object)],default_link_component_DefaultLinkComponent.prototype,"labelLayer",void 0),default_link_component_DefaultLinkComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"ngdx-default-link",template:(__webpack_require__(295).default||__webpack_require__(295)).length?__webpack_require__(295).default||__webpack_require__(295):"",styles:[(__webpack_require__(296).default||__webpack_require__(296)).length?__webpack_require__(296).default||__webpack_require__(296):""],changeDetection:core.ChangeDetectionStrategy.OnPush}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_b=void 0!==core.ChangeDetectorRef&&core.ChangeDetectorRef)?_b:Object])],default_link_component_DefaultLinkComponent);let DefaultLinkModule=class DefaultLinkModule{};var default_node_component_a;DefaultLinkModule=Object(tslib_es6.a)([Object(core.NgModule)({declarations:[default_link_component_DefaultLinkComponent],imports:[common.a],exports:[default_link_component_DefaultLinkComponent],entryComponents:[default_link_component_DefaultLinkComponent]})],DefaultLinkModule);let default_node_component_DefaultNodeComponent=class DefaultNodeComponent extends src.e{constructor(){super({type:"ngdx-default-node"})}ngOnInit(){this.selectPorts().subscribe(ports=>{const factoriesManager=this.getParent().getDiagramEngine().getFactoriesManager();for(const port of ports)port.getPainted().isPainted||factoriesManager.getFactory({factoryType:"portFactories",modelType:port.getType()}).generateWidget({model:port,host:this.portsLayer});this.setPainted(!0)})}};Object(tslib_es6.a)([Object(core.ViewChild)("portsLayer",{read:core.ViewContainerRef,static:!0}),Object(tslib_es6.b)("design:type","function"==typeof(default_node_component_a=void 0!==core.ViewContainerRef&&core.ViewContainerRef)?default_node_component_a:Object)],default_node_component_DefaultNodeComponent.prototype,"portsLayer",void 0),default_node_component_DefaultNodeComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"ngdx-default-node",template:(__webpack_require__(297).default||__webpack_require__(297)).length?__webpack_require__(297).default||__webpack_require__(297):"",styles:[(__webpack_require__(298).default||__webpack_require__(298)).length?__webpack_require__(298).default||__webpack_require__(298):""],changeDetection:core.ChangeDetectionStrategy.OnPush}),Object(tslib_es6.b)("design:paramtypes",[])],default_node_component_DefaultNodeComponent);let DefaultNodeModule=class DefaultNodeModule{};DefaultNodeModule=Object(tslib_es6.a)([Object(core.NgModule)({declarations:[default_node_component_DefaultNodeComponent],imports:[common.a],exports:[default_node_component_DefaultNodeComponent],entryComponents:[default_node_component_DefaultNodeComponent]})],DefaultNodeModule);let default_port_component_DefaultPortComponent=class DefaultPortComponent extends src.f{constructor(){super({type:"ngdx-default-port"})}ngOnInit(){this.setPainted(!0)}};default_port_component_DefaultPortComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"ngdx-default-port",template:(__webpack_require__(299).default||__webpack_require__(299)).length?__webpack_require__(299).default||__webpack_require__(299):"",styles:[(__webpack_require__(300).default||__webpack_require__(300)).length?__webpack_require__(300).default||__webpack_require__(300):""],changeDetection:core.ChangeDetectionStrategy.OnPush}),Object(tslib_es6.b)("design:paramtypes",[])],default_port_component_DefaultPortComponent);let DefaultPortModule=class DefaultPortModule{};var default_label_component_a;DefaultPortModule=Object(tslib_es6.a)([Object(core.NgModule)({declarations:[default_port_component_DefaultPortComponent],imports:[common.a],exports:[default_port_component_DefaultPortComponent],entryComponents:[default_port_component_DefaultPortComponent]})],DefaultPortModule);let default_label_component_DefaultLabelComponent=class DefaultLabelComponent extends src.c{constructor(cdRef){super("ngdx-default-label"),this.cdRef=cdRef}ngOnInit(){this.selectCoords().pipe(Object(takeUntil.a)(this.destroyed$)).subscribe(()=>{this.cdRef.detectChanges()}),this.setPainted(!0)}};default_label_component_DefaultLabelComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"ngdx-default-label",template:(__webpack_require__(301).default||__webpack_require__(301)).length?__webpack_require__(301).default||__webpack_require__(301):"",styles:[(__webpack_require__(302).default||__webpack_require__(302)).length?__webpack_require__(302).default||__webpack_require__(302):""],changeDetection:core.ChangeDetectionStrategy.OnPush}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(default_label_component_a=void 0!==core.ChangeDetectorRef&&core.ChangeDetectorRef)?default_label_component_a:Object])],default_label_component_DefaultLabelComponent);let DefaultLabelModule=class DefaultLabelModule{};DefaultLabelModule=Object(tslib_es6.a)([Object(core.NgModule)({declarations:[default_label_component_DefaultLabelComponent],imports:[common.a],exports:[default_label_component_DefaultLabelComponent],entryComponents:[default_label_component_DefaultLabelComponent]})],DefaultLabelModule);class angular_factory_AbstractAngularFactory extends src.a{}class default_link_factory_DefaultLinkFactory extends angular_factory_AbstractAngularFactory{constructor(resolver,renderer){super("default"),this.resolver=resolver,this.renderer=renderer}generateWidget({model:model,host:host}){const componentRef=host.createComponent(this.getRecipe()),rootNode=componentRef.location.nativeElement;return this.renderer.setStyle(rootNode,"position","absolute"),this.renderer.addClass(rootNode,"label"),this.renderer.setAttribute(rootNode,"data-linkid",model.id),model.onEntityDestroy().subscribe(()=>{componentRef.destroy()}),Object.entries(model).forEach(([key,value])=>{componentRef.instance[key]=value}),componentRef.instance.ngOnInit(),componentRef}getRecipe(){return this.resolver.resolveComponentFactory(default_link_component_DefaultLinkComponent)}}class default_port_factory_DefaultPortFactory extends angular_factory_AbstractAngularFactory{constructor(resolver,renderer){super("default"),this.resolver=resolver,this.renderer=renderer}generateWidget({model:model,host:nodeHost}){const componentRef=nodeHost.createComponent(this.getRecipe()),rootNode=componentRef.location.nativeElement;return this.renderer.setAttribute(rootNode,"data-portid",model.id),this.renderer.setAttribute(rootNode,"data-name",model.getName()),model.in?this.renderer.addClass(rootNode,"in"):this.renderer.addClass(rootNode,"out"),Object.entries(model).forEach(([key,value])=>{componentRef.instance[key]=value}),model.onEntityDestroy().subscribe(()=>{componentRef.destroy()}),componentRef.instance.ngOnInit(),componentRef}getRecipe(){return this.resolver.resolveComponentFactory(default_port_component_DefaultPortComponent)}}class default_node_factory_DefaultNodeFactory extends angular_factory_AbstractAngularFactory{constructor(resolver,renderer){super("default"),this.resolver=resolver,this.renderer=renderer}generateWidget({model:model,host:host,diagramModel:diagramModel}){const componentRef=host.createComponent(this.getRecipe(),host.length),rootNode=componentRef.location.nativeElement;return this.renderer.setStyle(rootNode,"position","absolute"),this.renderer.setStyle(rootNode,"display","block"),this.renderer.setAttribute(rootNode,"data-nodeid",model.id),model.selectCoords().subscribe(({x:x,y:y})=>{this.renderer.setStyle(rootNode,"left",x+"px"),this.renderer.setStyle(rootNode,"top",y+"px")}),model.selectionChanges().subscribe(e=>{e.isSelected?this.renderer.addClass(rootNode,"selected"):this.renderer.removeClass(rootNode,"selected")}),model.onEntityDestroy().subscribe(()=>{componentRef.destroy()}),Object.entries(model).forEach(([key,value])=>{componentRef.instance[key]=value}),componentRef.instance.setParent(diagramModel),componentRef.instance.ngOnInit(),componentRef}getRecipe(){return this.resolver.resolveComponentFactory(default_node_component_DefaultNodeComponent)}}class default_label_factory_DefaultLabelFactory extends angular_factory_AbstractAngularFactory{constructor(resolver,renderer){super("default"),this.resolver=resolver,this.renderer=renderer}generateWidget({model:model,host:host}){const componentRef=host.createComponent(this.getRecipe()),rootNode=componentRef.location.nativeElement;return this.renderer.setStyle(rootNode,"position","absolute"),this.renderer.setAttribute(rootNode,"data-labelid",model.id),model.onEntityDestroy().subscribe(()=>{componentRef.destroy()}),Object.entries(model).forEach(([key,value])=>{componentRef.instance[key]=value}),componentRef.instance.ngOnInit(),componentRef}getRecipe(){return this.resolver.resolveComponentFactory(default_label_component_DefaultLabelComponent)}}var template_var_directive_a,template_var_directive_b,ReplaySubject=__webpack_require__(197),switchMap=__webpack_require__(179),map=__webpack_require__(49),tap=__webpack_require__(536);function OutsideZone(targetClass,functionName,descriptor){const source=descriptor.value;return descriptor.value=function(...data){if(!this.ngZone)throw new Error("Class with 'OutsideZone' decorator should have 'ngZone' class property with 'NgZone' class.");return this.ngZone.runOutsideAngular(()=>source.call(this,...data))},descriptor}class TemplateVarContext{}let TemplateVarDirective=class TemplateVarDirective{constructor(vcRef,templateRef){this.vcRef=vcRef,this.templateRef=templateRef,this.context=new TemplateVarContext}set templateVar(context){this.context.$implicit=this.context.templateVar=context,this.updateView()}updateView(){this.view?this.view.markForCheck():(this.vcRef.clear(),this.view=this.vcRef.createEmbeddedView(this.templateRef,this.context))}};var diagram_component_a,diagram_component_b,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m;Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object),Object(tslib_es6.b)("design:paramtypes",[Object])],TemplateVarDirective.prototype,"templateVar",null),TemplateVarDirective=Object(tslib_es6.a)([Object(core.Directive)({selector:"[templateVar]"}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(template_var_directive_a=void 0!==core.ViewContainerRef&&core.ViewContainerRef)?template_var_directive_a:Object,"function"==typeof(template_var_directive_b=void 0!==core.TemplateRef&&core.TemplateRef)?template_var_directive_b:Object])],TemplateVarDirective);let diagram_component_RxZuDiagramComponent=class RxZuDiagramComponent{constructor(ngZone,renderer,cdRef,elRef){this.ngZone=ngZone,this.renderer=renderer,this.cdRef=cdRef,this.elRef=elRef,this.allowCanvasZoom=!0,this.allowCanvasTranslation=!0,this.inverseZoom=!0,this.allowLooseLinks=!0,this.maxZoomOut=null,this.maxZoomIn=null,this.portMagneticRadius=30,this.destroyed$=new ReplaySubject.a(1)}get host(){return this.elRef.nativeElement}ngAfterViewInit(){this.diagramModel&&(this.diagramEngine=this.diagramModel.getDiagramEngine(),this.mouseManager=this.diagramEngine.getMouseManager(),this.diagramEngine.setCanvas(this.canvas.nativeElement),this.diagramEngine.setup(Object.assign({},this)),this.diagramEngine.paintNodes(this.nodesLayer).pipe(Object(switchMap.a)(()=>this.diagramEngine.paintLinks(this.linksLayer))).subscribe(()=>{this.initSubs(),this.initSelectionBox(),this.cdRef.detectChanges()}))}ngOnDestroy(){this.destroyed$.next(!0),this.destroyed$.complete()}initSelectionBox(){this.selectionBox$=this.diagramEngine.selectAction().pipe(Object(map.a)(action=>action instanceof src.j&&!Object(src.m)(action.dimensions)?action:null),Object(tap.a)(()=>this.cdRef.detectChanges()))}onMouseUp(event){this.mouseManager.onMouseUp(event)}onMouseMove(event){this.mouseManager.onMouseMove(event)}onMouseDown(event){this.mouseManager.onMouseDown(event)}onMouseWheel(event){this.mouseManager.onMouseWheel(event)}setLayerStyles(x,y,zoom){const nodesLayer=this.getNodesLayer(),linksLayer=this.getLinksLayer(),value=`translate(${x}px, ${y}px) scale(${zoom/100})`;this.renderer.setStyle(nodesLayer,"transform",value),this.renderer.setStyle(linksLayer,"transform",value)}initSubs(){Object(combineLatest.b)([this.diagramModel.selectOffsetX(),this.diagramModel.selectOffsetY(),this.diagramModel.selectZoomLevel()]).pipe(Object(tap.a)(([x,y,zoom])=>this.setLayerStyles(x,y,zoom)),Object(takeUntil.a)(this.destroyed$)).subscribe()}getNodesLayer(){return this.host.querySelector(".ngdx-nodes-layer")}getLinksLayer(){return this.host.querySelector(".ngdx-links-layer")}};Object(tslib_es6.a)([Object(core.Input)("model"),Object(tslib_es6.b)("design:type","function"==typeof(diagram_component_a=void 0!==src.h&&src.h)?diagram_component_a:Object)],diagram_component_RxZuDiagramComponent.prototype,"diagramModel",void 0),Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object)],diagram_component_RxZuDiagramComponent.prototype,"allowCanvasZoom",void 0),Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object)],diagram_component_RxZuDiagramComponent.prototype,"allowCanvasTranslation",void 0),Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object)],diagram_component_RxZuDiagramComponent.prototype,"inverseZoom",void 0),Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object)],diagram_component_RxZuDiagramComponent.prototype,"allowLooseLinks",void 0),Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Number)],diagram_component_RxZuDiagramComponent.prototype,"maxZoomOut",void 0),Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Number)],diagram_component_RxZuDiagramComponent.prototype,"maxZoomIn",void 0),Object(tslib_es6.a)([Object(core.Input)(),Object(tslib_es6.b)("design:type",Object)],diagram_component_RxZuDiagramComponent.prototype,"portMagneticRadius",void 0),Object(tslib_es6.a)([Object(core.ViewChild)("nodesLayer",{read:core.ViewContainerRef}),Object(tslib_es6.b)("design:type","function"==typeof(diagram_component_b=void 0!==core.ViewContainerRef&&core.ViewContainerRef)?diagram_component_b:Object)],diagram_component_RxZuDiagramComponent.prototype,"nodesLayer",void 0),Object(tslib_es6.a)([Object(core.ViewChild)("linksLayer",{read:core.ViewContainerRef}),Object(tslib_es6.b)("design:type","function"==typeof(_c=void 0!==core.ViewContainerRef&&core.ViewContainerRef)?_c:Object)],diagram_component_RxZuDiagramComponent.prototype,"linksLayer",void 0),Object(tslib_es6.a)([Object(core.ViewChild)("canvas",{read:core.ElementRef}),Object(tslib_es6.b)("design:type","function"==typeof(_d=void 0!==core.ElementRef&&core.ElementRef)?_d:Object)],diagram_component_RxZuDiagramComponent.prototype,"canvas",void 0),Object(tslib_es6.a)([OutsideZone,Object(tslib_es6.b)("design:type",Function),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_e="undefined"!=typeof MouseEvent&&MouseEvent)?_e:Object]),Object(tslib_es6.b)("design:returntype",void 0)],diagram_component_RxZuDiagramComponent.prototype,"onMouseUp",null),Object(tslib_es6.a)([OutsideZone,Object(tslib_es6.b)("design:type",Function),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_f="undefined"!=typeof MouseEvent&&MouseEvent)?_f:Object]),Object(tslib_es6.b)("design:returntype",void 0)],diagram_component_RxZuDiagramComponent.prototype,"onMouseMove",null),Object(tslib_es6.a)([OutsideZone,Object(tslib_es6.b)("design:type",Function),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_g="undefined"!=typeof MouseEvent&&MouseEvent)?_g:Object]),Object(tslib_es6.b)("design:returntype",void 0)],diagram_component_RxZuDiagramComponent.prototype,"onMouseDown",null),Object(tslib_es6.a)([OutsideZone,Object(tslib_es6.b)("design:type",Function),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_h="undefined"!=typeof WheelEvent&&WheelEvent)?_h:Object]),Object(tslib_es6.b)("design:returntype",void 0)],diagram_component_RxZuDiagramComponent.prototype,"onMouseWheel",null),Object(tslib_es6.a)([OutsideZone,Object(tslib_es6.b)("design:type",Function),Object(tslib_es6.b)("design:paramtypes",[Number,Number,Number]),Object(tslib_es6.b)("design:returntype",void 0)],diagram_component_RxZuDiagramComponent.prototype,"setLayerStyles",null),diagram_component_RxZuDiagramComponent=Object(tslib_es6.a)([Object(core.Component)({selector:"ngdx-diagram",template:(__webpack_require__(303).default||__webpack_require__(303)).length?__webpack_require__(303).default||__webpack_require__(303):"",styles:[(__webpack_require__(304).default||__webpack_require__(304)).length?__webpack_require__(304).default||__webpack_require__(304):""],changeDetection:core.ChangeDetectionStrategy.OnPush}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(_j=void 0!==core.NgZone&&core.NgZone)?_j:Object,"function"==typeof(_k=void 0!==core.Renderer2&&core.Renderer2)?_k:Object,"function"==typeof(_l=void 0!==core.ChangeDetectorRef&&core.ChangeDetectorRef)?_l:Object,"function"==typeof(_m=void 0!==core.ElementRef&&core.ElementRef)?_m:Object])],diagram_component_RxZuDiagramComponent);let RxZuDiagramsModule=class RxZuDiagramsModule{};var engine_service_a,engine_service_b;RxZuDiagramsModule=Object(tslib_es6.a)([Object(core.NgModule)({declarations:[diagram_component_RxZuDiagramComponent,TemplateVarDirective],imports:[common.a],exports:[diagram_component_RxZuDiagramComponent]})],RxZuDiagramsModule);let engine_service_DiagramEngine=class DiagramEngine extends src.g{constructor(resolver,rendererFactory){super(),this.resolver=resolver,this.rendererFactory=rendererFactory,this._renderer=this.rendererFactory.createRenderer(null,null)}registerDefaultFactories(){const factoriesManager=this.getFactoriesManager();factoriesManager.registerFactory({type:"nodeFactories",factory:new default_node_factory_DefaultNodeFactory(this.resolver,this._renderer)}),factoriesManager.registerFactory({type:"linkFactories",factory:new default_link_factory_DefaultLinkFactory(this.resolver,this._renderer)}),factoriesManager.registerFactory({type:"portFactories",factory:new default_port_factory_DefaultPortFactory(this.resolver,this._renderer)}),factoriesManager.registerFactory({type:"labelFactories",factory:new default_label_factory_DefaultLabelFactory(this.resolver,this._renderer)})}};engine_service_DiagramEngine=Object(tslib_es6.a)([Object(core.Injectable)({providedIn:RxZuDiagramsModule}),Object(tslib_es6.b)("design:paramtypes",["function"==typeof(engine_service_a=void 0!==core.ComponentFactoryResolver&&core.ComponentFactoryResolver)?engine_service_a:Object,"function"==typeof(engine_service_b=void 0!==core.RendererFactory2&&core.RendererFactory2)?engine_service_b:Object])],engine_service_DiagramEngine)},531:function(module,exports){function webpackEmptyAsyncContext(req){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}))}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,module.exports=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=531},62:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=".demo-diagram {\n  display: flex;\n  height: 100%;\n  min-height: 100vh;\n  background-color: #3c3c3c;\n  background-image: linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent);\n  background-size: 50px 50px;\n}\n\n.action-bar {\n  position: relative;\n  width: 100%;\n  height: 40px;\n  z-index: 2000;\n  background-color: white;\n  display: flex;\n  align-items: center;\n}\n\n.action-bar * {\n  margin: 0 10px;\n}"},632:function(module){module.exports=JSON.parse('{"pipes":[],"interfaces":[{"name":"ZonedClass","id":"interface-ZonedClass-95a8ba087560debc8f9321814c92650b","file":"packages/angular/src/lib/utils/decorators.ts","type":"interface","sourceCode":"import { NgZone } from \'@angular/core\';\\n\\nexport interface ZonedClass {\\n  ngZone: NgZone;\\n}\\n\\nexport function OutsideZone<T extends ZonedClass>(targetClass: T, functionName: string, descriptor) {\\n  const source = descriptor.value;\\n  descriptor.value = function (...data) {\\n    if (!this.ngZone) {\\n      throw new Error(\\"Class with \'OutsideZone\' decorator should have \'ngZone\' class property with \'NgZone\' class.\\");\\n    }\\n    return this.ngZone.runOutsideAngular(() => source.call(this, ...data));\\n  };\\n  return descriptor;\\n}\\n","properties":[{"name":"ngZone","type":"NgZone","optional":false,"description":"","line":4}],"indexSignatures":[],"kind":150,"methods":[]}],"injectables":[{"name":"DiagramEngine","id":"injectable-DiagramEngine-bc22c04c81a991546c8c643c9805e228","file":"packages/angular/src/lib/engine.service.ts","properties":[{"name":"_renderer","type":"Renderer2","optional":false,"description":"","line":18,"modifierKind":[113]}],"methods":[{"name":"registerDefaultFactories","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":28}],"description":"","sourceCode":"import {\\n  ComponentFactoryResolver,\\n  Injectable,\\n  Renderer2,\\n  RendererFactory2,\\n} from \'@angular/core\';\\nimport { DiagramEngineCore } from \'@rxzu/core\';\\nimport {\\n  DefaultLabelFactory,\\n  DefaultLinkFactory,\\n  DefaultNodeFactory,\\n  DefaultPortFactory,\\n} from \'./defaults\';\\nimport { RxZuDiagramsModule } from \'./main.module\';\\n\\n@Injectable({ providedIn: RxZuDiagramsModule })\\nexport class DiagramEngine extends DiagramEngineCore {\\n  protected _renderer: Renderer2;\\n\\n  constructor(\\n    protected resolver: ComponentFactoryResolver,\\n    protected rendererFactory: RendererFactory2\\n  ) {\\n    super();\\n    this._renderer = this.rendererFactory.createRenderer(null, null);\\n  }\\n\\n  registerDefaultFactories() {\\n    const factoriesManager = this.getFactoriesManager();\\n    factoriesManager.registerFactory({\\n      type: \'nodeFactories\',\\n      factory: new DefaultNodeFactory(this.resolver, this._renderer),\\n    });\\n\\n    factoriesManager.registerFactory({\\n      type: \'linkFactories\',\\n      factory: new DefaultLinkFactory(this.resolver, this._renderer),\\n    });\\n\\n    factoriesManager.registerFactory({\\n      type: \'portFactories\',\\n      factory: new DefaultPortFactory(this.resolver, this._renderer),\\n    });\\n\\n    factoriesManager.registerFactory({\\n      type: \'labelFactories\',\\n      factory: new DefaultLabelFactory(this.resolver, this._renderer),\\n    });\\n  }\\n}\\n","constructorObj":{"name":"constructor","description":"","args":[{"name":"resolver","type":"ComponentFactoryResolver"},{"name":"rendererFactory","type":"RendererFactory2"}],"line":18,"jsdoctags":[{"name":"resolver","type":"ComponentFactoryResolver","tagName":{"text":"param"}},{"name":"rendererFactory","type":"RendererFactory2","tagName":{"text":"param"}}]},"extends":"DiagramEngineCore","type":"injectable"}],"classes":[{"name":"AbstractAngularFactory","id":"class-AbstractAngularFactory-596b32474941a6f20fdcaa4e4f0ce7f1","file":"packages/angular/src/lib/defaults/factories/angular.factory.ts","type":"class","sourceCode":"import { ComponentRef, ViewContainerRef } from \'@angular/core\';\\nimport { BaseModel, AbstractFactory, DiagramModel } from \'@rxzu/core\';\\n\\nexport abstract class AbstractAngularFactory<\\n  T extends BaseModel = BaseModel,\\n  R = ViewContainerRef,\\n  Y = ComponentRef<T>\\n> extends AbstractFactory<T, R, Y> {\\n  abstract generateWidget({\\n    model,\\n    host,\\n    diagramModel,\\n  }: {\\n    model: T;\\n    host: R;\\n    diagramModel?: DiagramModel;\\n  }): Y;\\n}\\n","properties":[],"methods":[{"name":"generateWidget","args":[{"type":"literal type"}],"optional":false,"returnType":"Y","typeParameters":[],"line":9,"modifierKind":[117],"jsdoctags":[{"type":"literal type","tagName":{"text":"param"}}]}],"indexSignatures":[],"extends":"AbstractFactory","inputsClass":[],"outputsClass":[],"hostBindings":[],"hostListeners":[]},{"name":"DefaultLabelFactory","id":"class-DefaultLabelFactory-ea68f44c1cb3df6ec65a766d2e3cb702","file":"packages/angular/src/lib/defaults/factories/default-label.factory.ts","type":"class","sourceCode":"import {\\n  ViewContainerRef,\\n  ComponentRef,\\n  ComponentFactoryResolver,\\n  ComponentFactory,\\n  Renderer2,\\n} from \'@angular/core\';\\nimport { DefaultLabelModel } from \'@rxzu/core\';\\nimport { DefaultLabelComponent } from \'../components/default-label/default-label.component\';\\nimport { AbstractAngularFactory } from \'./angular.factory\';\\n\\nexport class DefaultLabelFactory extends AbstractAngularFactory<\\n  DefaultLabelComponent\\n> {\\n  constructor(\\n    protected resolver: ComponentFactoryResolver,\\n    protected renderer: Renderer2\\n  ) {\\n    super(\'default\');\\n  }\\n\\n  generateWidget({\\n    model,\\n    host,\\n  }: {\\n    model: DefaultLabelModel;\\n    host: ViewContainerRef;\\n  }): ComponentRef<DefaultLabelComponent> {\\n    const componentRef = host.createComponent(this.getRecipe());\\n\\n    // attach coordinates and default positional behaviour to the generated component host\\n    const rootNode = componentRef.location.nativeElement;\\n\\n    // default style for link\\n    this.renderer.setStyle(rootNode, \'position\', \'absolute\');\\n\\n    // data attributes\\n    this.renderer.setAttribute(rootNode, \'data-labelid\', model.id);\\n\\n    // on destroy make sure to destroy the componentRef\\n    model.onEntityDestroy().subscribe(() => {\\n      componentRef.destroy();\\n    });\\n\\n    // assign all passed properties to node initialization.\\n    Object.entries(model).forEach(([key, value]) => {\\n      componentRef.instance[key] = value;\\n    });\\n\\n    componentRef.instance.ngOnInit();\\n    return componentRef;\\n  }\\n\\n  getRecipe(): ComponentFactory<DefaultLabelComponent> {\\n    return this.resolver.resolveComponentFactory(DefaultLabelComponent);\\n  }\\n}\\n","constructorObj":{"name":"constructor","description":"","args":[{"name":"resolver","type":"ComponentFactoryResolver"},{"name":"renderer","type":"Renderer2"}],"line":14,"jsdoctags":[{"name":"resolver","type":"ComponentFactoryResolver","tagName":{"text":"param"}},{"name":"renderer","type":"Renderer2","tagName":{"text":"param"}}]},"properties":[],"methods":[{"name":"generateWidget","args":[{"type":"literal type"}],"optional":false,"returnType":"ComponentRef<DefaultLabelComponent>","typeParameters":[],"line":22,"jsdoctags":[{"type":"literal type","tagName":{"text":"param"}}]},{"name":"getRecipe","args":[],"optional":false,"returnType":"ComponentFactory<DefaultLabelComponent>","typeParameters":[],"line":54},{"name":"generateWidget","args":[{"type":"literal type"}],"optional":false,"returnType":"Y","typeParameters":[],"line":9,"modifierKind":[117],"jsdoctags":[{"type":"literal type","tagName":{"text":"param"}}],"inheritance":{"file":"AbstractAngularFactory"}}],"indexSignatures":[],"extends":"AbstractAngularFactory","inputsClass":[],"outputsClass":[],"hostBindings":[],"hostListeners":[]},{"name":"DefaultLinkFactory","id":"class-DefaultLinkFactory-0ece4aff0efd8307f8ec318e2a344b08","file":"packages/angular/src/lib/defaults/factories/default-link.factory.ts","type":"class","sourceCode":"import { DefaultLinkComponent } from \'../components/default-link/default-link.component\';\\nimport {\\n  ViewContainerRef,\\n  ComponentRef,\\n  ComponentFactoryResolver,\\n  ComponentFactory,\\n  Renderer2,\\n} from \'@angular/core\';\\nimport { DefaultLinkModel } from \'@rxzu/core\';\\nimport { AbstractAngularFactory } from \'./angular.factory\';\\n\\nexport class DefaultLinkFactory extends AbstractAngularFactory<\\n  DefaultLinkComponent\\n> {\\n  constructor(\\n    protected resolver: ComponentFactoryResolver,\\n    protected renderer: Renderer2\\n  ) {\\n    super(\'default\');\\n  }\\n\\n  generateWidget({\\n    model,\\n    host,\\n  }: {\\n    model: DefaultLinkModel;\\n    host: ViewContainerRef;\\n  }): ComponentRef<DefaultLinkComponent> {\\n    const componentRef = host.createComponent(this.getRecipe());\\n\\n    // attach coordinates and default positional behaviour to the generated component host\\n    const rootNode = componentRef.location.nativeElement;\\n\\n    // default style for link\\n    this.renderer.setStyle(rootNode, \'position\', \'absolute\');\\n    this.renderer.addClass(rootNode, \'label\');\\n\\n    // data attributes\\n    this.renderer.setAttribute(rootNode, \'data-linkid\', model.id);\\n\\n    // on destroy make sure to destroy the componentRef\\n    model.onEntityDestroy().subscribe(() => {\\n      componentRef.destroy();\\n    });\\n\\n    // assign all passed properties to link initialization.\\n    Object.entries(model).forEach(([key, value]) => {\\n      componentRef.instance[key] = value;\\n    });\\n\\n    componentRef.instance.ngOnInit();\\n    return componentRef;\\n  }\\n\\n  getRecipe(): ComponentFactory<DefaultLinkComponent> {\\n    return this.resolver.resolveComponentFactory(DefaultLinkComponent);\\n  }\\n}\\n","constructorObj":{"name":"constructor","description":"","args":[{"name":"resolver","type":"ComponentFactoryResolver"},{"name":"renderer","type":"Renderer2"}],"line":14,"jsdoctags":[{"name":"resolver","type":"ComponentFactoryResolver","tagName":{"text":"param"}},{"name":"renderer","type":"Renderer2","tagName":{"text":"param"}}]},"properties":[],"methods":[{"name":"generateWidget","args":[{"type":"literal type"}],"optional":false,"returnType":"ComponentRef<DefaultLinkComponent>","typeParameters":[],"line":22,"jsdoctags":[{"type":"literal type","tagName":{"text":"param"}}]},{"name":"getRecipe","args":[],"optional":false,"returnType":"ComponentFactory<DefaultLinkComponent>","typeParameters":[],"line":55},{"name":"generateWidget","args":[{"type":"literal type"}],"optional":false,"returnType":"Y","typeParameters":[],"line":9,"modifierKind":[117],"jsdoctags":[{"type":"literal type","tagName":{"text":"param"}}],"inheritance":{"file":"AbstractAngularFactory"}}],"indexSignatures":[],"extends":"AbstractAngularFactory","inputsClass":[],"outputsClass":[],"hostBindings":[],"hostListeners":[]},{"name":"DefaultNodeFactory","id":"class-DefaultNodeFactory-031ec5053ccc1221b00e567aeed6abd7","file":"packages/angular/src/lib/defaults/factories/default-node.factory.ts","type":"class","sourceCode":"import { DefaultNodeComponent } from \'../components/default-node/default-node.component\';\\nimport {\\n  ComponentFactoryResolver,\\n  ViewContainerRef,\\n  ComponentRef,\\n  ComponentFactory,\\n  Renderer2,\\n} from \'@angular/core\';\\nimport { DefaultNodeModel, DiagramModel } from \'@rxzu/core\';\\nimport { AbstractAngularFactory } from \'./angular.factory\';\\n\\nexport class DefaultNodeFactory extends AbstractAngularFactory<\\n  DefaultNodeComponent\\n> {\\n  constructor(\\n    protected resolver: ComponentFactoryResolver,\\n    protected renderer: Renderer2\\n  ) {\\n    super(\'default\');\\n  }\\n\\n  generateWidget({\\n    model,\\n    host,\\n    diagramModel,\\n  }: {\\n    model: DefaultNodeModel;\\n    host: ViewContainerRef;\\n    diagramModel?: DiagramModel;\\n  }): ComponentRef<DefaultNodeComponent> {\\n    const componentRef = host.createComponent(this.getRecipe(), host.length);\\n\\n    // attach coordinates and default positional behaviour to the generated component host\\n    const rootNode = componentRef.location.nativeElement;\\n\\n    // default style for node\\n    this.renderer.setStyle(rootNode, \'position\', \'absolute\');\\n    this.renderer.setStyle(rootNode, \'display\', \'block\');\\n\\n    // data attributes\\n    this.renderer.setAttribute(rootNode, \'data-nodeid\', model.id);\\n\\n    // subscribe to node coordinates\\n    model.selectCoords().subscribe(({ x, y }) => {\\n      this.renderer.setStyle(rootNode, \'left\', `${x}px`);\\n      this.renderer.setStyle(rootNode, \'top\', `${y}px`);\\n    });\\n\\n    model.selectionChanges().subscribe((e) => {\\n      e.isSelected\\n        ? this.renderer.addClass(rootNode, \'selected\')\\n        : this.renderer.removeClass(rootNode, \'selected\');\\n    });\\n\\n    model.onEntityDestroy().subscribe(() => {\\n      componentRef.destroy();\\n    });\\n\\n    // assign all passed properties to node initialization.\\n    Object.entries(model).forEach(([key, value]) => {\\n      componentRef.instance[key] = value;\\n    });\\n\\n    componentRef.instance.setParent(diagramModel);\\n    componentRef.instance.ngOnInit();\\n    return componentRef;\\n  }\\n\\n  getRecipe(): ComponentFactory<DefaultNodeComponent> {\\n    return this.resolver.resolveComponentFactory(DefaultNodeComponent);\\n  }\\n}\\n","constructorObj":{"name":"constructor","description":"","args":[{"name":"resolver","type":"ComponentFactoryResolver"},{"name":"renderer","type":"Renderer2"}],"line":14,"jsdoctags":[{"name":"resolver","type":"ComponentFactoryResolver","tagName":{"text":"param"}},{"name":"renderer","type":"Renderer2","tagName":{"text":"param"}}]},"properties":[],"methods":[{"name":"generateWidget","args":[{"type":"literal type"}],"optional":false,"returnType":"ComponentRef<DefaultNodeComponent>","typeParameters":[],"line":22,"jsdoctags":[{"type":"literal type","tagName":{"text":"param"}}]},{"name":"getRecipe","args":[],"optional":false,"returnType":"ComponentFactory<DefaultNodeComponent>","typeParameters":[],"line":69},{"name":"generateWidget","args":[{"type":"literal type"}],"optional":false,"returnType":"Y","typeParameters":[],"line":9,"modifierKind":[117],"jsdoctags":[{"type":"literal type","tagName":{"text":"param"}}],"inheritance":{"file":"AbstractAngularFactory"}}],"indexSignatures":[],"extends":"AbstractAngularFactory","inputsClass":[],"outputsClass":[],"hostBindings":[],"hostListeners":[]},{"name":"DefaultPortFactory","id":"class-DefaultPortFactory-2aff8beb32b49ce32eeb58a594bf8c9a","file":"packages/angular/src/lib/defaults/factories/default-port.factory.ts","type":"class","sourceCode":"import {\\n  ViewContainerRef,\\n  ComponentRef,\\n  ComponentFactory,\\n  ComponentFactoryResolver,\\n  Renderer2,\\n} from \'@angular/core\';\\nimport { DefaultPortModel } from \'@rxzu/core\';\\nimport { DefaultPortComponent } from \'../components/default-port/default-port.component\';\\nimport { AbstractAngularFactory } from \'./angular.factory\';\\n\\nexport class DefaultPortFactory extends AbstractAngularFactory<\\n  DefaultPortComponent\\n> {\\n  constructor(\\n    protected resolver: ComponentFactoryResolver,\\n    protected renderer: Renderer2\\n  ) {\\n    super(\'default\');\\n  }\\n\\n  generateWidget({\\n    model,\\n    host: nodeHost,\\n  }: {\\n    model: DefaultPortModel;\\n    host: ViewContainerRef;\\n  }): ComponentRef<DefaultPortComponent> {\\n    const componentRef = nodeHost.createComponent(this.getRecipe());\\n\\n    // attach coordinates and default positional behaviour to the generated component host\\n    const rootNode = componentRef.location.nativeElement as HTMLElement;\\n\\n    // data attributes\\n    this.renderer.setAttribute(rootNode, \'data-portid\', model.id);\\n    this.renderer.setAttribute(rootNode, \'data-name\', model.getName());\\n\\n    model.in\\n      ? this.renderer.addClass(rootNode, \'in\')\\n      : this.renderer.addClass(rootNode, \'out\');\\n\\n    // assign all passed properties to node initialization.\\n    Object.entries(model).forEach(([key, value]) => {\\n      componentRef.instance[key] = value;\\n    });\\n\\n    model.onEntityDestroy().subscribe(() => {\\n      componentRef.destroy();\\n    });\\n\\n    componentRef.instance.ngOnInit();\\n    return componentRef;\\n  }\\n\\n  getRecipe(): ComponentFactory<DefaultPortComponent> {\\n    return this.resolver.resolveComponentFactory(DefaultPortComponent);\\n  }\\n}\\n","constructorObj":{"name":"constructor","description":"","args":[{"name":"resolver","type":"ComponentFactoryResolver"},{"name":"renderer","type":"Renderer2"}],"line":14,"jsdoctags":[{"name":"resolver","type":"ComponentFactoryResolver","tagName":{"text":"param"}},{"name":"renderer","type":"Renderer2","tagName":{"text":"param"}}]},"properties":[],"methods":[{"name":"generateWidget","args":[{"type":"literal type"}],"optional":false,"returnType":"ComponentRef<DefaultPortComponent>","typeParameters":[],"line":22,"jsdoctags":[{"type":"literal type","tagName":{"text":"param"}}]},{"name":"getRecipe","args":[],"optional":false,"returnType":"ComponentFactory<DefaultPortComponent>","typeParameters":[],"line":55},{"name":"generateWidget","args":[{"type":"literal type"}],"optional":false,"returnType":"Y","typeParameters":[],"line":9,"modifierKind":[117],"jsdoctags":[{"type":"literal type","tagName":{"text":"param"}}],"inheritance":{"file":"AbstractAngularFactory"}}],"indexSignatures":[],"extends":"AbstractAngularFactory","inputsClass":[],"outputsClass":[],"hostBindings":[],"hostListeners":[]},{"name":"TemplateVarContext","id":"class-TemplateVarContext-adff97d20031c06a8d3472e4695578f7","file":"packages/angular/src/lib/utils/template-var.directive.ts","type":"class","sourceCode":"import { Directive, EmbeddedViewRef, Input, TemplateRef, ViewContainerRef } from \'@angular/core\';\\n\\nclass TemplateVarContext {\\n  $implicit: any;\\n  templateVar: any;\\n}\\n\\n@Directive({\\n  selector: \'[templateVar]\'\\n})\\nexport class TemplateVarDirective {\\n  view: EmbeddedViewRef<any>;\\n\\n  protected context = new TemplateVarContext();\\n\\n  @Input()\\n  set templateVar(context: any) {\\n    this.context.$implicit = this.context.templateVar = context;\\n    this.updateView();\\n  }\\n\\n  constructor(protected vcRef: ViewContainerRef, protected templateRef: TemplateRef<any>) {}\\n\\n  updateView() {\\n    if (!this.view) {\\n      this.vcRef.clear();\\n      this.view = this.vcRef.createEmbeddedView(this.templateRef, this.context);\\n    } else {\\n      this.view.markForCheck();\\n    }\\n  }\\n}\\n","properties":[{"name":"$implicit","type":"any","optional":false,"description":"","line":4},{"name":"templateVar","type":"any","optional":false,"description":"","line":5}],"methods":[],"indexSignatures":[],"inputsClass":[],"outputsClass":[],"hostBindings":[],"hostListeners":[]}],"directives":[{"name":"TemplateVarDirective","id":"directive-TemplateVarDirective-adff97d20031c06a8d3472e4695578f7","file":"packages/angular/src/lib/utils/template-var.directive.ts","type":"directive","description":"","sourceCode":"import { Directive, EmbeddedViewRef, Input, TemplateRef, ViewContainerRef } from \'@angular/core\';\\n\\nclass TemplateVarContext {\\n  $implicit: any;\\n  templateVar: any;\\n}\\n\\n@Directive({\\n  selector: \'[templateVar]\'\\n})\\nexport class TemplateVarDirective {\\n  view: EmbeddedViewRef<any>;\\n\\n  protected context = new TemplateVarContext();\\n\\n  @Input()\\n  set templateVar(context: any) {\\n    this.context.$implicit = this.context.templateVar = context;\\n    this.updateView();\\n  }\\n\\n  constructor(protected vcRef: ViewContainerRef, protected templateRef: TemplateRef<any>) {}\\n\\n  updateView() {\\n    if (!this.view) {\\n      this.vcRef.clear();\\n      this.view = this.vcRef.createEmbeddedView(this.templateRef, this.context);\\n    } else {\\n      this.view.markForCheck();\\n    }\\n  }\\n}\\n","selector":"[templateVar]","providers":[],"inputsClass":[{"name":"templateVar","line":17,"type":"any"}],"outputsClass":[],"hostBindings":[],"hostListeners":[],"propertiesClass":[{"name":"context","defaultValue":"new TemplateVarContext()","type":"","optional":false,"description":"","line":14,"modifierKind":[113]},{"name":"view","type":"EmbeddedViewRef<any>","optional":false,"description":"","line":12}],"methodsClass":[{"name":"updateView","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":24}],"constructorObj":{"name":"constructor","description":"","args":[{"name":"vcRef","type":"ViewContainerRef"},{"name":"templateRef","type":"TemplateRef<any>"}],"line":20,"jsdoctags":[{"name":"vcRef","type":"ViewContainerRef","tagName":{"text":"param"}},{"name":"templateRef","type":"TemplateRef<any>","tagName":{"text":"param"}}]},"accessors":{"templateVar":{"name":"templateVar","setSignature":{"name":"templateVar","type":"void","args":[{"name":"context","type":"any"}],"returnType":"void","line":17,"jsdoctags":[{"name":"context","type":"any","tagName":{"text":"param"}}]}}}}],"components":[{"name":"DefaultLabelComponent","id":"component-DefaultLabelComponent-312e6ec5958d7d7f2ef3a74c6e2ec264","file":"packages/angular/src/lib/defaults/components/default-label/default-label.component.ts","changeDetection":"ChangeDetectionStrategy.OnPush","encapsulation":[],"entryComponents":[],"inputs":[],"outputs":[],"providers":[],"selector":"ngdx-default-label","styleUrls":["./default-label.component.scss"],"styles":[],"templateUrl":["./default-label.component.html"],"viewProviders":[],"inputsClass":[],"outputsClass":[],"propertiesClass":[],"methodsClass":[{"name":"ngOnInit","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":16}],"hostBindings":[],"hostListeners":[],"description":"","rawdescription":"","type":"component","sourceCode":"import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from \'@angular/core\';\\nimport { DefaultLabelModel } from \'@rxzu/core\';\\nimport { takeUntil } from \'rxjs/operators\';\\n\\n@Component({\\n  selector: \'ngdx-default-label\',\\n  templateUrl: \'./default-label.component.html\',\\n  styleUrls: [\'./default-label.component.scss\'],\\n  changeDetection: ChangeDetectionStrategy.OnPush\\n})\\nexport class DefaultLabelComponent extends DefaultLabelModel implements OnInit {\\n  constructor(private cdRef: ChangeDetectorRef) {\\n    super(\'ngdx-default-label\');\\n  }\\n\\n  ngOnInit() {\\n    this.selectCoords()\\n      .pipe(takeUntil(this.destroyed$))\\n      .subscribe(() => {\\n        this.cdRef.detectChanges();\\n      });\\n\\n    this.setPainted(true);\\n  }\\n}\\n","assetsDirs":[],"styleUrlsData":[{"data":".default-label {\\n  color: white;\\n  user-select: none;\\n}\\n","styleUrl":"./default-label.component.scss"}],"stylesData":"","constructorObj":{"name":"constructor","description":"","args":[{"name":"cdRef","type":"ChangeDetectorRef"}],"line":11,"jsdoctags":[{"name":"cdRef","type":"ChangeDetectorRef","tagName":{"text":"param"}}]},"extends":"DefaultLabelModel","implements":["OnInit"],"templateData":"<div\\n  class=\\"default-label\\"\\n  [ngStyle]=\\"{\\n    transform:\\n      \'translate(\' +\\n      (selectCoords() | async).x +\\n      \'px, \' +\\n      (selectCoords() | async).y +\\n      \'px)\' +\\n      \'rotate(\' +\\n      (selectRotation() | async) +\\n      \'deg)\'\\n  }\\"\\n>\\n  {{ selectLabel() | async }}\\n</div>\\n"},{"name":"DefaultLinkComponent","id":"component-DefaultLinkComponent-b67f91f44a13d7b6be1d100794133f58","file":"packages/angular/src/lib/defaults/components/default-link/default-link.component.ts","changeDetection":"ChangeDetectionStrategy.OnPush","encapsulation":[],"entryComponents":[],"inputs":[],"outputs":[],"providers":[],"selector":"ngdx-default-link","styleUrls":["./default-link.component.scss"],"styles":[],"templateUrl":["./default-link.component.html"],"viewProviders":[],"inputsClass":[],"outputsClass":[],"propertiesClass":[{"name":"labelLayer","type":"ViewContainerRef","optional":false,"description":"","line":30,"decorators":[{"name":"ViewChild","stringifiedArguments":"\'labelLayer\', {read: ViewContainerRef, static: true}"}]},{"name":"path$","defaultValue":"createValueState<string>(null, this.entityPipe(\'path\'))","type":"","optional":false,"description":"","line":32},{"name":"points$","defaultValue":"createValueState<PointModel[]>([], this.entityPipe(\'points\'))","type":"","optional":false,"description":"","line":33}],"methodsClass":[{"name":"calcCenterOfPath","args":[{"name":"firstPoint","type":"Coords"},{"name":"secondPoint","type":"Coords"}],"optional":false,"returnType":"Coords","typeParameters":[],"line":109,"jsdoctags":[{"name":"firstPoint","type":"Coords","tagName":{"text":"param"}},{"name":"secondPoint","type":"Coords","tagName":{"text":"param"}}]},{"name":"calcLabelIncline","args":[{"name":"firstPoint","type":"Coords"},{"name":"secondPoint","type":"Coords"}],"optional":false,"returnType":"number","typeParameters":[],"line":92,"jsdoctags":[{"name":"firstPoint","type":"Coords","tagName":{"text":"param"}},{"name":"secondPoint","type":"Coords","tagName":{"text":"param"}}]},{"name":"ngAfterViewInit","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":47},{"name":"ngOnInit","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":43},{"name":"selectPath","args":[],"optional":false,"returnType":"Observable<string>","typeParameters":[],"line":116},{"name":"trackByPoints","args":[{"name":"i","type":"number"},{"name":"point","type":"PointModel"}],"optional":false,"returnType":"any","typeParameters":[],"line":39,"jsdoctags":[{"name":"i","type":"number","tagName":{"text":"param"}},{"name":"point","type":"PointModel","tagName":{"text":"param"}}]}],"hostBindings":[],"hostListeners":[],"description":"","rawdescription":"","type":"component","sourceCode":"import {\\n  AfterViewInit,\\n  ChangeDetectionStrategy,\\n  ChangeDetectorRef,\\n  Component,\\n  OnInit,\\n  ViewChild,\\n  ViewContainerRef,\\n} from \'@angular/core\';\\nimport {\\n  createValueState,\\n  PointModel,\\n  generateCurvePath,\\n  Coords,\\n  DefaultLinkModel,\\n} from \'@rxzu/core\';\\nimport { combineLatest, Observable } from \'rxjs\';\\nimport { takeUntil } from \'rxjs/operators\';\\n\\n@Component({\\n  selector: \'ngdx-default-link\',\\n  templateUrl: \'./default-link.component.html\',\\n  styleUrls: [\'./default-link.component.scss\'],\\n  changeDetection: ChangeDetectionStrategy.OnPush,\\n})\\nexport class DefaultLinkComponent\\n  extends DefaultLinkModel\\n  implements AfterViewInit, OnInit {\\n  @ViewChild(\'labelLayer\', { read: ViewContainerRef, static: true })\\n  labelLayer: ViewContainerRef;\\n\\n  path$ = createValueState<string>(null, this.entityPipe(\'path\'));\\n  points$ = createValueState<PointModel[]>([], this.entityPipe(\'points\'));\\n\\n  constructor(private cdRef: ChangeDetectorRef) {\\n    super({ type: \'ngdx-default-link\' });\\n  }\\n\\n  trackByPoints(i: number, point: PointModel) {\\n    return point.id;\\n  }\\n\\n  ngOnInit() {\\n    this.setPainted(true);\\n  }\\n\\n  ngAfterViewInit() {\\n    const firstPCoords$ = this.getFirstPoint().selectCoords();\\n    const lastPCoords$ = this.getLastPoint().selectCoords();\\n\\n    // Observe link coords and update drawing accordingly\\n    combineLatest([firstPCoords$, lastPCoords$])\\n      .pipe(takeUntil(this.onEntityDestroy()))\\n      .subscribe(([firstPCoords, lastPCoords]) => {\\n        const points = [firstPCoords, lastPCoords];\\n\\n        // handle regular links\\n        // draw the smoothing\\n        // if the points are too close, just draw a straight line\\n        const isHorizontal =\\n          Math.abs(firstPCoords.x - lastPCoords.x) >\\n          Math.abs(firstPCoords.y - lastPCoords.y);\\n        const xOrY = isHorizontal ? \'x\' : \'y\';\\n        let isStraight = false;\\n        if (Math.abs(points[0][xOrY] - points[1][xOrY]) < 50) {\\n          isStraight = true;\\n        }\\n\\n        const path = generateCurvePath(\\n          firstPCoords,\\n          lastPCoords,\\n          isStraight ? 0 : this.curvyness\\n        );\\n        this.path$.set(path).emit();\\n\\n        const label = this.getLabel();\\n        // update label position\\n        if (label) {\\n          label.setCoords(this.calcCenterOfPath(firstPCoords, lastPCoords));\\n\\n          // TODO: check whether we want the label to rotate along with the line\\n          // label.setRotation(this.calcLabelIncline(firstPCoords, lastPCoords));\\n        }\\n        // TODO: handle the multiple lines in between the points\\n\\n        this.cdRef.detectChanges();\\n      });\\n\\n    this.setPainted(true);\\n  }\\n\\n  calcLabelIncline(firstPoint: Coords, secondPoint: Coords): number {\\n    const dy = secondPoint.y - firstPoint.y;\\n    const dx = secondPoint.x - firstPoint.x;\\n\\n    if (dx === 0) {\\n      return 0;\\n    }\\n\\n    let inclineAngel = (Math.atan(dy / dx) * 180) / Math.PI;\\n\\n    if (inclineAngel < 0) {\\n      inclineAngel += 180;\\n    }\\n\\n    return inclineAngel;\\n  }\\n\\n  calcCenterOfPath(firstPoint: Coords, secondPoint: Coords): Coords {\\n    return {\\n      x: (firstPoint.x + secondPoint.x) / 2 + 20,\\n      y: (firstPoint.y + secondPoint.y) / 2 + 20,\\n    };\\n  }\\n\\n  selectPath(): Observable<string> {\\n    return this.path$.value$;\\n  }\\n}\\n","assetsDirs":[],"styleUrlsData":[{"data":".link-container {\\n  position: relative;\\n  fill: none;\\n  overflow: visible;\\n  pointer-events: all;\\n}\\n\\n.default-link {\\n  fill: none;\\n  overflow: visible;\\n\\n  @keyframes dash {\\n    from {\\n      stroke-dashoffset: 24;\\n    }\\n    to {\\n      stroke-dashoffset: 0;\\n    }\\n  }\\n\\n  &.hovered {\\n    stroke: rgb(0, 192, 255);\\n    stroke-dasharray: 10, 2;\\n    animation: dash 1s linear infinite;\\n  }\\n}\\n\\n.default-point {\\n  color: lightgray;\\n  overflow: visible;\\n  pointer-events: all;\\n\\n  &.hovered {\\n    color: rgb(0, 192, 255);\\n  }\\n}\\n","styleUrl":"./default-link.component.scss"}],"stylesData":"","constructorObj":{"name":"constructor","description":"","args":[{"name":"cdRef","type":"ChangeDetectorRef"}],"line":33,"jsdoctags":[{"name":"cdRef","type":"ChangeDetectorRef","tagName":{"text":"param"}}]},"extends":"DefaultLinkModel","implements":["AfterViewInit","OnInit"],"templateData":"\x3c!-- Label Host --\x3e\\n<ng-template #labelLayer></ng-template>\\n\\n<svg class=\\"link-container\\">\\n  \x3c!-- Link --\x3e\\n  <g [id]=\\"id\\">\\n    <path\\n      [attr.stroke-width]=\\"width\\"\\n      [attr.stroke]=\\"selectColor() | async\\"\\n      [attr.d]=\\"selectPath() | async\\"\\n      class=\\"default-link\\"\\n      (mouseleave)=\\"setHovered(false)\\"\\n      (mouseenter)=\\"setHovered()\\"\\n      [ngClass]=\\"{ hovered: selectHovered() | async }\\"\\n    ></path>\\n    <path\\n      class=\\"default-link\\"\\n      (mouseleave)=\\"setHovered(false)\\"\\n      (mouseenter)=\\"setHovered()\\"\\n      [attr.stroke-width]=\\"20\\"\\n      [attr.stroke]=\\"selectColor() | async\\"\\n      [attr.stroke-linecap]=\\"\'round\'\\"\\n      [attr.data-linkid]=\\"id\\"\\n      [attr.stroke-opacity]=\\"(selectHovered() | async) ? \'0.1\' : \'0\'\\"\\n      [attr.d]=\\"selectPath() | async\\"\\n    ></path>\\n  </g>\\n\\n  \x3c!-- Points --\x3e\\n  <g *ngFor=\\"let point of getPoints(); trackBy: trackByPoints\\" [id]=\\"point.id\\">\\n    <circle\\n      fill=\\"currentColor\\"\\n      [attr.cx]=\\"point.selectX() | async\\"\\n      [attr.cy]=\\"point.selectY() | async\\"\\n      r=\\"5\\"\\n      class=\\"default-point\\"\\n      [ngClass]=\\"{ hovered: point.selectHovered() | async }\\"\\n    />\\n    <circle\\n      [attr.data-pointid]=\\"point.id\\"\\n      [attr.data-linkid]=\\"id\\"\\n      (mouseleave)=\\"point.setHovered(false); setHovered(false)\\"\\n      (mouseenter)=\\"point.setHovered(); setHovered()\\"\\n      [attr.cx]=\\"point.selectX() | async\\"\\n      [attr.cy]=\\"point.selectY() | async\\"\\n      r=\\"15\\"\\n      [attr.opacity]=\\"0\\"\\n      [ngClass]=\\"{ selected: point.selectSelected() | async }\\"\\n    />\\n  </g>\\n</svg>\\n"},{"name":"DefaultNodeComponent","id":"component-DefaultNodeComponent-a98eccc643d39526f64dae1634950f2f","file":"packages/angular/src/lib/defaults/components/default-node/default-node.component.ts","changeDetection":"ChangeDetectionStrategy.OnPush","encapsulation":[],"entryComponents":[],"inputs":[],"outputs":[],"providers":[],"selector":"ngdx-default-node","styleUrls":["./default-node.component.scss"],"styles":[],"templateUrl":["./default-node.component.html"],"viewProviders":[],"inputsClass":[],"outputsClass":[],"propertiesClass":[{"name":"portsLayer","type":"ViewContainerRef","optional":false,"description":"","line":12,"decorators":[{"name":"ViewChild","stringifiedArguments":"\'portsLayer\', {read: ViewContainerRef, static: true}"}]}],"methodsClass":[{"name":"ngOnInit","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":18}],"hostBindings":[],"hostListeners":[],"description":"","rawdescription":"","type":"component","sourceCode":"import { ChangeDetectionStrategy, Component, OnInit, ViewChild, ViewContainerRef } from \'@angular/core\';\\nimport { DefaultNodeModel } from \'@rxzu/core\';\\n\\n@Component({\\n  selector: \'ngdx-default-node\',\\n  templateUrl: \'./default-node.component.html\',\\n  styleUrls: [\'./default-node.component.scss\'],\\n  changeDetection: ChangeDetectionStrategy.OnPush\\n})\\nexport class DefaultNodeComponent extends DefaultNodeModel implements OnInit {\\n  @ViewChild(\'portsLayer\', { read: ViewContainerRef, static: true })\\n  portsLayer: ViewContainerRef;\\n\\n  constructor() {\\n    super({ type: \'ngdx-default-node\' });\\n  }\\n\\n  ngOnInit() {\\n    this.selectPorts().subscribe((ports) => {\\n      const factoriesManager = this.getParent().getDiagramEngine().getFactoriesManager();\\n      for (const port of ports) {\\n        if (!port.getPainted().isPainted) {\\n          factoriesManager\\n            .getFactory({ factoryType: \'portFactories\', modelType: port.getType() })\\n            .generateWidget({ model: port, host: this.portsLayer });\\n        }\\n      }\\n      this.setPainted(true);\\n    });\\n  }\\n}\\n","assetsDirs":[],"styleUrlsData":[{"data":":host {\\n  &.selected {\\n    .default-node {\\n      background-color: white !important;\\n      border-color: blue;\\n    }\\n  }\\n\\n  .default-node {\\n    pointer-events: all;\\n    width: 100%;\\n    border-radius: 10px;\\n    transition: all 0.3s ease-in-out;\\n\\n    cursor: auto;\\n    .title {\\n      padding: 10px;\\n      text-align: center;\\n      border-bottom: 1px solid blue;\\n    }\\n  }\\n\\n  .ports {\\n    flex-grow: 1;\\n    display: flex;\\n    flex-direction: column;\\n  }\\n}\\n","styleUrl":"./default-node.component.scss"}],"stylesData":"","constructorObj":{"name":"constructor","description":"","args":[],"line":12},"extends":"DefaultNodeModel","implements":["OnInit"],"templateData":"<div\\n  class=\\"default-node\\"\\n  [ngStyle]=\\"{\\n    \'height.px\': height$ | async,\\n    \'width.px\': width$ | async,\\n    \'background-color\': color\\n  }\\"\\n>\\n  <div class=\\"ports\\">\\n    <ng-template #portsLayer></ng-template>\\n  </div>\\n</div>\\n"},{"name":"DefaultPortComponent","id":"component-DefaultPortComponent-072a2630ad49cfccac87ee1dd52ade32","file":"packages/angular/src/lib/defaults/components/default-port/default-port.component.ts","changeDetection":"ChangeDetectionStrategy.OnPush","encapsulation":[],"entryComponents":[],"inputs":[],"outputs":[],"providers":[],"selector":"ngdx-default-port","styleUrls":["./default-port.component.scss"],"styles":[],"templateUrl":["./default-port.component.html"],"viewProviders":[],"inputsClass":[],"outputsClass":[],"propertiesClass":[],"methodsClass":[{"name":"ngOnInit","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":15}],"hostBindings":[],"hostListeners":[],"description":"","rawdescription":"","type":"component","sourceCode":"import { ChangeDetectionStrategy, Component, OnInit } from \'@angular/core\';\\nimport { DefaultPortModel } from \'@rxzu/core\';\\n\\n@Component({\\n  selector: \'ngdx-default-port\',\\n  templateUrl: \'./default-port.component.html\',\\n  styleUrls: [\'./default-port.component.scss\'],\\n  changeDetection: ChangeDetectionStrategy.OnPush\\n})\\nexport class DefaultPortComponent extends DefaultPortModel implements OnInit {\\n  constructor() {\\n    super({ type: \'ngdx-default-port\' });\\n  }\\n\\n  ngOnInit() {\\n    this.setPainted(true);\\n  }\\n}\\n","assetsDirs":[],"styleUrlsData":[{"data":":host {\\n  position: relative;\\n  width: 10px;\\n  height: 10px;\\n  border-radius: 60px;\\n  border: 1px solid gray;\\n  background-color: lightgray;\\n  margin: 10px 0;\\n\\n  &:hover {\\n    background-color: green;\\n  }\\n\\n  &.out {\\n    right: -195px;\\n  }\\n\\n  &.in {\\n    left: -5px;\\n  }\\n}\\n","styleUrl":"./default-port.component.scss"}],"stylesData":"","constructorObj":{"name":"constructor","description":"","args":[],"line":10},"extends":"DefaultPortModel","implements":["OnInit"],"templateData":"<div [ngClass]=\\"in ? \'in\' : \'out\'\\" draggable=\\"false\\"></div>\\n"},{"name":"RxZuDiagramComponent","id":"component-RxZuDiagramComponent-f3f6c015155c0336868bcfd6561842c4","file":"packages/angular/src/lib/diagram/diagram.component.ts","changeDetection":"ChangeDetectionStrategy.OnPush","encapsulation":[],"entryComponents":[],"inputs":[],"outputs":[],"providers":[],"selector":"ngdx-diagram","styleUrls":["diagram.component.scss"],"styles":[],"templateUrl":["diagram.component.html"],"viewProviders":[],"inputsClass":[{"name":"allowCanvasTranslation","defaultValue":"true","line":35},{"name":"allowCanvasZoom","defaultValue":"true","line":34},{"name":"allowLooseLinks","defaultValue":"true","line":37},{"name":"inverseZoom","defaultValue":"true","line":36},{"name":"maxZoomIn","defaultValue":"null","line":39,"type":"number"},{"name":"maxZoomOut","defaultValue":"null","line":38,"type":"number"},{"name":"model","line":33,"type":"DiagramModel"},{"name":"portMagneticRadius","defaultValue":"30","line":40}],"outputsClass":[],"propertiesClass":[{"name":"canvas","type":"ElementRef","optional":false,"description":"","line":49,"decorators":[{"name":"ViewChild","stringifiedArguments":"\'canvas\', {read: ElementRef}"}]},{"name":"destroyed$","defaultValue":"new ReplaySubject<boolean>(1)","type":"","optional":false,"description":"","line":53,"modifierKind":[113]},{"name":"diagramEngine","type":"DiagramEngineCore","optional":false,"description":"","line":51},{"name":"linksLayer","type":"ViewContainerRef","optional":false,"description":"","line":46,"decorators":[{"name":"ViewChild","stringifiedArguments":"\'linksLayer\', {read: ViewContainerRef}"}]},{"name":"mouseManager","type":"MouseManager","optional":false,"description":"","line":52},{"name":"ngZone","type":"NgZone","optional":false,"description":"","line":61,"modifierKind":[114]},{"name":"nodesLayer","type":"ViewContainerRef","optional":false,"description":"","line":43,"decorators":[{"name":"ViewChild","stringifiedArguments":"\'nodesLayer\', {read: ViewContainerRef}"}]},{"name":"selectionBox$","type":"Observable<SelectingAction>","optional":false,"description":"","line":54,"modifierKind":[113]}],"methodsClass":[{"name":"getLinksLayer","args":[],"optional":false,"returnType":"HTMLDivElement","typeParameters":[],"line":158,"modifierKind":[113]},{"name":"getNodesLayer","args":[],"optional":false,"returnType":"HTMLDivElement","typeParameters":[],"line":154,"modifierKind":[113]},{"name":"initSelectionBox","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":97},{"name":"initSubs","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":141,"modifierKind":[113]},{"name":"ngAfterViewInit","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":67},{"name":"ngOnDestroy","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":92},{"name":"onMouseDown","args":[{"name":"event","type":"MouseEvent"}],"optional":false,"returnType":"void","typeParameters":[],"line":120,"decorators":[{"name":"OutsideZone"}],"jsdoctags":[{"name":"event","type":"MouseEvent","tagName":{"text":"param"}}]},{"name":"onMouseMove","args":[{"name":"event","type":"MouseEvent"}],"optional":false,"returnType":"void","typeParameters":[],"line":115,"decorators":[{"name":"OutsideZone"}],"jsdoctags":[{"name":"event","type":"MouseEvent","tagName":{"text":"param"}}]},{"name":"onMouseUp","args":[{"name":"event","type":"MouseEvent"}],"optional":false,"returnType":"void","typeParameters":[],"line":110,"decorators":[{"name":"OutsideZone"}],"jsdoctags":[{"name":"event","type":"MouseEvent","tagName":{"text":"param"}}]},{"name":"onMouseWheel","args":[{"name":"event","type":"WheelEvent"}],"optional":false,"returnType":"void","typeParameters":[],"line":125,"decorators":[{"name":"OutsideZone"}],"jsdoctags":[{"name":"event","type":"WheelEvent","tagName":{"text":"param"}}]},{"name":"setLayerStyles","args":[{"name":"x","type":"number"},{"name":"y","type":"number"},{"name":"zoom","type":"number"}],"optional":false,"returnType":"void","typeParameters":[],"line":130,"decorators":[{"name":"OutsideZone"}],"modifierKind":[113],"jsdoctags":[{"name":"x","type":"number","tagName":{"text":"param"}},{"name":"y","type":"number","tagName":{"text":"param"}},{"name":"zoom","type":"number","tagName":{"text":"param"}}]}],"hostBindings":[],"hostListeners":[],"description":"","rawdescription":"","type":"component","sourceCode":"import {\\n  AfterViewInit,\\n  ChangeDetectionStrategy,\\n  ChangeDetectorRef,\\n  Component,\\n  ElementRef,\\n  Input,\\n  NgZone,\\n  OnDestroy,\\n  Renderer2,\\n  ViewChild,\\n  ViewContainerRef,\\n} from \'@angular/core\';\\nimport { combineLatest, Observable, ReplaySubject } from \'rxjs\';\\nimport { map, switchMap, takeUntil, tap } from \'rxjs/operators\';\\nimport {\\n  DiagramEngineCore,\\n  DiagramModel,\\n  SelectingAction,\\n  MouseManager,\\n  isNil,\\n} from \'@rxzu/core\';\\nimport { ZonedClass, OutsideZone } from \'../utils\';\\n\\n@Component({\\n  selector: \'ngdx-diagram\',\\n  templateUrl: \'diagram.component.html\',\\n  styleUrls: [\'diagram.component.scss\'],\\n  changeDetection: ChangeDetectionStrategy.OnPush,\\n})\\nexport class RxZuDiagramComponent\\n  implements AfterViewInit, OnDestroy, ZonedClass {\\n  @Input(\'model\') diagramModel: DiagramModel;\\n  @Input() allowCanvasZoom = true;\\n  @Input() allowCanvasTranslation = true;\\n  @Input() inverseZoom = true;\\n  @Input() allowLooseLinks = true;\\n  @Input() maxZoomOut: number = null;\\n  @Input() maxZoomIn: number = null;\\n  @Input() portMagneticRadius = 30;\\n\\n  @ViewChild(\'nodesLayer\', { read: ViewContainerRef })\\n  nodesLayer: ViewContainerRef;\\n\\n  @ViewChild(\'linksLayer\', { read: ViewContainerRef })\\n  linksLayer: ViewContainerRef;\\n\\n  @ViewChild(\'canvas\', { read: ElementRef })\\n  canvas: ElementRef;\\n\\n  diagramEngine: DiagramEngineCore;\\n  mouseManager: MouseManager;\\n  protected destroyed$ = new ReplaySubject<boolean>(1);\\n  protected selectionBox$: Observable<SelectingAction>;\\n\\n  get host(): HTMLElement {\\n    return this.elRef.nativeElement;\\n  }\\n\\n  constructor(\\n    public ngZone: NgZone,\\n    protected renderer: Renderer2,\\n    protected cdRef: ChangeDetectorRef,\\n    protected elRef: ElementRef<HTMLElement>\\n  ) {}\\n\\n  ngAfterViewInit() {\\n    if (this.diagramModel) {\\n      this.diagramEngine = this.diagramModel.getDiagramEngine();\\n      this.mouseManager = this.diagramEngine.getMouseManager();\\n      this.diagramEngine.setCanvas(this.canvas.nativeElement);\\n\\n      this.diagramEngine.setup({\\n        ...this,\\n      });\\n\\n      (this.diagramEngine.paintNodes(this.nodesLayer) as Observable<boolean>)\\n        .pipe(\\n          switchMap(\\n            () =>\\n              this.diagramEngine.paintLinks(this.linksLayer) as Observable<void>\\n          )\\n        )\\n        .subscribe(() => {\\n          this.initSubs();\\n          this.initSelectionBox();\\n          this.cdRef.detectChanges();\\n        });\\n    }\\n  }\\n\\n  ngOnDestroy() {\\n    this.destroyed$.next(true);\\n    this.destroyed$.complete();\\n  }\\n\\n  initSelectionBox() {\\n    this.selectionBox$ = this.diagramEngine.selectAction().pipe(\\n      map((action) => {\\n        if (action instanceof SelectingAction && !isNil(action.dimensions)) {\\n          return action;\\n        }\\n        return null;\\n      }),\\n      tap(() => this.cdRef.detectChanges())\\n    ) as Observable<SelectingAction>;\\n  }\\n\\n  @OutsideZone\\n  onMouseUp(event: MouseEvent) {\\n    this.mouseManager.onMouseUp(event);\\n  }\\n\\n  @OutsideZone\\n  onMouseMove(event: MouseEvent) {\\n    this.mouseManager.onMouseMove(event);\\n  }\\n\\n  @OutsideZone\\n  onMouseDown(event: MouseEvent) {\\n    this.mouseManager.onMouseDown(event);\\n  }\\n\\n  @OutsideZone\\n  onMouseWheel(event: WheelEvent) {\\n    this.mouseManager.onMouseWheel(event);\\n  }\\n\\n  @OutsideZone\\n  protected setLayerStyles(x: number, y: number, zoom: number): void {\\n    const nodesLayer = this.getNodesLayer();\\n    const linksLayer = this.getLinksLayer();\\n\\n    const style = \'transform\';\\n    const value = `translate(${x}px, ${y}px) scale(${zoom / 100.0})`;\\n\\n    this.renderer.setStyle(nodesLayer, style, value);\\n    this.renderer.setStyle(linksLayer, style, value);\\n  }\\n\\n  protected initSubs() {\\n    combineLatest([\\n      this.diagramModel.selectOffsetX(),\\n      this.diagramModel.selectOffsetY(),\\n      this.diagramModel.selectZoomLevel(),\\n    ])\\n      .pipe(\\n        tap(([x, y, zoom]) => this.setLayerStyles(x, y, zoom)),\\n        takeUntil(this.destroyed$)\\n      )\\n      .subscribe();\\n  }\\n\\n  protected getNodesLayer(): HTMLDivElement {\\n    return this.host.querySelector(\'.ngdx-nodes-layer\');\\n  }\\n\\n  protected getLinksLayer(): HTMLDivElement {\\n    return this.host.querySelector(\'.ngdx-links-layer\');\\n  }\\n}\\n","assetsDirs":[],"styleUrlsData":[{"data":".ngdx-diagram {\\n  position: relative;\\n  flex-grow: 1;\\n  display: flex;\\n  cursor: move;\\n  overflow: hidden;\\n\\n  .selector {\\n    position: absolute;\\n    background-color: rgba(0, 192, 255, 0.2);\\n    border: solid 2px rgb(0, 192, 255);\\n  }\\n\\n  .ngdx-nodes-layer {\\n    position: absolute;\\n    height: 100%;\\n    width: 100%;\\n    transform-origin: 0 0;\\n    overflow: visible !important;\\n    pointer-events: none;\\n    z-index: 150;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n  }\\n\\n  .ngdx-links-layer {\\n    position: absolute;\\n    height: 100%;\\n    width: 100%;\\n    transform-origin: 0 0;\\n    overflow: visible !important;\\n    pointer-events: none;\\n    z-index: 100;\\n    top: 0;\\n    bottom: 0;\\n    left: 0;\\n    right: 0;\\n  }\\n}\\n","styleUrl":"diagram.component.scss"}],"stylesData":"","constructorObj":{"name":"constructor","description":"","args":[{"name":"ngZone","type":"NgZone"},{"name":"renderer","type":"Renderer2"},{"name":"cdRef","type":"ChangeDetectorRef"},{"name":"elRef","type":"ElementRef<HTMLElement>"}],"line":58,"jsdoctags":[{"name":"ngZone","type":"NgZone","tagName":{"text":"param"}},{"name":"renderer","type":"Renderer2","tagName":{"text":"param"}},{"name":"cdRef","type":"ChangeDetectorRef","tagName":{"text":"param"}},{"name":"elRef","type":"ElementRef<HTMLElement>","tagName":{"text":"param"}}]},"implements":["AfterViewInit","OnDestroy","ZonedClass"],"accessors":{"host":{"name":"host","getSignature":{"name":"host","type":"","returnType":"HTMLElement","line":56}}},"templateData":"<div\\n  class=\\"ngdx-diagram\\"\\n  #canvas\\n  (mousedown)=\\"onMouseDown($event)\\"\\n  (wheel)=\\"onMouseWheel($event)\\"\\n>\\n  \x3c!-- Nodes Layer --\x3e\\n  <div class=\\"ngdx-nodes-layer\\">\\n    <ng-template #nodesLayer></ng-template>\\n  </div>\\n\\n  \x3c!-- Links Layer --\x3e\\n  <div class=\\"ngdx-links-layer\\">\\n    <ng-template #linksLayer></ng-template>\\n  </div>\\n\\n  \x3c!-- Selection Box --\x3e\\n  <div\\n    *ngIf=\\"selectionBox$ | async as selectionBox\\"\\n    class=\\"selector\\"\\n    [ngStyle]=\\"{\\n      top: selectionBox.dimensions.top + \'px\',\\n      left: selectionBox.dimensions.left + \'px\',\\n      width: selectionBox.dimensions.width + \'px\',\\n      height: selectionBox.dimensions.height + \'px\'\\n    }\\"\\n  ></div>\\n</div>\\n"}],"modules":[{"name":"DefaultLabelModule","children":[{"type":"providers","elements":[]},{"type":"declarations","elements":[{"name":"DefaultLabelComponent"}]},{"type":"imports","elements":[]},{"type":"exports","elements":[{"name":"DefaultLabelComponent"}]},{"type":"bootstrap","elements":[]},{"type":"classes","elements":[]}]},{"name":"DefaultLinkModule","children":[{"type":"providers","elements":[]},{"type":"declarations","elements":[{"name":"DefaultLinkComponent"}]},{"type":"imports","elements":[]},{"type":"exports","elements":[{"name":"DefaultLinkComponent"}]},{"type":"bootstrap","elements":[]},{"type":"classes","elements":[]}]},{"name":"DefaultNodeModule","children":[{"type":"providers","elements":[]},{"type":"declarations","elements":[{"name":"DefaultNodeComponent"}]},{"type":"imports","elements":[]},{"type":"exports","elements":[{"name":"DefaultNodeComponent"}]},{"type":"bootstrap","elements":[]},{"type":"classes","elements":[]}]},{"name":"DefaultPortModule","children":[{"type":"providers","elements":[]},{"type":"declarations","elements":[{"name":"DefaultPortComponent"}]},{"type":"imports","elements":[]},{"type":"exports","elements":[{"name":"DefaultPortComponent"}]},{"type":"bootstrap","elements":[]},{"type":"classes","elements":[]}]},{"name":"RxZuDiagramsModule","children":[{"type":"providers","elements":[]},{"type":"declarations","elements":[{"name":"RxZuDiagramComponent"},{"name":"TemplateVarDirective"}]},{"type":"imports","elements":[]},{"type":"exports","elements":[{"name":"RxZuDiagramComponent"}]},{"type":"bootstrap","elements":[]},{"type":"classes","elements":[]}]}],"miscellaneous":{"variables":[],"functions":[{"name":"OutsideZone","file":"packages/angular/src/lib/utils/decorators.ts","ctype":"miscellaneous","subtype":"function","description":"","args":[{"name":"targetClass"},{"name":"functionName"},{"name":"descriptor","type":""}],"jsdoctags":[{"name":"targetClass","tagName":{"text":"param"}},{"name":"functionName","tagName":{"text":"param"}},{"name":"descriptor","type":"","tagName":{"text":"param"}}]}],"typealiases":[],"enumerations":[],"groupedVariables":{},"groupedFunctions":{"packages/angular/src/lib/utils/decorators.ts":[{"name":"OutsideZone","file":"packages/angular/src/lib/utils/decorators.ts","ctype":"miscellaneous","subtype":"function","description":"","args":[{"name":"targetClass"},{"name":"functionName"},{"name":"descriptor","type":""}],"jsdoctags":[{"name":"targetClass","tagName":{"text":"param"}},{"name":"functionName","tagName":{"text":"param"}},{"name":"descriptor","type":"","tagName":{"text":"param"}}]}]},"groupedEnumerations":{},"groupedTypeAliases":{}},"routes":[],"coverage":{"count":0,"status":"low","files":[{"filePath":"packages/angular/src/lib/defaults/components/default-label/default-label.component.ts","type":"component","linktype":"component","name":"DefaultLabelComponent","coveragePercent":0,"coverageCount":"0/3","status":"low"},{"filePath":"packages/angular/src/lib/defaults/components/default-link/default-link.component.ts","type":"component","linktype":"component","name":"DefaultLinkComponent","coveragePercent":0,"coverageCount":"0/11","status":"low"},{"filePath":"packages/angular/src/lib/defaults/components/default-node/default-node.component.ts","type":"component","linktype":"component","name":"DefaultNodeComponent","coveragePercent":0,"coverageCount":"0/4","status":"low"},{"filePath":"packages/angular/src/lib/defaults/components/default-port/default-port.component.ts","type":"component","linktype":"component","name":"DefaultPortComponent","coveragePercent":0,"coverageCount":"0/3","status":"low"},{"filePath":"packages/angular/src/lib/defaults/factories/angular.factory.ts","type":"class","linktype":"classe","name":"AbstractAngularFactory","coveragePercent":0,"coverageCount":"0/2","status":"low"},{"filePath":"packages/angular/src/lib/defaults/factories/default-label.factory.ts","type":"class","linktype":"classe","name":"DefaultLabelFactory","coveragePercent":0,"coverageCount":"0/5","status":"low"},{"filePath":"packages/angular/src/lib/defaults/factories/default-link.factory.ts","type":"class","linktype":"classe","name":"DefaultLinkFactory","coveragePercent":0,"coverageCount":"0/5","status":"low"},{"filePath":"packages/angular/src/lib/defaults/factories/default-node.factory.ts","type":"class","linktype":"classe","name":"DefaultNodeFactory","coveragePercent":0,"coverageCount":"0/5","status":"low"},{"filePath":"packages/angular/src/lib/defaults/factories/default-port.factory.ts","type":"class","linktype":"classe","name":"DefaultPortFactory","coveragePercent":0,"coverageCount":"0/5","status":"low"},{"filePath":"packages/angular/src/lib/diagram/diagram.component.ts","type":"component","linktype":"component","name":"RxZuDiagramComponent","coveragePercent":0,"coverageCount":"0/29","status":"low"},{"filePath":"packages/angular/src/lib/engine.service.ts","type":"injectable","linktype":"injectable","name":"DiagramEngine","coveragePercent":0,"coverageCount":"0/4","status":"low"},{"filePath":"packages/angular/src/lib/utils/decorators.ts","type":"interface","linktype":"interface","name":"ZonedClass","coveragePercent":0,"coverageCount":"0/2","status":"low"},{"filePath":"packages/angular/src/lib/utils/decorators.ts","type":"function","linksubtype":"function","name":"OutsideZone","coveragePercent":0,"coverageCount":"0/1","status":"low"},{"filePath":"packages/angular/src/lib/utils/template-var.directive.ts","type":"directive","linktype":"directive","name":"TemplateVarDirective","coveragePercent":0,"coverageCount":"0/6","status":"low"},{"filePath":"packages/angular/src/lib/utils/template-var.directive.ts","type":"class","linktype":"classe","name":"TemplateVarContext","coveragePercent":0,"coverageCount":"0/3","status":"low"}]}}')},633:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/code-brackets.2e1112d7.svg"},634:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/colors.a4bd0486.svg"},635:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/comments.a3859089.svg"},636:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/flow.edad2ac1.svg"},637:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/plugin.d494b228.svg"},638:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/stackalt.dba9fbb3.svg"},641:function(module,exports,__webpack_require__){__webpack_require__(642),__webpack_require__(803),__webpack_require__(804),__webpack_require__(976),__webpack_require__(1182),__webpack_require__(1184),__webpack_require__(1189),__webpack_require__(1201),__webpack_require__(1203),__webpack_require__(1208),__webpack_require__(1210),module.exports=__webpack_require__(1215)},713:function(module,exports){},804:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(99)},9:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"j",(function(){return selecting_action_SelectingAction})),__webpack_require__.d(__webpack_exports__,"h",(function(){return diagram_model_DiagramModel})),__webpack_require__.d(__webpack_exports__,"i",(function(){return point_model_PointModel})),__webpack_require__.d(__webpack_exports__,"m",(function(){return isNil})),__webpack_require__.d(__webpack_exports__,"l",(function(){return generateCurvePath})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AbstractFactory})),__webpack_require__.d(__webpack_exports__,"d",(function(){return default_link_model_DefaultLinkModel})),__webpack_require__.d(__webpack_exports__,"e",(function(){return default_node_model_DefaultNodeModel})),__webpack_require__.d(__webpack_exports__,"f",(function(){return default_port_model_DefaultPortModel})),__webpack_require__.d(__webpack_exports__,"c",(function(){return default_label_model_DefaultLabelModel})),__webpack_require__.d(__webpack_exports__,"b",(function(){return dagre_engine_plugin_DagrePlugin})),__webpack_require__.d(__webpack_exports__,"g",(function(){return engine_core_DiagramEngineCore})),__webpack_require__.d(__webpack_exports__,"k",(function(){return createValueState}));class BaseAction{constructor(mouseX,mouseY){this.mouseX=mouseX,this.mouseY=mouseY,this.ms=(new Date).getTime()}}class move_canvas_action_MoveCanvasAction extends BaseAction{constructor(mouseX,mouseY,diagramModel){super(mouseX,mouseY),this.initialOffsetX=diagramModel.getOffsetX(),this.initialOffsetY=diagramModel.getOffsetY()}}class selecting_action_SelectingAction extends BaseAction{constructor(mouseX,mouseY){super(mouseX,mouseY),this.mouseX2=mouseX,this.mouseY2=mouseY}getBoxDimensions(){return this.dimensions={left:this.mouseX2>this.mouseX?this.mouseX:this.mouseX2,top:this.mouseY2>this.mouseY?this.mouseY:this.mouseY2,width:Math.abs(this.mouseX2-this.mouseX),height:Math.abs(this.mouseY2-this.mouseY),right:this.mouseX2<this.mouseX?this.mouseX:this.mouseX2,bottom:this.mouseY2<this.mouseY?this.mouseY:this.mouseY2},this.dimensions}containsElement({x:x,y:y},diagramModel){const z=diagramModel.getZoomLevel()/100,dimensions=this.getBoxDimensions();return x*z+diagramModel.getOffsetX()>dimensions.left&&x*z+diagramModel.getOffsetX()<dimensions.right&&y*z+diagramModel.getOffsetY()>dimensions.top&&y*z+diagramModel.getOffsetY()<dimensions.bottom}}var LOG_LEVEL,BehaviorSubject=__webpack_require__(314),map=__webpack_require__(49),distinctUntilChanged=__webpack_require__(320),tap=__webpack_require__(536),shareReplay=__webpack_require__(534),takeUntil=__webpack_require__(535);!function(LOG_LEVEL){LOG_LEVEL[LOG_LEVEL.LOG=0]="LOG",LOG_LEVEL[LOG_LEVEL.ERROR=1]="ERROR"}(LOG_LEVEL||(LOG_LEVEL={}));let __DEV__=!0,__LOG__=LOG_LEVEL.ERROR;function isDev(){return __DEV__}function log(message,level=LOG_LEVEL.LOG,...args){isDev()&&__LOG__===level&&(__LOG__===LOG_LEVEL.ERROR&&console.error(message,...args),console.log(message,...args))}function withLog(message,level=LOG_LEVEL.LOG,...args){return source=>isDev()?source.pipe(Object(tap.a)(val=>log(message,level,val,...args))):source}function UID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,c=>{const r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)})}function isArray(val){return Array.isArray(val)}function isNil(v){return null==v}function generateCurvePath(firstPoint,lastPoint,curvy=0){const isHorizontal=Math.abs(firstPoint.x-lastPoint.x)>Math.abs(firstPoint.y-lastPoint.y),curvyX=isHorizontal?curvy:0,curvyY=isHorizontal?0:curvy;return`M${firstPoint.x},${firstPoint.y} C ${firstPoint.x+curvyX},${firstPoint.y+curvyY}\n    ${lastPoint.x-curvyX},${lastPoint.y-curvyY} ${lastPoint.x},${lastPoint.y}`}class state_ValueState{constructor(value,operator){this.stream$=new BehaviorSubject.a(value),this.value$=operator?this.stream$.pipe(operator):this.stream$.asObservable()}get value(){return this.stream$.getValue()}set(value){return this.stream$.next(value),this}emit(){this.stream$.next(this.value)}select(project){const mapFn=project||(v=>v);return this.value$.pipe(Object(map.a)(value=>mapFn(value)),Object(distinctUntilChanged.a)())}}function createValueState(value,operator){return new state_ValueState(value,operator)}class EntityState extends state_ValueState{constructor(value,entityPipe){super(value,entityPipe)}destroy(){this.clear(),this.stream$=null,this.value$=null}clear(destroy=!0){return destroy&&this.forEach(entity=>entity.destroy()),this.value.clear(),this}get(id){return this.value.get(id)}has(id){return this.value.has(id)}add(entity){return this.value.set(entity.id,entity),this}addMany(entities){for(const entity of entities)this.add(entity);return this}remove(id,destroy=!0){var _a;return destroy&&(null===(_a=this.value.get(id))||void 0===_a||_a.destroy()),this.value.delete(id),this}array(){return Array.from(this.value.values())}array$(){return this.select(value=>Array.from(value.values()))}forEach(cb){this.value.forEach(cb)}map(cb){return this.array().map(cb)}}function createEntityState(value=[],entityPipe){return isArray(value)?new EntityState(new Map(value),entityPipe):new EntityState(new Map(function mapToEntries(map){const result=[];for(const key in map)result.push([key,map[key]]);return result}(value)),entityPipe)}var Subject=__webpack_require__(38);class event_interface_BaseEvent{constructor(entity){this.id=UID(),this.entity=entity,this.entityId=entity.id,this.firing=!0}}class LockEvent extends event_interface_BaseEvent{constructor(entity,locked=!1){super(entity),this.locked=locked}}class ParentChangeEvent extends event_interface_BaseEvent{constructor(entity,parent){super(entity),this.parent=parent}}class SelectionEvent extends event_interface_BaseEvent{constructor(entity,selected){super(entity),this.isSelected=selected}}class PaintedEvent extends event_interface_BaseEvent{constructor(entity,painted){super(entity),this.isPainted=painted}}class base_entity_BaseEntity{constructor(id,logPrefix=""){this.destroyed$=new Subject.a,this.locked$=createValueState(!1,this.entityPipe("locked")),this._id=id||UID(),this._logPrefix=""+logPrefix}get id(){return this._id}set id(id){this._id=id}log(message,...args){log(`${this._logPrefix} ${message}: `,LOG_LEVEL.LOG,...args)}withLog(message,...args){return withLog(`${this._logPrefix} ${message}: `,LOG_LEVEL.LOG,...args)}entityPipe(logMessage=""){return function entityProperty(destroyedNotifier,replayBy=1,logMessage=""){return source=>source.pipe(Object(distinctUntilChanged.a)((a,b)=>!(a instanceof Map||b instanceof Map)&&a===b),Object(shareReplay.a)(replayBy),withLog(logMessage),Object(takeUntil.a)(destroyedNotifier))}(this.onEntityDestroy(),0,`${this._logPrefix}: ${logMessage}`)}getLocked(){return this.locked$.value}setLocked(locked=!0){this.locked$.set(locked).emit()}doClone(lookupTable={},clone){}clone(lookupTable={}){if(lookupTable[this.id])return lookupTable[this.id];const clone=Object.assign({},this);return clone.id=UID(),lookupTable[this.id]=clone,this.doClone(lookupTable,clone),clone}serialize(){return{id:this.id,locked:this.getLocked()}}lockChanges(){return this.locked$.select(locked=>new LockEvent(this,locked))}destroy(){this.log("entity destroyed"),this.destroyed$.next(),this.destroyed$.complete()}onEntityDestroy(){return this.destroyed$.pipe(Object(map.a)(()=>new event_interface_BaseEvent(this)))}}class base_model_BaseModel extends base_entity_BaseEntity{constructor(type,id,logPrefix="[Base]"){super(id,logPrefix),this.parent$=createValueState(null,this.entityPipe("ParentsChange")),this.selected$=createValueState(!1,this.entityPipe("SelectedChange")),this.hovered$=createValueState(!1,this.entityPipe("HoveredChange")),this.painted$=createValueState(new PaintedEvent(this,!1),this.entityPipe("PaintedChange")),this._type=type}serialize(){return Object.assign(Object.assign({},super.serialize()),{type:this.getType()})}getParent(){return this.parent$.value}setParent(parent){this.parent$.set(parent).emit()}parentChanges(){return this.parent$.select(p=>new ParentChangeEvent(this,p))}getPainted(){return this.painted$.value}setPainted(painted=!0){this.painted$.set(new PaintedEvent(this,painted)).emit()}paintChanges(){return this.painted$.value$}getHovered(){return this.hovered$.value}setHovered(hovered=!0){this.hovered$.set(hovered).emit()}selectHovered(){return this.hovered$.value$}getType(){return this._type}getSelected(){return this.selected$.value}selectSelected(){return this.selected$.select()}setSelected(selected=!0){this.selected$.set(selected).emit()}selectionChanges(){return this.selected$.select(selected=>new SelectionEvent(this,selected))}getSelectedEntities(){return this.getSelected()?[this]:[]}}class point_model_PointModel extends base_model_BaseModel{constructor(link,coords,id,logPrefix="[Point]"){super(link.getType(),id,logPrefix),this.coords$=createValueState(coords,this.entityPipe("coords")),this.setParent(link)}serialize(){return Object.assign(Object.assign({},super.serialize()),{coords:this.getCoords()})}isConnectedToPort(){return null!==this.getParent().getPortForPoint(this)}getLink(){return this.getParent()}destroy(){this.getParent&&this.getParent().removePoint(this),super.destroy()}setCoords(newCoords){this.coords$.set(Object.assign(Object.assign({},this.getCoords()),newCoords)).emit()}selectCoords(){return this.coords$.value$}getCoords(){return this.coords$.value}selectX(){return this.coords$.select(coords=>coords.x)}selectY(){return this.coords$.select(coords=>coords.y)}}class link_model_LinkModel extends base_model_BaseModel{constructor(linkType="default",id,logPrefix="[Link]"){super(linkType,id,logPrefix),this.label$=createValueState(null,this.entityPipe("label")),this.points=[new point_model_PointModel(this,{x:0,y:0}),new point_model_PointModel(this,{x:0,y:0})],this.extras={},this.sourcePort=null,this.targetPort=null}serialize(){var _a;const serializedPoints=this.points.map(point=>point.serialize()),label=null===(_a=this.getLabel())||void 0===_a?void 0:_a.serialize();return Object.assign(Object.assign({},super.serialize()),{name:this.getName(),sourcePort:this.getSourcePort().id,targetPort:this.getTargetPort().id,extras:this.getExtras(),points:serializedPoints,label:label})}setName(name){this.name=name}getName(){return this.name}getExtras(){return this.extras}setExtras(extras){this.extras=extras}destroy(){this.resetLabel(),this.sourcePort&&this.sourcePort.removeLink(this),this.targetPort&&this.targetPort.removeLink(this),super.destroy()}doClone(lookupTable={},clone){clone.setPoints(this.getPoints().map(point=>point.clone(lookupTable))),this.sourcePort&&clone.setSourcePort(this.sourcePort.clone(lookupTable)),this.targetPort&&clone.setTargetPort(this.targetPort.clone(lookupTable))}isLastPoint(point){return this.getPointIndex(point)===this.points.length-1}getPointIndex(point){return this.points.indexOf(point)}getPointModel(id){for(const point of this.points)if(point.id===id)return point;return null}getPortForPoint(point){return null!==this.sourcePort&&this.getFirstPoint().id===point.id?this.sourcePort:null!==this.targetPort&&this.getLastPoint().id===point.id?this.targetPort:null}getPointForPort(port){return null!==this.sourcePort&&this.sourcePort.id===port.id?this.getFirstPoint():null!==this.targetPort&&this.targetPort.id===port.id?this.getLastPoint():null}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}setSourcePort(port){null!==port&&port.addLink(this),null!==this.sourcePort&&this.sourcePort.removeLink(this),this.sourcePort=port}getSourcePort(){return this.sourcePort}getTargetPort(){return this.targetPort}setTargetPort(port){null!==port&&port.addLink(this),null!==this.targetPort&&this.targetPort.removeLink(this),this.targetPort=port}point({x:x,y:y}){return this.addPoint(this.generatePoint({x:x,y:y}))}getPoints(){return this.points}setPoints(points){points.forEach(point=>{point.setParent(this)}),this.points=points}setLabel(label){label.setParent(this),this.label$.set(label).emit()}selectLabel(){return this.label$.value$}getLabel(){return this.label$.value}resetLabel(){const currentLabel=this.getLabel();currentLabel&&(currentLabel.setParent(null),currentLabel.setPainted(!1),currentLabel.destroy())}removePoint(pointModel){this.points.splice(this.getPointIndex(pointModel),1)}removePointsBefore(pointModel){this.points.splice(0,this.getPointIndex(pointModel))}removePointsAfter(pointModel){this.points.splice(this.getPointIndex(pointModel)+1)}removeMiddlePoints(){this.points.length>2&&this.points.splice(0,this.points.length-2)}addPoint(pointModel,index=1){return pointModel.setParent(this),pointModel.setLocked(this.getLocked()),this.points.splice(index,0,pointModel),pointModel}generatePoint({x:x=0,y:y=0}){return new point_model_PointModel(this,{x:x,y:y})}setLocked(locked=!0){super.setLocked(locked),this.points.forEach(point=>point.setLocked(locked))}}class move_items_action_MoveItemsAction extends BaseAction{constructor(mouseX,mouseY,diagramEngine){super(mouseX,mouseY),this.moved=!1;let selectedItems=diagramEngine.getDiagramModel().getSelectedItems();selectedItems=selectedItems.filter(item=>!(diagramEngine.isModelLocked(item)||item instanceof link_model_LinkModel)),this.selectionModels=selectedItems.map(item=>{const{x:initialX,y:initialY}=item.getCoords();return{model:item,initialX:initialX,initialY:initialY}})}}class links_created_action_LinkCreatedAction extends BaseAction{constructor(mouseX,mouseY,link){super(mouseX,mouseY),this.sourcePort=link.getSourcePort(),this.targetPort=link.getTargetPort(),this.link=link}getOutPortNode(){return this.sourcePort.getParent()}getInPortNode(){return this.targetPort.getParent()}}class loose_link_destroyed_action_LooseLinkDestroyed extends BaseAction{constructor(mouseX,mouseY,link){super(mouseX,mouseY),this.sourcePort=link.getSourcePort(),this.link=link}getOutPortNode(){return this.sourcePort.getParent()}}class invalid_link_destroyed_action_InvalidLinkDestroyed extends BaseAction{constructor(mouseX,mouseY,link){super(mouseX,mouseY),this.sourcePort=link.getSourcePort(),this.link=link}getOutPortNode(){return this.sourcePort.getParent()}}class node_model_NodeModel extends base_model_BaseModel{constructor(nodeType="default",id,extras={},x=0,y=0,width=0,height=0,logPrefix="[Node]"){super(nodeType,id,logPrefix),this.extras$=createValueState({},this.entityPipe("extras")),this.ports$=createEntityState([],this.entityPipe("ports")),this.coords$=createValueState({x:0,y:0},this.entityPipe("coords")),this.dimensions$=createValueState({width:0,height:0},this.entityPipe("dimensions")),this.setExtras(extras),this.setDimensions({width:width,height:height}),this.setCoords({x:x,y:y})}getCoords(){return this.coords$.value}setCoords({x:x,y:y}){const{x:oldX,y:oldY}=this.getCoords();this.getPorts().forEach(port=>{port.getLinks().forEach(link=>{const point=link.getPointForPort(port),{x:pointX,y:pointY}=point.getCoords();point.setCoords({x:pointX+x-oldX,y:pointY+y-oldY})})}),this.coords$.set({x:x,y:y}).emit()}serialize(){const serializedPorts=this.getPortsArray().map(port=>port.serialize());return Object.assign(Object.assign(Object.assign(Object.assign({},super.serialize()),{nodeType:this.getType(),extras:this.getExtras(),width:this.getWidth(),height:this.getHeight()}),this.getCoords()),{ports:serializedPorts})}getSelectedEntities(){let entities=super.getSelectedEntities();return this.getSelected()&&this.getPorts().forEach(port=>{const points=port.getLinksArray().map(link=>link.getPointForPort(port));entities=entities.concat(points)}),this.log("selectedEntities",entities),entities}coordsChanges(){return this.coords$.value$}selectCoords(){return this.coords$.value$}selectX(){return this.coords$.select(coords=>coords.x)}selectY(){return this.coords$.select(coords=>coords.y)}addPort(port){return port.setParent(this),this.ports$.add(port).emit(),port}removePort(portOrId){const portId="string"==typeof portOrId?portOrId:portOrId.id;return this.ports$.remove(portId).emit(),portId}getPort(id){return this.ports$.get(id)}selectPorts(selector){return this.ports$.array$().pipe(this.withLog("selectPorts"))}getPorts(){return this.ports$.value}getPortsArray(){return this.ports$.array()}setDimensions(dimensions){this.dimensions$.set(Object.assign(Object.assign({},this.getDimensions()),dimensions)).emit()}getDimensions(){return this.dimensions$.value}dimensionChanges(){return this.dimensions$.select()}getHeight(){return this.getDimensions().height}setHeight(height){return this.setDimensions({height:height})}getWidth(){return this.getDimensions().width}setWidth(width){return this.setDimensions({width:width})}selectWidth(){return this.dimensions$.select(d=>d.width).pipe(this.withLog("selectWidth"))}selectHeight(){return this.dimensions$.select(d=>d.height).pipe(this.withLog("selectHeight"))}setExtras(extras){this.extras$.set(extras).emit()}getExtras(){return this.extras$.value}selectExtras(selector){return this.extras$.select(selector)}destroy(){super.destroy(),this.removeAllPorts()}removeAllPorts(){this.ports$.clear().emit()}}class diagram_model_DiagramModel extends base_entity_BaseEntity{constructor(diagramEngine,id,logPrefix="[Diagram]"){super(id,logPrefix),this.diagramEngine=diagramEngine,this.nodes$=createEntityState([],this.entityPipe("nodes")),this.links$=createEntityState([],this.entityPipe("links")),this.offsetX$=createValueState(0,this.entityPipe("offsetX")),this.offsetY$=createValueState(0,this.entityPipe("offsetY")),this.zoom$=createValueState(100,this.entityPipe("zoom")),this.maxZoomOut$=createValueState(null,this.entityPipe("maxZoomOut")),this.maxZoomIn$=createValueState(null,this.entityPipe("maxZoomIn")),this.gridSize$=createValueState(0,this.entityPipe("gridSize")),this.allowCanvasZoom$=createValueState(!0,this.entityPipe("allowCanvasZoom")),this.allowCanvasTranslation$=createValueState(!0,this.entityPipe("allowCanvasTranslation")),this.inverseZoom$=createValueState(!0,this.entityPipe("inverseZoom")),this.allowLooseLinks$=createValueState(!0,this.entityPipe("allowLooseLinks")),this.portMagneticRadius$=createValueState(30,this.entityPipe("portMagneticRadius"))}getNodes(){return this.nodes$.value}getNodesArray(){return this.nodes$.array()}getNode(id){return this.nodes$.get(id)}getLink(id){return this.links$.get(id)}getLinks(){return this.links$.value}getLinksArray(){return this.links$.array()}getAllPorts(options={}){const result=new Map;return this.getNodes().forEach(node=>{(options.filter?node.getPortsArray().filter(options.filter):node.getPortsArray()).forEach(port=>result.set(port.id,port))}),result}addNode(node){return this.nodes$.add(node).emit(),node}deleteNode(nodeOrId){const nodeId="string"==typeof nodeOrId?nodeOrId:nodeOrId.id,node=this.getNode(nodeId);for(const port of node.getPorts().values())for(const link of port.getLinks().values())this.deleteLink(link);this.nodes$.remove(nodeId).emit()}selectNodes(){return this.nodes$.value$}addLink(link){return this.links$.add(link).emit(),link}deleteLink(linkOrId){const linkId="string"==typeof linkOrId?linkOrId:linkOrId.id;this.links$.remove(linkId).emit()}reset(){this.nodes$.clear().emit(),this.links$.clear().emit()}selectLinks(){return this.links$.value$}serialize(){const serializedNodes=this.nodes$.map(node=>node.serialize()),serializedLinks=this.links$.map(link=>link.serialize());return Object.assign(Object.assign({},super.serialize()),{nodes:serializedNodes,links:serializedLinks})}setPortMagneticRadius(portMagneticRadius){this.portMagneticRadius$.set(portMagneticRadius).emit()}getPortMagneticRadius(){return this.portMagneticRadius$.value}selectPortMagneticRadius(){return this.portMagneticRadius$.select()}setAllowLooseLinks(allowLooseLinks){this.inverseZoom$.set(allowLooseLinks).emit()}getAllowLooseLinks(){return this.allowLooseLinks$.value}selectAllowLooseLinks(){return this.allowLooseLinks$.select()}setInverseZoom(inverseZoom){this.inverseZoom$.set(inverseZoom).emit()}getInverseZoom(){return this.inverseZoom$.value}selectInverseZoom(){return this.inverseZoom$.select()}setAllowCanvasZoom(allowCanvasZoom){this.allowCanvasZoom$.set(allowCanvasZoom).emit()}getAllowCanvasZoom(){return this.allowCanvasZoom$.value}selectAllowCanvasZoom(){return this.allowCanvasTranslation$.select()}setAllowCanvasTranslation(allowCanvasTranslation){this.allowCanvasTranslation$.set(allowCanvasTranslation).emit()}getAllowCanvasTranslation(){return this.allowCanvasTranslation$.value}selectAllowCanvasTranslation(){return this.allowCanvasTranslation$.select()}setMaxZoomOut(maxZoomOut){this.maxZoomOut$.set(maxZoomOut).emit()}getMaxZoomOut(){return this.maxZoomOut$.value}selectMaxZoomOut(){return this.maxZoomOut$.select()}setMaxZoomIn(maxZoomIn){this.maxZoomIn$.set(maxZoomIn).emit()}getMaxZoomIn(){return this.maxZoomIn$.value}setOffset(x,y){this.offsetX$.set(x).emit(),this.offsetY$.set(y).emit()}setOffsetX(x){this.offsetX$.set(x).emit()}getOffsetX(){return this.offsetX$.value}selectOffsetX(){return this.offsetX$.value$}setOffsetY(y){this.offsetY$.set(y).emit()}getOffsetY(){return this.offsetY$.value}selectOffsetY(){return this.offsetY$.value$}setZoomLevel(z){const maxZoomIn=this.getMaxZoomIn(),maxZoomOut=this.getMaxZoomOut();maxZoomIn&&z>maxZoomIn||maxZoomOut&&z<maxZoomOut||this.zoom$.set(z).emit()}getZoomLevel(){return this.zoom$.value}selectZoomLevel(){return this.zoom$.value$}getDiagramEngine(){return this.diagramEngine}clearSelection(ignore=null){this.getSelectedItems().forEach(element=>{(null==ignore?void 0:ignore.id)!==element.id&&element.setSelected(!1)})}getGridPosition({x:x,y:y}){const gridSize=this.gridSize$.value;return 0===gridSize?{x:x,y:y}:{x:gridSize*Math.floor((x+gridSize/2)/gridSize),y:gridSize*Math.floor((y+gridSize/2)/gridSize)}}getSelectedItems(...filters){filters=function coerceArray(value){return isNil(value)?[]:Array.isArray(value)?value:[value]}(filters);const items=[],nodes=this.nodes$.array(),links=this.links$.array(),selectedNodes=()=>nodes.flatMap(node=>node.getSelectedEntities()),selectedPorts=()=>nodes.flatMap(node=>node.getPortsArray().flatMap(port=>port.getSelectedEntities())),selectedLinks=()=>links.flatMap(link=>link.getSelectedEntities()),selectedPoints=()=>links.flatMap(link=>link.getPoints().flatMap(point=>point.getSelectedEntities()));if(function isEmptyArray(arr){return!arr||!isArray(arr)||0===arr.length}(filters))items.push(...selectedNodes(),...selectedPorts(),...selectedLinks(),...selectedPoints());else{const byType={node:selectedNodes,port:selectedPorts,link:selectedLinks,point:selectedPoints};for(const type of filters)items.push(...byType[type]())}return function unique(arr){return[...new Set(arr)]}(items)}addAll(...models){const links=[],nodes=[];for(const model of models)model instanceof link_model_LinkModel?links.push(model):model instanceof node_model_NodeModel&&nodes.push(model);return this.addLinks(links),this.addNodes(nodes),models}addLinks(links){this.links$.addMany(links).emit()}addNodes(nodes){this.nodes$.addMany(nodes).emit()}destroy(){super.destroy(),this.nodes$.destroy(),this.links$.destroy()}}class port_model_PortModel extends base_model_BaseModel{constructor(name,type,id,maximumLinks,linkType,magnetic=!0,logPrefix="[Port]"){super(type,id,logPrefix),this.links$=createEntityState([],this.entityPipe("links")),this.x$=createValueState(0,this.entityPipe("x")),this.y$=createValueState(0,this.entityPipe("y")),this.width$=createValueState(0,this.entityPipe("y")),this.height$=createValueState(0,this.entityPipe("y")),this.magnetic$=createValueState(!0,this.entityPipe("magnetic")),this.canCreateLinks$=createValueState(!0,this.entityPipe("magnetic")),this.name=name,this.maximumLinks=maximumLinks,this.linkType=linkType,this.setMagnetic(magnetic)}serialize(){return Object.assign(Object.assign(Object.assign({},super.serialize()),{name:this.getName(),linkType:this.getLinkType(),maximumLinks:this.getMaximumLinks(),type:this.getType(),magnetic:this.getMagnetic(),height:this.getHeight(),width:this.getWidth(),canCreateLinks:this.getCanCreateLinks()}),this.getCoords())}getNode(){return this.getParent()}getName(){return this.name}getCanCreateLinks(){const numberOfLinks=this.getLinks().size;return!(this.maximumLinks&&numberOfLinks>=this.maximumLinks)&&this.canCreateLinks$.value}getCoords(){return{x:this.getX(),y:this.getY()}}selectCanCreateLinks(){return this.canCreateLinks$.value$}setCanCreateLinks(value){this.canCreateLinks$.set(value).emit()}getMagnetic(){return this.magnetic$.value}selectMagnetic(){return this.magnetic$.value$}setMagnetic(magnetic){this.magnetic$.set(magnetic).emit()}selectX(){return this.x$.value$}selectY(){return this.y$.value$}getY(){return this.y$.value}getX(){return this.x$.value}getHeight(){return this.height$.value}getWidth(){return this.width$.value}getMaximumLinks(){return this.maximumLinks}setMaximumLinks(maximumLinks){this.maximumLinks=maximumLinks}getLinkType(){return this.linkType}setLinkType(type){this.linkType=type}removeLink(linkOrId){const linkId=function isString(val){return"string"==typeof val}(linkOrId)?linkOrId:linkOrId.id;this.links$.remove(linkId,!1).emit()}addLink(link){this.links$.add(link).emit()}getLinks(){return this.links$.value}getLinksArray(){return this.links$.array()}selectLinks(){return this.links$.value$}updateCoords({x:x,y:y,width:width,height:height}){this.x$.set(x).emit(),this.y$.set(y).emit(),this.width$.set(width).emit(),this.height$.set(height).emit()}canLinkToPort(port){return!0}isLocked(){return super.getLocked()}createLinkModel(){if(this.getCanCreateLinks())return new link_model_LinkModel}destroy(){super.destroy(),this.links$.clear().emit()}}class label_model_LabelModel extends base_model_BaseModel{constructor(type,id,logPrefix="[Label]"){super(type,id,logPrefix),this.coords$=createValueState({x:0,y:0},this.entityPipe("coords")),this.rotation$=createValueState(0,this.entityPipe("rotation"))}serialize(){return Object.assign(Object.assign({},super.serialize()),{type:this.getType(),rotation:this.getRotation(),coords:this.getCoords()})}getRotation(){return this.rotation$.value}getCoords(){return this.coords$.value}destroy(){super.destroy()}setRotation(angle){this.rotation$.set(angle).emit()}selectRotation(){return this.rotation$.value$}setCoords(newCoords){this.coords$.set(Object.assign(Object.assign({},this.coords$.value),newCoords)).emit()}selectCoords(){return this.coords$.value$}}class FactoriesManager{constructor(){this.nodeFactories=new Map,this.labelFactories=new Map,this.linkFactories=new Map,this.portFactories=new Map}registerFactory({type:type,factory:factory}){this[type].set(factory.type,factory)}getFactory({factoryType:factoryType,modelType:modelType}){if(!this[factoryType])throw new Error("cannot find factory "+factoryType);if(!this[factoryType].has(modelType))throw new Error(`cannot find type [${modelType}] in factory [${factoryType}]`);return this[factoryType].get(modelType)}disposeFactory(factoryType){this[factoryType].clear()}dispose(){this.disposeFactory("labelFactories"),this.disposeFactory("nodeFactories"),this.disposeFactory("linkFactories"),this.disposeFactory("portFactories")}}class AbstractFactory{constructor(type){this._type=type}get type(){return this._type}}class default_link_model_DefaultLinkModel extends link_model_LinkModel{constructor({type:type="default",id:id,logPrefix:logPrefix="[DefaultLink]"}={}){super(type,id,logPrefix),this.width$=createValueState(3,this.entityPipe("width")),this.color$=createValueState("rgba(255, 255, 255, 0.5)",this.entityPipe("color")),this.curvyness$=createValueState(50,this.entityPipe("curvyness"))}setWidth(width){this.width$.set(width).emit()}setColor(color){this.color$.set(color).emit()}selectWidth(){return this.width$.value$}selectColor(){return this.color$.value$}setCurvyness(curvyness){this.curvyness$.set(curvyness).emit()}get color(){return this.color$.value}get width(){return this.width$.value}get curvyness(){return this.curvyness$.value}}class default_port_model_DefaultPortModel extends port_model_PortModel{constructor({isInput:isInput=!0,name:name="port",type:type="default",id:id=null,label:label=null,linkType:linkType="default",maximumLinks:maximumLinks=null}={}){super(name,type,id,null,linkType),this.in=isInput,this.label=label||name,this.in?this.setCanCreateLinks(!1):(this.setMaximumLinks(maximumLinks),this.setMagnetic(!1))}link(port){if(super.getCanCreateLinks()){const link=new default_link_model_DefaultLinkModel({type:this.getLinkType()});return link.setSourcePort(this),link.setTargetPort(port),link}return null}createLinkModel(){if(super.getCanCreateLinks())return new default_link_model_DefaultLinkModel({type:this.getLinkType()})}canLinkToPort(port){return!(port instanceof default_port_model_DefaultPortModel)||this.in!==port.in}}class default_node_model_DefaultNodeModel extends node_model_NodeModel{constructor({name:name="Untitled",type:type="default",color:color="rgb(0, 192, 255)",id:id}={}){super(type,id),this.name=name,this.color=color,this.height$=this.selectHeight(),this.width$=this.selectWidth()}addInPort({name:name,type:type="default",id:id,linkType:linkType="default"}){const port=new default_port_model_DefaultPortModel({isInput:!0,name:name,type:type,id:id,label:null,linkType:linkType});return this.addPort(port),port}addOutPort({name:name,type:type="default",id:id,linkType:linkType="default",maximumLinks:maximumLinks=null}){const port=new default_port_model_DefaultPortModel({isInput:!1,name:name,type:type,id:id,label:null,linkType:linkType,maximumLinks:maximumLinks});return this.addPort(port),port}}class default_label_model_DefaultLabelModel extends label_model_LabelModel{constructor(label="NO LABEL",type="default",id,logPrefix="[DefaultLabel]"){super(type,id,logPrefix),this.label$=createValueState("",this.entityPipe("label")),this.setLabel(label)}setLabel(label){this.label$.set(label).emit()}getLabel(){return this.label$.value}selectLabel(){return this.label$.value$}}var fromEvent=__webpack_require__(532),merge=__webpack_require__(239),take=__webpack_require__(202);class mouse_manager_MouseManager{constructor(_diagramEngine){this.engine=_diagramEngine}getElement(event){const target=event.target;let element=target.closest("[data-portid]");if(element){const nodeEl=target.closest("[data-nodeid]");return{model:this.engine.getDiagramModel().getNode(nodeEl.getAttribute("data-nodeid")).getPort(element.getAttribute("data-portid")),element:element}}return element=target.closest("[data-pointid]"),element?{model:this.engine.getDiagramModel().getLink(element.getAttribute("data-linkid")).getPointModel(element.getAttribute("data-pointid")),element:element}:(element=target.closest("[data-linkid]"),element?{model:this.engine.getDiagramModel().getLink(element.getAttribute("data-linkid")),element:element}:(element=target.closest("[data-nodeid]"),element?{model:this.engine.getDiagramModel().getNode(element.getAttribute("data-nodeid")),element:element}:null))}getRelativePoint(event){const point=this.engine.getRelativePoint(event.clientX,event.clientY);return{x:(point.x-this.engine.getDiagramModel().getOffsetX())/(this.engine.getDiagramModel().getZoomLevel()/100),y:(point.y-this.engine.getDiagramModel().getOffsetY())/(this.engine.getDiagramModel().getZoomLevel()/100)}}onMouseMove(event){const action=this.engine.selectAction().getValue();if(null!=action)if(action instanceof selecting_action_SelectingAction){const relative=this.engine.getRelativePoint(event.clientX,event.clientY);this.engine.getDiagramModel().getNodes().forEach(node=>{action.containsElement(node.getCoords(),this.engine.getDiagramModel())?node.setSelected():node.setSelected(!1)}),this.engine.getDiagramModel().getLinks().forEach(link=>{let allSelected=!0;link.getPoints().forEach(point=>{action.containsElement(point.getCoords(),this.engine.getDiagramModel())?point.setSelected():(point.setSelected(!1),allSelected=!1)}),allSelected&&link.setSelected()}),action.mouseX2=relative.x,action.mouseY2=relative.y,this.engine.setAction(action),this.engine.fireAction()}else if(action instanceof move_items_action_MoveItemsAction){const coords={x:event.clientX-action.mouseX,y:event.clientY-action.mouseY},amountZoom=this.engine.getDiagramModel().getZoomLevel()/100;action.selectionModels.forEach(selectionModel=>{if(selectionModel.magnet=void 0,selectionModel.model instanceof node_model_NodeModel||selectionModel.model instanceof point_model_PointModel&&!selectionModel.model.isConnectedToPort()){const newCoords={x:selectionModel.initialX+coords.x/amountZoom,y:selectionModel.initialY+coords.y/amountZoom},gridRelativeCoords=this.engine.getDiagramModel().getGridPosition(newCoords);if(selectionModel.model instanceof point_model_PointModel&&!isNil(this.engine.getDiagramModel().getPortMagneticRadius())){const portsMap=this.engine.getDiagramModel().getAllPorts({filter:p=>p.getMagnetic()});for(const port of portsMap.values()){const portCoords=port.getCoords();if(Math.hypot(portCoords.x-newCoords.x,portCoords.y-newCoords.y)<=this.engine.getDiagramModel().getPortMagneticRadius()){const portCenter=this.engine.getPortCenter(port);return selectionModel.model.setCoords(portCenter),void(selectionModel.magnet=port)}}}selectionModel.model.setCoords(gridRelativeCoords),selectionModel.model instanceof node_model_NodeModel&&selectionModel.model.getPorts().forEach(port=>{const portCoords=this.engine.getPortCoords(port);port.updateCoords(portCoords)})}else if(selectionModel.model instanceof point_model_PointModel){const newCoords=this.engine.getDiagramModel().getGridPosition({x:coords.x/amountZoom,y:coords.y/amountZoom});selectionModel.model.setCoords({x:selectionModel.initialX+newCoords.x,y:selectionModel.initialY+newCoords.y})}}),this.engine.fireAction()}else action instanceof move_canvas_action_MoveCanvasAction&&this.engine.getDiagramModel().getAllowCanvasTranslation()&&(this.engine.getDiagramModel().setOffset(action.initialOffsetX+(event.clientX-action.mouseX),action.initialOffsetY+(event.clientY-action.mouseY)),this.engine.fireAction())}onMouseDown(event){if(3===event.button)return;const selectedModel=this.getElement(event);if(null===selectedModel)if(event.shiftKey){const relative=this.engine.getRelativePoint(event.clientX,event.clientY),selectionAction=new selecting_action_SelectingAction(relative.x,relative.y);this.engine.startFiringAction(selectionAction)}else this.engine.getDiagramModel().clearSelection(),this.engine.startFiringAction(new move_canvas_action_MoveCanvasAction(event.clientX,event.clientY,this.engine.getDiagramModel()));else if(selectedModel.model instanceof port_model_PortModel)if(!selectedModel.model.isLocked()&&selectedModel.model.getCanCreateLinks()){const relative=this.getRelativePoint(event),sourcePort=selectedModel.model,link=sourcePort.createLinkModel();link&&(link.setSourcePort(sourcePort),link.removeMiddlePoints(),link.getSourcePort()!==sourcePort&&link.setSourcePort(sourcePort),link.setTargetPort(null),link.getFirstPoint().setCoords(relative),link.getLastPoint().setCoords(relative),this.engine.getDiagramModel().clearSelection(),link.getLastPoint().setSelected(),this.engine.getDiagramModel().addLink(link),this.engine.startFiringAction(new move_items_action_MoveItemsAction(event.clientX,event.clientY,this.engine)))}else this.engine.getDiagramModel().clearSelection();else selectedModel.model instanceof point_model_PointModel&&selectedModel.model.isConnectedToPort()?this.engine.getDiagramModel().clearSelection():(event.shiftKey||selectedModel.model.getSelected()||this.engine.getDiagramModel().clearSelection(),selectedModel.model.setSelected(),this.engine.startFiringAction(new move_items_action_MoveItemsAction(event.clientX,event.clientY,this.engine)));this.createMouseListeners()}onMouseUp(event){const action=this.engine.selectAction().getValue();if(action instanceof move_items_action_MoveItemsAction){const element=this.getElement(event);action.selectionModels.forEach(model=>{if(!(model&&model.model instanceof point_model_PointModel))return;let el;if(model.magnet?el=model.magnet:element&&element.model&&(el=element.model),el instanceof port_model_PortModel&&!this.engine.isModelLocked(el)){const link=model.model.getLink();if(null!==link.getTargetPort())if(link.getTargetPort()!==el&&link.getSourcePort()!==el){const targetPort=link.getTargetPort(),newLink=link.clone({});newLink.setSourcePort(el),newLink.setTargetPort(targetPort),link.setTargetPort(el),targetPort.removeLink(link),newLink.removePointsBefore(newLink.getPoints()[link.getPointIndex(model.model)]),link.removePointsAfter(model.model),this.engine.getDiagramModel().addLink(newLink)}else link.getTargetPort()===el?link.removePointsAfter(model.model):link.getSourcePort()===el&&link.removePointsBefore(model.model);else{link.setTargetPort(el);const targetPort=link.getTargetPort(),srcPort=link.getSourcePort();targetPort.id!==srcPort.id&&srcPort.canLinkToPort(targetPort)&&this.engine.startFiringAction(new links_created_action_LinkCreatedAction(event.clientX,event.clientY,link))}}model.magnet=void 0}),this.engine.getDiagramModel().getAllowLooseLinks()||action.selectionModels.forEach(model=>{if(!(model&&model.model instanceof point_model_PointModel))return;const link=model.model.getLink();null!==link.getSourcePort()&&null!==link.getTargetPort()||(link.destroy(),this.engine.startFiringAction(new loose_link_destroyed_action_LooseLinkDestroyed(event.clientX,event.clientY,link)))}),action.selectionModels.forEach(model=>{if(!(model&&model.model instanceof point_model_PointModel))return;const link=model.model.getLink(),sourcePort=link.getSourcePort(),targetPort=link.getTargetPort();null!==sourcePort&&null!==targetPort&&(sourcePort.canLinkToPort(targetPort)?targetPort.getLinksArray().some(someLink=>link!==someLink&&(someLink.getSourcePort()===sourcePort||someLink.getTargetPort()===sourcePort))&&link.destroy():(link.destroy(),this.engine.startFiringAction(new invalid_link_destroyed_action_InvalidLinkDestroyed(event.clientX,event.clientY,link))))}),this.engine.stopFiringAction()}else this.engine.stopFiringAction();this.engine.setAction(null)}onMouseWheel(event){if(!this.engine.getDiagramModel().getAllowCanvasZoom())return;event.preventDefault(),event.stopPropagation();const currentZoomLevel=this.engine.getDiagramModel().getZoomLevel(),oldZoomFactor=currentZoomLevel/100;let scrollDelta=this.engine.getDiagramModel().getInverseZoom()?-event.deltaY:event.deltaY;if(event.ctrlKey&&scrollDelta%1!=0?scrollDelta/=3:scrollDelta/=60,currentZoomLevel+scrollDelta>10){const newZoomLvl=currentZoomLevel+scrollDelta;this.engine.getDiagramModel().setZoomLevel(newZoomLvl)}const zoomFactor=this.engine.getDiagramModel().getZoomLevel()/100,boundingRect=event.currentTarget.getBoundingClientRect(),clientWidth=boundingRect.width,clientHeight=boundingRect.height,widthDiff=clientWidth*zoomFactor-clientWidth*oldZoomFactor,heightDiff=clientHeight*zoomFactor-clientHeight*oldZoomFactor,clientX=event.clientX-boundingRect.left,clientY=event.clientY-boundingRect.top,xFactor=(clientX-this.engine.getDiagramModel().getOffsetX())/oldZoomFactor/clientWidth,yFactor=(clientY-this.engine.getDiagramModel().getOffsetY())/oldZoomFactor/clientHeight,updatedXOffset=this.engine.getDiagramModel().getOffsetX()-widthDiff*xFactor,updatedYOffset=this.engine.getDiagramModel().getOffsetY()-heightDiff*yFactor;this.engine.getDiagramModel().setOffset(updatedXOffset,updatedYOffset)}createMouseListeners(){const mouseUp$=Object(fromEvent.a)(document,"mouseup").pipe(Object(tap.a)(e=>this.onMouseUp(e)),Object(take.a)(1)),mouseMove$=Object(fromEvent.a)(document,"mousemove").pipe(Object(tap.a)(e=>this.onMouseMove(e)),Object(takeUntil.a)(mouseUp$));Object(merge.a)(mouseMove$,mouseUp$).pipe(Object(takeUntil.a)(this.engine.getDiagramModel().onEntityDestroy())).subscribe()}}var tslib_es6=__webpack_require__(3),core=__webpack_require__(0),dagre=__webpack_require__(432);let dagre_engine_plugin_DagrePlugin=class DagrePlugin{instantiate(){try{this.g=new dagre.graphlib.Graph({multigraph:!0})}catch(error){console.warn("`dagre` packages isn't installed, please install it before using the DagreEngine plugin")}}redistribute(model,options={}){this.instantiate(),this.g.setGraph(options.graph||{}),this.g.setDefaultEdgeLabel(()=>({}));const processedlinks={};model.getNodes().forEach(node=>{this.g.setNode(node.id,{width:node.getWidth(),height:node.getHeight()})}),model.getLinks().forEach(link=>{link.getSourcePort()&&link.getTargetPort()&&(processedlinks[link.id]=!0,this.g.setEdge({v:link.getSourcePort().getNode().id,w:link.getTargetPort().getNode().id,name:link.id}))}),dagre.layout(this.g,options.layout),this.g.nodes().forEach(v=>{const{x:x,y:y}=this.g.node(v);model.getNode(v).setCoords({x:x,y:y})}),options.includeLinks&&this.g.edges().forEach(e=>{const edge=this.g.edge(e),link=model.getLink(e.name),points=[link.getFirstPoint()];for(let i=1;i<edge.points.length-2;i++)points.push(new point_model_PointModel(link,{x:edge.points[i].x,y:edge.points[i].y}));link.setPoints(points.concat(link.getLastPoint()))})}};dagre_engine_plugin_DagrePlugin=Object(tslib_es6.a)([Object(core.Injectable)()],dagre_engine_plugin_DagrePlugin);var filter=__webpack_require__(82),delay=__webpack_require__(533),switchMap=__webpack_require__(179),combineLatest=__webpack_require__(199);class engine_core_DiagramEngineCore{constructor(){this.canvas$=createValueState(null),this.action$=new BehaviorSubject.a(null),this.createFactoriesManager(),this.createMouseManager()}createMouseManager(){this.mouseManager?console.warn("[RxZu: Mouse Manager already initialized, bailing out."):this.mouseManager=new mouse_manager_MouseManager(this)}createFactoriesManager(){this.factoriesManager&&this.factoriesManager.dispose(),this.factoriesManager=new FactoriesManager}createModel(){if(this.diagramModel)throw new Error("diagram model already exists, please reset model prior to creating new diagram");return this.diagramModel=new diagram_model_DiagramModel(this),this.diagramModel}getFactoriesManager(){return this.factoriesManager}getMouseManager(){return this.mouseManager}getNodeElement(node){const selector=this.canvas$.value.querySelector(`[data-nodeid="${node.id}"]`);if(null===selector)throw new Error("Cannot find Node element with node id: ["+node.id+"]");return selector}getNodePortElement(port){const selector=this.canvas$.value.querySelector(`[data-nodeid="${port.getParent().id}"] [data-portid="${port.id}"]`);if(null===selector)throw new Error("Cannot find Node Port element with node id: ["+port.getParent().id+"] and port id: ["+port.id+"]");return selector}getPortCenter(port){const sourceElement=this.getNodePortElement(port),sourceRect=sourceElement.getBoundingClientRect(),rel=this.getRelativePoint(sourceRect.left,sourceRect.top);return{x:sourceElement.offsetWidth/2+(rel.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100),y:sourceElement.offsetHeight/2+(rel.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100)}}getPortCoords(port){const sourceRect=this.getNodePortElement(port).getBoundingClientRect(),canvasRect=this.canvas$.value.getBoundingClientRect();return{x:(sourceRect.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100)-canvasRect.left,y:(sourceRect.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100)-canvasRect.top,width:sourceRect.width,height:sourceRect.height}}getNodeDimensions(node){if(!this.canvas$.value)return{width:0,height:0};const nodeRect=this.getNodeElement(node).getBoundingClientRect();return{width:nodeRect.width,height:nodeRect.height}}setCanvas(canvas){this.canvas$.set(canvas).emit()}getRelativePoint(x,y){const canvasRect=this.canvas$.value.getBoundingClientRect();return{x:x-canvasRect.left,y:y-canvasRect.top}}getDiagramModel(){return this.diagramModel}isModelLocked(model){return!!this.diagramModel.getLocked()||model.getLocked()}zoomToFit(additionalZoomFactor=.005){this.canvas$.value$.pipe(Object(filter.a)(Boolean),Object(take.a)(1),Object(delay.a)(0)).subscribe(canvas=>{const xFactor=canvas.clientWidth/canvas.scrollWidth,yFactor=canvas.clientHeight/canvas.scrollHeight,zoomFactor=xFactor<yFactor?xFactor:yFactor;let newZoomLvl=this.diagramModel.getZoomLevel()*(zoomFactor-additionalZoomFactor);const maxZoomOut=this.diagramModel.getMaxZoomOut();maxZoomOut&&newZoomLvl<maxZoomOut&&(newZoomLvl=maxZoomOut),this.diagramModel.setZoomLevel(newZoomLvl),this.diagramModel.setOffset(0,0)})}setup({maxZoomIn:maxZoomIn,maxZoomOut:maxZoomOut,portMagneticRadius:portMagneticRadius,allowLooseLinks:allowLooseLinks,allowCanvasZoom:allowCanvasZoom,allowCanvasTranslation:allowCanvasTranslation,inverseZoom:inverseZoom}){this.diagramModel.setAllowCanvasZoom(allowCanvasZoom),this.diagramModel.setAllowCanvasTranslation(allowCanvasTranslation),this.diagramModel.setInverseZoom(inverseZoom),this.diagramModel.setAllowLooseLinks(allowLooseLinks),this.diagramModel.setPortMagneticRadius(portMagneticRadius),this.diagramModel.setMaxZoomIn(maxZoomIn),this.diagramModel.setMaxZoomOut(maxZoomOut)}paintNodes(nodesHost,promise=!1){const observable=this.diagramModel.selectNodes().pipe(Object(takeUntil.a)(this.diagramModel.onEntityDestroy()),Object(switchMap.a)(nodes=>{const nodesPainted$=[];for(const node of nodes.values())node.getPainted().isPainted||(this.getFactoriesManager().getFactory({factoryType:"nodeFactories",modelType:node.getType()}).generateWidget({model:node,host:nodesHost,diagramModel:this.diagramModel}),nodesPainted$.push(node.paintChanges().pipe(Object(filter.a)(paintE=>paintE.isPainted),Object(take.a)(1))));return Object(combineLatest.b)(nodesPainted$)}),Object(map.a)(()=>!0));return promise?observable.toPromise():observable}paintLinks(linksHost,promise=!1){const observable=this.diagramModel.selectLinks().pipe(Object(takeUntil.a)(this.diagramModel.onEntityDestroy()),Object(map.a)(links=>{for(const link of links.values())if(!link.getPainted().isPainted){const srcPort=link.getSourcePort(),targetPort=link.getTargetPort(),portCenter=this.getPortCenter(srcPort);if(link.getPoints()[0].setCoords(portCenter),targetPort){const portCenter=this.getPortCenter(targetPort);link.getPoints()[link.getPoints().length-1].setCoords(portCenter)}this.getFactoriesManager().getFactory({factoryType:"linkFactories",modelType:link.getType()}).generateWidget({model:link,host:linksHost});link.getLabel()&&this.paintLabel(link.getLabel(),linksHost)}}));return promise?observable.toPromise():observable}paintLabel(label,host){label.getPainted().isPainted||this.getFactoriesManager().getFactory({factoryType:"labelFactories",modelType:label.getType()}).generateWidget({model:label,host:host})}fireAction(){if(this.action$.getValue)return this.action$.getValue()}stopFiringAction(){const stoppedAction=this.action$.getValue();return this.action$.next(null),stoppedAction}startFiringAction(action){return this.action$.next(action),action}selectAction(){return this.action$}setAction(action){this.action$.next(action)}shouldDrawSelectionBox(){const action=this.action$.getValue();return action instanceof selecting_action_SelectingAction&&action.getBoxDimensions()}}}},[[641,1,2]]]);
//# sourceMappingURL=main.38f43b64f5a7a65eb499.bundle.js.map