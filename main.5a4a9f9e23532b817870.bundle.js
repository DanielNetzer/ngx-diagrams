(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(module,__webpack_exports__,__webpack_require__){"use strict";var tslib_es6=__webpack_require__(0),core=__webpack_require__(1),BehaviorSubject=__webpack_require__(21),node_model=__webpack_require__(64),link_model=__webpack_require__(84),base_entity=__webpack_require__(156),lodash=__webpack_require__(49),port_model=__webpack_require__(85),point_model=__webpack_require__(29),diagram_model_DiagramModel=function(_super){function DiagramModel(diagramEngine,id){var _this=_super.call(this,id)||this;return _this.diagramEngine=diagramEngine,_this.nodes$=new BehaviorSubject.a({}),_this.links$=new BehaviorSubject.a({}),_this.zoom$=new BehaviorSubject.a(100),_this.offsetX$=new BehaviorSubject.a(0),_this.offsetY$=new BehaviorSubject.a(0),_this.gridSize$=new BehaviorSubject.a(0),_this}return tslib_es6.c(DiagramModel,_super),DiagramModel.prototype.getNodes=function(){return this.nodes$.getValue()},DiagramModel.prototype.getNode=function(id){return this.nodes$.getValue()[id]},DiagramModel.prototype.getLink=function(id){return this.links$.getValue()[id]},DiagramModel.prototype.getLinks=function(){return this.links$.getValue()},DiagramModel.prototype.addNode=function(node){var _a;return this.nodes$.next(tslib_es6.a({},this.nodes$.value,((_a={})[node.id]=node,_a))),node},DiagramModel.prototype.deleteNode=function(nodeOrId){var nodeID="string"==typeof nodeOrId?nodeOrId:nodeOrId.id,updNodes=tslib_es6.a({},this.nodes$.value);delete updNodes[nodeID],this.nodes$.next(updNodes)},DiagramModel.prototype.selectNodes=function(){return this.nodes$.asObservable()},DiagramModel.prototype.addLink=function(link){var _a;return this.links$.next(tslib_es6.a({},this.links$.value,((_a={})[link.id]=link,_a))),link},DiagramModel.prototype.deleteLink=function(linkOrId){var linkID="string"==typeof linkOrId?linkOrId:linkOrId.id,updLinks=tslib_es6.a({},this.links$.value);delete updLinks[linkID],this.links$.next(updLinks)},DiagramModel.prototype.selectLinks=function(){return this.links$.asObservable()},DiagramModel.prototype.setOffset=function(x,y){this.offsetX$.next(x),this.offsetY$.next(y)},DiagramModel.prototype.setOffsetX=function(x){this.offsetX$.next(x)},DiagramModel.prototype.getOffsetX=function(){return this.offsetX$.getValue()},DiagramModel.prototype.selectOffsetX=function(){return this.offsetX$.asObservable()},DiagramModel.prototype.setOffsetY=function(y){this.offsetY$.next(y)},DiagramModel.prototype.getOffsetY=function(){return this.offsetY$.getValue()},DiagramModel.prototype.selectOffsetY=function(){return this.offsetY$.asObservable()},DiagramModel.prototype.setZoomLevel=function(z){this.zoom$.next(z)},DiagramModel.prototype.getZoomLevel=function(){return this.zoom$.getValue()},DiagramModel.prototype.selectZoomLevel=function(){return this.zoom$.asObservable()},DiagramModel.prototype.getDiagramEngine=function(){return this.diagramEngine},DiagramModel.prototype.clearSelection=function(ignore){void 0===ignore&&(ignore=null),this.getSelectedItems().forEach(function(element){ignore&&ignore.id===element.id||element.setSelected(!1)})},DiagramModel.prototype.getGridPosition=function(_a){var x=_a.x,y=_a.y,gridSize=this.gridSize$.getValue();return 0===gridSize?{x:x,y:y}:{x:gridSize*Math.floor((x+gridSize/2)/gridSize),y:gridSize*Math.floor((y+gridSize/2)/gridSize)}},DiagramModel.prototype.getSelectedItems=function(){for(var filters=[],_i=0;_i<arguments.length;_i++)filters[_i]=arguments[_i];Array.isArray(filters)||(filters=[filters]);var items=[];return items=(items=(items=items.concat(Object(lodash.flatMap)(this.nodes$.getValue(),function(node){return node.getSelectedEntities()}))).concat(Object(lodash.flatMap)(this.links$.getValue(),function(link){return link.getSelectedEntities()}))).concat(Object(lodash.flatMap)(this.links$.getValue(),function(link){return Object(lodash.flatMap)(link.getPoints(),function(point){return point.getSelectedEntities()})})),items=Object(lodash.uniq)(items),filters.length>0&&(items=Object(lodash.uniq)(items).filter(function(item){return!!(filters.includes("node")&&item instanceof node_model.a)||(!!(filters.includes("link")&&item instanceof link_model.a)||(!!(filters.includes("port")&&item instanceof port_model.a)||!!(filters.includes("point")&&item instanceof point_model.a)))})),items},DiagramModel.prototype.addAll=function(){for(var _this=this,models=[],_i=0;_i<arguments.length;_i++)models[_i]=arguments[_i];return models.forEach(function(model){model instanceof link_model.a?_this.addLink(model):model instanceof node_model.a&&_this.addNode(model)}),models},DiagramModel}(base_entity.a),combineLatest=__webpack_require__(582),filter=__webpack_require__(287),BaseAction=function(){return function BaseAction(mouseX,mouseY){this.mouseX=mouseX,this.mouseY=mouseY,this.ms=(new Date).getTime()}}(),move_canvas_action_MoveCanvasAction=function(_super){function MoveCanvasAction(mouseX,mouseY,diagramModel){var _this=_super.call(this,mouseX,mouseY)||this;return _this.initialOffsetX=diagramModel.getOffsetX(),_this.initialOffsetY=diagramModel.getOffsetY(),_this}return tslib_es6.c(MoveCanvasAction,_super),MoveCanvasAction}(BaseAction),selecting_action_SelectingAction=function(_super){function SelectingAction(mouseX,mouseY){var _this=_super.call(this,mouseX,mouseY)||this;return _this.mouseX2=mouseX,_this.mouseY2=mouseY,_this}return tslib_es6.c(SelectingAction,_super),SelectingAction.prototype.getBoxDimensions=function(){return this.dimensions={left:this.mouseX2>this.mouseX?this.mouseX:this.mouseX2,top:this.mouseY2>this.mouseY?this.mouseY:this.mouseY2,width:Math.abs(this.mouseX2-this.mouseX),height:Math.abs(this.mouseY2-this.mouseY),right:this.mouseX2<this.mouseX?this.mouseX:this.mouseX2,bottom:this.mouseY2<this.mouseY?this.mouseY:this.mouseY2},this.dimensions},SelectingAction.prototype.containsElement=function(_a,diagramModel){var x=_a.x,y=_a.y,z=diagramModel.getZoomLevel()/100,dimensions=this.getBoxDimensions();return x*z+diagramModel.getOffsetX()>dimensions.left&&x*z+diagramModel.getOffsetX()<dimensions.right&&y*z+diagramModel.getOffsetY()>dimensions.top&&y*z+diagramModel.getOffsetY()<dimensions.bottom},SelectingAction}(BaseAction),move_items_action_MoveItemsAction=function(_super){function MoveItemsAction(mouseX,mouseY,diagramEngine){var _this=_super.call(this,mouseX,mouseY)||this;_this.moved=!1;var selectedItems=diagramEngine.getDiagramModel().getSelectedItems();return selectedItems=selectedItems.filter(function(item){return!(diagramEngine.isModelLocked(item)||item instanceof link_model.a)}),_this.selectionModels=selectedItems.map(function(item){var _a=item.getCoords();return{model:item,initialX:_a.x,initialY:_a.y}}),_this}return tslib_es6.c(MoveItemsAction,_super),MoveItemsAction}(BaseAction),diagram_component_NgxDiagramComponent=function(){function NgxDiagramComponent(renderer){var _this=this;this.renderer=renderer,this.allowCanvasZoon=!0,this.allowCanvasTranslation=!0,this.inverseZoom=!0,this.allowLooseLinks=!0,this.actionStartedFiring=new core.EventEmitter,this.actionStillFiring=new core.EventEmitter,this.actionStoppedFiring=new core.EventEmitter,this.action$=new BehaviorSubject.a(null),this.mouseUpListener=function(){},this.mouseMoveListener=function(){},this.onMouseUp=function(event){var diagramEngine=_this.diagramModel.getDiagramEngine(),action=_this.action$.getValue();if(action instanceof move_items_action_MoveItemsAction){var element_1=_this.getMouseElement(event);action.selectionModels.forEach(function(model){if(model.model instanceof point_model.a&&element_1&&element_1.model instanceof port_model.a&&!diagramEngine.isModelLocked(element_1.model)){var link=model.model.getLink();if(null!==link.getTargetPort())if(link.getTargetPort()!==element_1.model&&link.getSourcePort()!==element_1.model){var targetPort=link.getTargetPort(),newLink=link.clone({});newLink.setSourcePort(element_1.model),newLink.setTargetPort(targetPort),link.setTargetPort(element_1.model),targetPort.removeLink(link),newLink.removePointsBefore(newLink.getPoints()[link.getPointIndex(model.model)]),link.removePointsAfter(model.model),diagramEngine.getDiagramModel().addLink(newLink)}else link.getTargetPort()===element_1.model?link.removePointsAfter(model.model):link.getSourcePort()===element_1.model&&link.removePointsBefore(model.model);else link.setTargetPort(element_1.model)}}),_this.allowLooseLinks||action.selectionModels.forEach(function(model){if(model.model instanceof point_model.a){var link=model.model.getLink();null!==link.getSourcePort()&&null!==link.getTargetPort()||link.destroy()}}),action.selectionModels.forEach(function(model){if(model.model instanceof point_model.a){var link=model.model.getLink(),sourcePort=link.getSourcePort(),targetPort=link.getTargetPort();null!==sourcePort&&null!==targetPort&&(sourcePort.canLinkToPort(targetPort)?Object(lodash.some)(Object.values(targetPort.getLinks()),function(l){return l!==link&&(l.getSourcePort()===sourcePort||l.getTargetPort()===sourcePort)})&&link.destroy():link.destroy())}}),_this.stopFiringAction()}else _this.stopFiringAction();_this.mouseUpListener(),_this.mouseMoveListener(),_this.action$.next(null)},this.onMouseMove=function(event){var action=_this.action$.getValue();if(null!=action){if(action instanceof selecting_action_SelectingAction){var relative=_this.diagramModel.getDiagramEngine().getRelativePoint(event.clientX,event.clientY);return Object.values(_this.diagramModel.getNodes()).forEach(function(node){action.containsElement(node.getCoords(),_this.diagramModel)?node.setSelected():node.setSelected(!1)}),Object.values(_this.diagramModel.getLinks()).forEach(function(link){var allSelected=!0;link.getPoints().forEach(function(point){action.containsElement(point.getCoords(),_this.diagramModel)?point.setSelected():(point.setSelected(!1),allSelected=!1)}),allSelected&&link.setSelected()}),action.mouseX2=relative.x,action.mouseY2=relative.y,_this.fireAction(),void _this.action$.next(action)}if(action instanceof move_items_action_MoveItemsAction){var coords_1={x:event.clientX-action.mouseX,y:event.clientY-action.mouseY},amountZoom_1=_this.diagramModel.getZoomLevel()/100;action.selectionModels.forEach(function(model){if(model.model instanceof node_model.a||model.model instanceof point_model.a&&!model.model.isConnectedToPort()){var newCoords={x:model.initialX+coords_1.x/amountZoom_1,y:model.initialY+coords_1.y/amountZoom_1};model.model.setCoords(_this.diagramModel.getGridPosition(newCoords)),model.model instanceof node_model.a&&Object.values(model.model.getPorts()).forEach(function(port){var portCoords=_this.diagramModel.getDiagramEngine().getPortCoords(port);port.updateCoords(portCoords)})}else if(model.model instanceof point_model.a){newCoords=_this.diagramModel.getGridPosition({x:coords_1.x/amountZoom_1,y:coords_1.y/amountZoom_1});model.model.setCoords({x:model.initialX+newCoords.x,y:model.initialY+newCoords.y})}}),_this.fireAction()}else action instanceof move_canvas_action_MoveCanvasAction&&_this.allowCanvasTranslation&&(_this.diagramModel.setOffset(action.initialOffsetX+(event.clientX-action.mouseX),action.initialOffsetY+(event.clientY-action.mouseY)),_this.fireAction())}}}var _a,_b,_c,_d,_e,_f,_g,_h;return NgxDiagramComponent.prototype.ngOnInit=function(){var _this=this;this.diagramModel&&(this.diagramModel.getDiagramEngine().setCanvas(this.canvas.nativeElement),this.nodes$=this.diagramModel.selectNodes(),this.links$=this.diagramModel.selectLinks(),this.nodesRendered$=new BehaviorSubject.a(!1),this.nodes$.subscribe(function(nodes){_this.nodesRendered$.next(!1),Object.values(nodes).forEach(function(node){node.getPainted()||(_this.diagramModel.getDiagramEngine().generateWidgetForNode(node,_this.nodesLayer),node.setPainted())}),_this.nodesRendered$.next(!0)}))},NgxDiagramComponent.prototype.ngAfterViewInit=function(){var _this=this;Object(combineLatest.a)(this.nodesRendered$,this.links$).pipe(Object(filter.a)(function(_a){var nodesRendered=_a[0];_a[1];return!!nodesRendered})).subscribe(function(_a){_a[0];var links=_a[1];Object.values(links).forEach(function(link){if(!link.getPainted()){if(null!==link.getSourcePort()){var portCenter=_this.diagramModel.getDiagramEngine().getPortCenter(link.getSourcePort());link.getPoints()[0].setCoords(portCenter);var portCoords=_this.diagramModel.getDiagramEngine().getPortCoords(link.getSourcePort());link.getSourcePort().updateCoords(portCoords)}if(null!==link.getTargetPort()){portCenter=_this.diagramModel.getDiagramEngine().getPortCenter(link.getTargetPort());link.getPoints()[link.getPoints().length-1].setCoords(portCenter);portCoords=_this.diagramModel.getDiagramEngine().getPortCoords(link.getTargetPort());link.getTargetPort().updateCoords(portCoords)}_this.diagramModel.getDiagramEngine().generateWidgetForLink(link,_this.linksLayer),link.setPainted()}})})},NgxDiagramComponent.prototype.fireAction=function(){this.action$.value&&this.actionStillFiring.emit(this.action$.value)},NgxDiagramComponent.prototype.stopFiringAction=function(shouldSkipEvent){shouldSkipEvent||this.actionStoppedFiring.emit(this.action$.value),this.action$.next(null)},NgxDiagramComponent.prototype.startFiringAction=function(action){this.action$.next(action),this.actionStartedFiring.emit(action)},NgxDiagramComponent.prototype.selectAction=function(){return this.action$},NgxDiagramComponent.prototype.shouldDrawSelectionBox=function(){var action=this.action$.getValue();return action instanceof selecting_action_SelectingAction&&(action.getBoxDimensions(),!0)},NgxDiagramComponent.prototype.getMouseElement=function(event){var target=event.target,element=target.closest("[data-portid]");if(element){var nodeEl=target.closest("[data-nodeid]");return{model:this.diagramModel.getNode(nodeEl.getAttribute("data-nodeid")).getPort(element.getAttribute("data-portid")),element:element}}return(element=target.closest("[data-pointid]"))?{model:this.diagramModel.getLink(element.getAttribute("data-linkid")).getPointModel(element.getAttribute("data-pointid")),element:element}:(element=target.closest("[data-linkid]"))?{model:this.diagramModel.getLink(element.getAttribute("data-linkid")),element:element}:(element=target.closest("[data-nodeid]"))?{model:this.diagramModel.getNode(element.getAttribute("data-nodeid")),element:element}:null},NgxDiagramComponent.prototype.onMouseDown=function(event){if(3!==event.button){this.diagramModel.clearSelection();var selectedModel=this.getMouseElement(event);if(null===selectedModel)if(event.shiftKey){var relative=this.diagramModel.getDiagramEngine().getRelativePoint(event.clientX,event.clientY);this.startFiringAction(new selecting_action_SelectingAction(relative.x,relative.y))}else this.diagramModel.clearSelection(),this.startFiringAction(new move_canvas_action_MoveCanvasAction(event.clientX,event.clientY,this.diagramModel));else if(selectedModel.model instanceof port_model.a)if(this.diagramModel.getDiagramEngine().isModelLocked(selectedModel.model))this.diagramModel.clearSelection();else{relative=this.diagramModel.getDiagramEngine().getRelativeMousePoint(event);var sourcePort=selectedModel.model,link=sourcePort.createLinkModel();link.setSourcePort(sourcePort),link&&(link.removeMiddlePoints(),link.getSourcePort()!==sourcePort&&link.setSourcePort(sourcePort),link.setTargetPort(null),link.getFirstPoint().setCoords(relative),link.getLastPoint().setCoords(relative),this.diagramModel.clearSelection(),link.getLastPoint().setSelected(),this.diagramModel.addLink(link),this.startFiringAction(new move_items_action_MoveItemsAction(event.clientX,event.clientY,this.diagramModel.getDiagramEngine())))}else event.shiftKey||selectedModel.model.getSelected||this.diagramModel.clearSelection(),selectedModel.model.setSelected(),this.startFiringAction(new move_items_action_MoveItemsAction(event.clientX,event.clientY,this.diagramModel.getDiagramEngine()));this.mouseMoveListener=this.renderer.listen(document,"mousemove",this.onMouseMove),this.mouseUpListener=this.renderer.listen(document,"mouseup",this.onMouseUp)}},NgxDiagramComponent.prototype.onMouseWheel=function(event){if(this.allowCanvasZoon){event.preventDefault(),event.stopPropagation();var currentZoomLevel=this.diagramModel.getZoomLevel(),oldZoomFactor=currentZoomLevel/100,scrollDelta=this.inverseZoom?-event.deltaY:event.deltaY;event.ctrlKey&&scrollDelta%1!=0?scrollDelta/=3:scrollDelta/=60,currentZoomLevel+scrollDelta>10&&this.diagramModel.setZoomLevel(currentZoomLevel+scrollDelta);var zoomFactor=this.diagramModel.getZoomLevel()/100,boundingRect=event.currentTarget.getBoundingClientRect(),clientWidth=boundingRect.width,clientHeight=boundingRect.height,widthDiff=clientWidth*zoomFactor-clientWidth*oldZoomFactor,heightDiff=clientHeight*zoomFactor-clientHeight*oldZoomFactor,clientX=event.clientX-boundingRect.left,clientY=event.clientY-boundingRect.top,xFactor=(clientX-this.diagramModel.getOffsetX())/oldZoomFactor/clientWidth,yFactor=(clientY-this.diagramModel.getOffsetY())/oldZoomFactor/clientHeight;this.diagramModel.setOffset(this.diagramModel.getOffsetX()-widthDiff*xFactor,this.diagramModel.getOffsetY()-heightDiff*yFactor)}},tslib_es6.b([Object(core.Input)("model"),tslib_es6.d("design:type","function"==typeof(_a=void 0!==diagram_model_DiagramModel&&diagram_model_DiagramModel)?_a:Object)],NgxDiagramComponent.prototype,"diagramModel",void 0),tslib_es6.b([Object(core.Input)(),tslib_es6.d("design:type",Object)],NgxDiagramComponent.prototype,"allowCanvasZoon",void 0),tslib_es6.b([Object(core.Input)(),tslib_es6.d("design:type",Object)],NgxDiagramComponent.prototype,"allowCanvasTranslation",void 0),tslib_es6.b([Object(core.Input)(),tslib_es6.d("design:type",Object)],NgxDiagramComponent.prototype,"inverseZoom",void 0),tslib_es6.b([Object(core.Input)(),tslib_es6.d("design:type",Object)],NgxDiagramComponent.prototype,"allowLooseLinks",void 0),tslib_es6.b([Object(core.Output)(),tslib_es6.d("design:type","function"==typeof(_b=void 0!==core.EventEmitter&&core.EventEmitter)?_b:Object)],NgxDiagramComponent.prototype,"actionStartedFiring",void 0),tslib_es6.b([Object(core.Output)(),tslib_es6.d("design:type","function"==typeof(_c=void 0!==core.EventEmitter&&core.EventEmitter)?_c:Object)],NgxDiagramComponent.prototype,"actionStillFiring",void 0),tslib_es6.b([Object(core.Output)(),tslib_es6.d("design:type","function"==typeof(_d=void 0!==core.EventEmitter&&core.EventEmitter)?_d:Object)],NgxDiagramComponent.prototype,"actionStoppedFiring",void 0),tslib_es6.b([Object(core.ViewChild)("nodesLayer",{read:core.ViewContainerRef}),tslib_es6.d("design:type","function"==typeof(_e=void 0!==core.ViewContainerRef&&core.ViewContainerRef)?_e:Object)],NgxDiagramComponent.prototype,"nodesLayer",void 0),tslib_es6.b([Object(core.ViewChild)("linksLayer",{read:core.ViewContainerRef}),tslib_es6.d("design:type","function"==typeof(_f=void 0!==core.ViewContainerRef&&core.ViewContainerRef)?_f:Object)],NgxDiagramComponent.prototype,"linksLayer",void 0),tslib_es6.b([Object(core.ViewChild)("canvas",{read:core.ElementRef}),tslib_es6.d("design:type","function"==typeof(_g=void 0!==core.ElementRef&&core.ElementRef)?_g:Object)],NgxDiagramComponent.prototype,"canvas",void 0),NgxDiagramComponent=tslib_es6.b([Object(core.Component)({selector:"ngdx-diagram",template:__webpack_require__(560),styles:[__webpack_require__(561)],changeDetection:core.ChangeDetectionStrategy.OnPush}),tslib_es6.d("design:paramtypes",["function"==typeof(_h=void 0!==core.Renderer2&&core.Renderer2)?_h:Object])],NgxDiagramComponent)}(),default_node_model=__webpack_require__(28),default_node_component_DefaultNodeComponent=function(_super){function DefaultNodeComponent(){return _super.call(this,"ngdx-default-node")||this}var _a;return tslib_es6.c(DefaultNodeComponent,_super),DefaultNodeComponent.prototype.ngOnInit=function(){var _this=this;this.selectPorts().subscribe(function(ports){ports.forEach(function(port){port.getPainted()||(_this.generatePort(port),port.setPainted())})})},DefaultNodeComponent.prototype.generatePort=function(port){this.diagramEngine.generateWidgetForPort(port,this.portsLayer)},tslib_es6.b([Object(core.ViewChild)("portsLayer",{read:core.ViewContainerRef}),tslib_es6.d("design:type","function"==typeof(_a=void 0!==core.ViewContainerRef&&core.ViewContainerRef)?_a:Object)],DefaultNodeComponent.prototype,"portsLayer",void 0),DefaultNodeComponent=tslib_es6.b([Object(core.Component)({selector:"ngdx-default-node",template:__webpack_require__(562),styles:[__webpack_require__(563)]}),tslib_es6.d("design:paramtypes",[])],DefaultNodeComponent)}(default_node_model.a),AbstractFactory=function(){function AbstractFactory(name){this._type=name}return Object.defineProperty(AbstractFactory.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),AbstractFactory}(),default_node_factory_DefaultNodeFactory=function(_super){function DefaultNodeFactory(resolver,renderer){var _this=_super.call(this,"default")||this;return _this.resolver=resolver,_this.renderer=renderer,_this}return tslib_es6.c(DefaultNodeFactory,_super),DefaultNodeFactory.prototype.generateWidget=function(diagramEngine,node,nodesHost){var _this=this,componentRef=nodesHost.createComponent(this.getRecipe()),rootNode=componentRef.location.nativeElement;return this.renderer.setStyle(rootNode,"position","absolute"),this.renderer.setStyle(rootNode,"display","block"),this.renderer.setAttribute(rootNode,"data-nodeid",node.id),node.selectCoords().subscribe(function(_a){var x=_a.x,y=_a.y;_this.renderer.setStyle(rootNode,"left",x+"px"),_this.renderer.setStyle(rootNode,"top",y+"px")}),node.selectionChanges().subscribe(function(e){e.isSelected?_this.renderer.addClass(rootNode,"selected"):_this.renderer.removeClass(rootNode,"selected")}),node.onEntityDestroy().subscribe(function(e){componentRef.destroy()}),Object.entries(node).forEach(function(_a){var key=_a[0],value=_a[1];componentRef.instance[key]=value}),componentRef.instance.diagramEngine=diagramEngine,componentRef},DefaultNodeFactory.prototype.getRecipe=function(){return this.resolver.resolveComponentFactory(default_node_component_DefaultNodeComponent)},DefaultNodeFactory.prototype.getNewInstance=function(initialConfig){return new(default_node_model.a.bind.apply(default_node_model.a,[void 0,"default"].concat(initialConfig)))},DefaultNodeFactory}(function(_super){function AbstractNodeFactory(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_es6.c(AbstractNodeFactory,_super),AbstractNodeFactory}(AbstractFactory)),port_factory_AbstractPortFactory=function(_super){function AbstractPortFactory(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_es6.c(AbstractPortFactory,_super),AbstractPortFactory}(AbstractFactory),default_port_model=__webpack_require__(40),default_port_component_DefaultPortComponent=function(_super){function DefaultPortComponent(){return _super.call(this)||this}return tslib_es6.c(DefaultPortComponent,_super),DefaultPortComponent=tslib_es6.b([Object(core.Component)({selector:"ngdx-default-port",template:__webpack_require__(564),styles:[__webpack_require__(565)]}),tslib_es6.d("design:paramtypes",[])],DefaultPortComponent)}(default_port_model.a),default_port_factory_DefaultPortFactory=function(_super){function DefaultPortFactory(resolver,renderer){var _this=_super.call(this,"default")||this;return _this.resolver=resolver,_this.renderer=renderer,_this}return tslib_es6.c(DefaultPortFactory,_super),DefaultPortFactory.prototype.generateWidget=function(port,portsHost){var componentRef=portsHost.createComponent(this.getRecipe()),rootNode=componentRef.location.nativeElement;return this.renderer.setAttribute(rootNode,"data-portid",port.id),this.renderer.setAttribute(rootNode,"data-name",port.getName()),port.in?this.renderer.addClass(rootNode,"in"):this.renderer.addClass(rootNode,"out"),Object.entries(port).forEach(function(_a){var key=_a[0],value=_a[1];componentRef.instance[key]=value}),port.onEntityDestroy().subscribe(function(e){componentRef.destroy()}),componentRef},DefaultPortFactory.prototype.getRecipe=function(){return this.resolver.resolveComponentFactory(default_port_component_DefaultPortComponent)},DefaultPortFactory.prototype.getNewInstance=function(initialConfig){return new(default_port_model.a.bind.apply(default_port_model.a,[void 0,!0,"unknown"].concat(initialConfig)))},DefaultPortFactory}(port_factory_AbstractPortFactory),take=__webpack_require__(293),delay=__webpack_require__(583),link_factory_AbstractLinkFactory=function(_super){function AbstractLinkFactory(){return null!==_super&&_super.apply(this,arguments)||this}return tslib_es6.c(AbstractLinkFactory,_super),AbstractLinkFactory}(AbstractFactory),default_link_model=__webpack_require__(27),tool_kit_util=__webpack_require__(23),default_link_component_DefaultLinkComponent=function(_super){function DefaultLinkComponent(cdRef){var _this=_super.call(this,"ngdx-default-link")||this;return _this.cdRef=cdRef,_this._path$=new BehaviorSubject.a(null),_this.path$=_this._path$.asObservable(),_this.points$=new BehaviorSubject.a([]),_this}var _a;return tslib_es6.c(DefaultLinkComponent,_super),DefaultLinkComponent.prototype.ngAfterViewInit=function(){var _this=this,firstPCoords$=this.getFirstPoint().selectCoords(),lastPCoords$=this.getLastPoint().selectCoords();Object(combineLatest.a)(firstPCoords$,lastPCoords$).subscribe(function(_a){var firstPCoords=_a[0],lastPCoords=_a[1],points=[firstPCoords,lastPCoords],xOrY=Math.abs(firstPCoords.x-lastPCoords.x)>Math.abs(firstPCoords.y-lastPCoords.y)?"x":"y",isStraight=!1;Math.abs(points[0][xOrY]-points[1][xOrY])<50&&(isStraight=!0);var path=Object(tool_kit_util.c)(firstPCoords,lastPCoords,isStraight?0:_this.curvyness);if(_this._path$.next(path),!_this.getTargetPort()){var danglingPoint=_this.generatePoint(lastPCoords);_this.points$.next([danglingPoint])}_this.cdRef.detectChanges()})},DefaultLinkComponent=tslib_es6.b([Object(core.Component)({selector:"ngdx-default-link",template:__webpack_require__(566),styles:[__webpack_require__(567)]}),tslib_es6.d("design:paramtypes",["function"==typeof(_a=void 0!==core.ChangeDetectorRef&&core.ChangeDetectorRef)?_a:Object])],DefaultLinkComponent)}(default_link_model.a),default_link_factory_DefaultLinkFactory=function(_super){function DefaultLinkFactory(resolver,renderer){var _this=_super.call(this,"default")||this;return _this.resolver=resolver,_this.renderer=renderer,_this}return tslib_es6.c(DefaultLinkFactory,_super),DefaultLinkFactory.prototype.generateWidget=function(link,linksHost){var componentRef=linksHost.createComponent(this.getRecipe()),rootNode=componentRef.location.nativeElement;return this.renderer.setStyle(rootNode,"position","absolute"),this.renderer.setAttribute(rootNode,"data-linkid",link.id),link.onEntityDestroy().subscribe(function(){componentRef.destroy()}),Object.entries(link).forEach(function(_a){var key=_a[0],value=_a[1];componentRef.instance[key]=value}),componentRef},DefaultLinkFactory.prototype.getRecipe=function(){return this.resolver.resolveComponentFactory(default_link_component_DefaultLinkComponent)},DefaultLinkFactory.prototype.getNewInstance=function(){return new default_link_model.a},DefaultLinkFactory}(link_factory_AbstractLinkFactory),engine_service_DiagramEngine=function(){function DiagramEngine(resolver,rendererFactory){this.resolver=resolver,this.rendererFactory=rendererFactory,this._renderer=rendererFactory.createRenderer(null,null),this.nodeFactories={},this.linkFactories={},this.portFactories={},this.canvas$=new BehaviorSubject.a(null)}var _a,_b;return DiagramEngine.prototype.createDiagram=function(){return this.diagramModel=new diagram_model_DiagramModel(this),this.diagramModel},DiagramEngine.prototype.registerDefaultFactories=function(){this.registerNodeFactory(new default_node_factory_DefaultNodeFactory(this.resolver,this._renderer)),this.registerPortFactory(new default_port_factory_DefaultPortFactory(this.resolver,this._renderer)),this.registerLinkFactory(new default_link_factory_DefaultLinkFactory(this.resolver,this._renderer))},DiagramEngine.prototype.registerNodeFactory=function(nodeFactory){this.nodeFactories[nodeFactory.type]=nodeFactory},DiagramEngine.prototype.getNodeFactories=function(){return this.nodeFactories},DiagramEngine.prototype.getNodeFactory=function(type){if(this.nodeFactories[type])return this.nodeFactories[type];throw new Error("cannot find factory for node of type: ["+type+"]")},DiagramEngine.prototype.getFactoryForNode=function(node){return this.getNodeFactory(node.getType())},DiagramEngine.prototype.generateWidgetForNode=function(node,nodesHost){var nodeFactory=this.getFactoryForNode(node);if(!nodeFactory)throw new Error("Cannot find widget factory for node: "+node.getType());return nodeFactory.generateWidget(this,node,nodesHost)},DiagramEngine.prototype.registerPortFactory=function(factory){this.portFactories[factory.type]=factory},DiagramEngine.prototype.getPortFactories=function(){return this.portFactories},DiagramEngine.prototype.getPortFactory=function(type){if(this.portFactories[type])return this.portFactories[type];throw new Error("cannot find factory for port of type: ["+type+"]")},DiagramEngine.prototype.getFactoryForPort=function(port){return this.getPortFactory(port.getType())},DiagramEngine.prototype.generateWidgetForPort=function(port,portsHost){var portFactory=this.getFactoryForPort(port);if(!portFactory)throw new Error("Cannot find widget factory for port: "+port.getType());return portFactory.generateWidget(port,portsHost)},DiagramEngine.prototype.getLinkFactories=function(){return this.linkFactories},DiagramEngine.prototype.registerLinkFactory=function(factory){this.linkFactories[factory.type]=factory},DiagramEngine.prototype.getLinkFactory=function(type){if(this.linkFactories[type])return this.linkFactories[type];throw new Error("cannot find factory for link of type: ["+type+"]")},DiagramEngine.prototype.getFactoryForLink=function(link){return this.getLinkFactory(link.getType())},DiagramEngine.prototype.generateWidgetForLink=function(link,linksHost){var linkFactory=this.getFactoryForLink(link);if(!linkFactory)throw new Error("Cannot find link factory for link: "+link.getType());return linkFactory.generateWidget(link,linksHost)},DiagramEngine.prototype.getNodeElement=function(node){var selector=this.canvas$.getValue().querySelector('[data-nodeid="'+node.id+'"]');if(null===selector)throw new Error("Cannot find Node element with node id: ["+node.id+"]");return selector},DiagramEngine.prototype.getNodePortElement=function(port){var selector=this.canvas$.getValue().querySelector('[data-nodeid="'+port.getParent().id+'"] [data-portid="'+port.id+'"]');if(null===selector)throw new Error("Cannot find Node Port element with node id: ["+port.getParent().id+"] and port id: ["+port.id+"]");return selector},DiagramEngine.prototype.getPortCenter=function(port){var sourceElement=this.getNodePortElement(port),sourceRect=sourceElement.getBoundingClientRect(),rel=this.getRelativePoint(sourceRect.left,sourceRect.top);return{x:sourceElement.offsetWidth/2+(rel.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100),y:sourceElement.offsetHeight/2+(rel.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100)}},DiagramEngine.prototype.getPortCoords=function(port){var sourceRect=this.getNodePortElement(port).getBoundingClientRect(),canvasRect=this.canvas$.getValue().getBoundingClientRect();return{x:(sourceRect.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100)-canvasRect.left,y:(sourceRect.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100)-canvasRect.top,width:sourceRect.width,height:sourceRect.height}},DiagramEngine.prototype.getNodeDimensions=function(node){if(!this.canvas$.getValue())return{width:0,height:0};var nodeRect=this.getNodeElement(node).getBoundingClientRect();return{width:nodeRect.width,height:nodeRect.height}},DiagramEngine.prototype.setCanvas=function(canvas){this.canvas$.next(canvas)},DiagramEngine.prototype.getRelativeMousePoint=function(event){var point=this.getRelativePoint(event.clientX,event.clientY);return{x:(point.x-this.diagramModel.getOffsetX())/(this.diagramModel.getZoomLevel()/100),y:(point.y-this.diagramModel.getOffsetY())/(this.diagramModel.getZoomLevel()/100)}},DiagramEngine.prototype.getRelativePoint=function(x,y){var canvasRect=this.canvas$.getValue().getBoundingClientRect();return{x:x-canvasRect.left,y:y-canvasRect.top}},DiagramEngine.prototype.getDiagramModel=function(){return this.diagramModel},DiagramEngine.prototype.isModelLocked=function(model){return!!this.diagramModel.getLocked()||model.getLocked()},DiagramEngine.prototype.zoomToFit=function(additionalZoomFactor){var _this=this;void 0===additionalZoomFactor&&(additionalZoomFactor=.005),this.canvas$.pipe(Object(filter.a)(Boolean),Object(take.a)(1),Object(delay.a)(0)).subscribe(function(canvas){var xFactor=canvas.clientWidth/canvas.scrollWidth,yFactor=canvas.clientHeight/canvas.scrollHeight,zoomFactor=xFactor<yFactor?xFactor:yFactor;_this.diagramModel.setZoomLevel(_this.diagramModel.getZoomLevel()*(zoomFactor-additionalZoomFactor)),_this.diagramModel.setOffset(0,0)})},DiagramEngine=tslib_es6.b([Object(core.Injectable)({providedIn:"root"}),tslib_es6.d("design:paramtypes",["function"==typeof(_a=void 0!==core.ComponentFactoryResolver&&core.ComponentFactoryResolver)?_a:Object,"function"==typeof(_b=void 0!==core.RendererFactory2&&core.RendererFactory2)?_b:Object])],DiagramEngine)}(),common=__webpack_require__(11),ngx_diagrams_module_NgxDiagramsModule=function(){function NgxDiagramsModule(){}return NgxDiagramsModule=tslib_es6.b([Object(core.NgModule)({declarations:[diagram_component_NgxDiagramComponent,default_node_component_DefaultNodeComponent,default_port_component_DefaultPortComponent,default_link_component_DefaultLinkComponent],imports:[common.a],providers:[],exports:[diagram_component_NgxDiagramComponent],entryComponents:[default_node_component_DefaultNodeComponent,default_port_component_DefaultPortComponent,default_link_component_DefaultLinkComponent]})],NgxDiagramsModule)}();__webpack_require__.d(__webpack_exports__,"a",function(){return engine_service_DiagramEngine}),__webpack_require__.d(__webpack_exports__,"b",function(){return ngx_diagrams_module_NgxDiagramsModule})},156:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return BaseEntity});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(65),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(21),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(30),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(18),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(579),_interfaces_event_interface__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(86),BaseEntity=function(){function BaseEntity(id,logPrefix){void 0===logPrefix&&(logPrefix=""),this._destroyed=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a,this._destroyed$=this._destroyed.asObservable(),this._locked=new rxjs__WEBPACK_IMPORTED_MODULE_3__.a(!1),this._locked$=this._locked.asObservable(),this._id=id||Object(_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_1__.b)(),this._logPrefix=""+logPrefix}return Object.defineProperty(BaseEntity.prototype,"id",{get:function(){return this._id},set:function(id){this._id=id},enumerable:!0,configurable:!0}),BaseEntity.prototype.log=function(message){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_1__.d.apply(void 0,[this._logPrefix+" "+message+": ",_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_1__.a.LOG].concat(args))},BaseEntity.prototype.withLog=function(message){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];return _utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_1__.f.apply(void 0,[this._logPrefix+" "+message+": ",_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_1__.a.LOG].concat(args))},BaseEntity.prototype.getLocked=function(){return this._locked.getValue()},BaseEntity.prototype.setLocked=function(locked){void 0===locked&&(locked=!0),this._locked.next(locked)},BaseEntity.prototype.doClone=function(lookupTable,clone){void 0===lookupTable&&(lookupTable={})},BaseEntity.prototype.clone=function(lookupTable){if(void 0===lookupTable&&(lookupTable={}),lookupTable[this.id])return lookupTable[this.id];var clone=tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this);return clone.id=Object(_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_1__.b)(),lookupTable[this.id]=clone,this.doClone(lookupTable,clone),clone},BaseEntity.prototype.lockChanges=function(){var _this=this;return this._locked$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(function(locked){return new _interfaces_event_interface__WEBPACK_IMPORTED_MODULE_7__.b(_this,locked)}),this.withLog("lockChanges"))},BaseEntity.prototype.destroy=function(){this.log("entity destroyed"),this._destroyed.next(),this._destroyed.complete()},BaseEntity.prototype.onEntityDestroy=function(){return this._destroyed$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.a)(new _interfaces_event_interface__WEBPACK_IMPORTED_MODULE_7__.a(this)))},BaseEntity}()},23:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return LOG_LEVEL}),__webpack_require__.d(__webpack_exports__,"d",function(){return log}),__webpack_require__.d(__webpack_exports__,"f",function(){return withLog}),__webpack_require__.d(__webpack_exports__,"b",function(){return UID}),__webpack_require__.d(__webpack_exports__,"e",function(){return mapToArray}),__webpack_require__.d(__webpack_exports__,"c",function(){return generateCurvePath});var LOG_LEVEL,rxjs_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(200);!function(LOG_LEVEL){LOG_LEVEL[LOG_LEVEL.LOG=0]="LOG",LOG_LEVEL[LOG_LEVEL.ERROR=1]="ERROR"}(LOG_LEVEL||(LOG_LEVEL={}));var __DEV__=!0,__LOG__=LOG_LEVEL.ERROR;function isDev(){return __DEV__}function log(message,level){void 0===level&&(level=LOG_LEVEL.LOG);for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];isDev()&&__LOG__===level&&(__LOG__===LOG_LEVEL.ERROR&&console.error.apply(console,[message].concat(args)),console.log.apply(console,[message].concat(args)))}function withLog(message,level){void 0===level&&(level=LOG_LEVEL.LOG);for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];return function(source){return isDev()?source.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__.a)(function(val){return log.apply(void 0,[message,level,val].concat(args))})):source}}function UID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)})}function isNil(v){return null==v}function mapToArray(map){var result=[];for(var key in map)isNil(map[key])||result.push(map[key]);return result}function generateCurvePath(firstPoint,lastPoint,curvy){void 0===curvy&&(curvy=0);var isHorizontal=Math.abs(firstPoint.x-lastPoint.x)>Math.abs(firstPoint.y-lastPoint.y),curvyX=isHorizontal?curvy:0,curvyY=isHorizontal?0:curvy;return"M"+firstPoint.x+","+firstPoint.y+" C "+(firstPoint.x+curvyX)+","+(firstPoint.y+curvyY)+"\n    "+(lastPoint.x-curvyX)+","+(lastPoint.y-curvyY)+" "+lastPoint.x+","+lastPoint.y}},258:function(module,exports){function webpackEmptyAsyncContext(req){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e})}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,module.exports=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=258},27:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return DefaultLinkModel});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),DefaultLinkModel=function(_super){function DefaultLinkModel(type){void 0===type&&(type="default");var _this=_super.call(this,type)||this;return _this.color="rgba(255,255,255,0.5)",_this.width=3,_this.curvyness=50,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(DefaultLinkModel,_super),DefaultLinkModel.prototype.setWidth=function(width){this.width=width},DefaultLinkModel.prototype.setColor=function(color){this.color=color},DefaultLinkModel}(__webpack_require__(84).a)},28:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return DefaultNodeModel});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_models_node_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(64),_default_port_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40),DefaultNodeModel=function(_super){function DefaultNodeModel(name,color){void 0===name&&(name="Untitled"),void 0===color&&(color="rgb(0, 192, 255)");var _this=_super.call(this,"default")||this;return _this.name=name,_this.color=color,_this.height$=_this.selectHeight(),_this.width$=_this.selectWidth(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(DefaultNodeModel,_super),DefaultNodeModel.prototype.addInPort=function(name){var port=new _default_port_model__WEBPACK_IMPORTED_MODULE_2__.a(!0,name);return this.addPort(port),port},DefaultNodeModel.prototype.addOutPort=function(name){var port=new _default_port_model__WEBPACK_IMPORTED_MODULE_2__.a(!1,name);return this.addPort(port),port},DefaultNodeModel}(_models_node_model__WEBPACK_IMPORTED_MODULE_1__.a)},286:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return AppComponent});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),ngx_diagrams__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(115),projects_ngx_diagrams_src_lib_defaults_models_default_node_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(28),projects_ngx_diagrams_src_lib_defaults_models_default_link_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(27),AppComponent=function(){function AppComponent(diagramEngine){this.diagramEngine=diagramEngine,this.title="playground"}var _a;return AppComponent.prototype.ngOnInit=function(){var nodesDefaultDimensions={height:200,width:200};this.diagramEngine.registerDefaultFactories(),this.diagramModel=this.diagramEngine.createDiagram();var node1=new projects_ngx_diagrams_src_lib_defaults_models_default_node_model__WEBPACK_IMPORTED_MODULE_3__.a;node1.setCoords({x:500,y:300}),node1.setDimensions(nodesDefaultDimensions);var p1=node1.addInPort("inport"),node2=new projects_ngx_diagrams_src_lib_defaults_models_default_node_model__WEBPACK_IMPORTED_MODULE_3__.a;node2.setCoords({x:200,y:200}),node2.setDimensions(nodesDefaultDimensions);var outPortN2=node2.addOutPort("outport"),link1=new projects_ngx_diagrams_src_lib_defaults_models_default_link_model__WEBPACK_IMPORTED_MODULE_4__.a;link1.setSourcePort(outPortN2),link1.setTargetPort(p1);var node3=new projects_ngx_diagrams_src_lib_defaults_models_default_node_model__WEBPACK_IMPORTED_MODULE_3__.a;node3.setCoords({x:400,y:600}),node3.setDimensions(nodesDefaultDimensions);var p3=node3.addInPort("inport"),link3=new projects_ngx_diagrams_src_lib_defaults_models_default_link_model__WEBPACK_IMPORTED_MODULE_4__.a;link3.setSourcePort(outPortN2),link3.setTargetPort(p3);var node4=new projects_ngx_diagrams_src_lib_defaults_models_default_node_model__WEBPACK_IMPORTED_MODULE_3__.a;node4.setCoords({x:1200,y:200}),node4.setDimensions(nodesDefaultDimensions);var p4=node4.addInPort("inport"),link2=new projects_ngx_diagrams_src_lib_defaults_models_default_link_model__WEBPACK_IMPORTED_MODULE_4__.a;link2.setSourcePort(outPortN2),link2.setTargetPort(p4),this.diagramModel.addAll(link1,node1,node2,node3,node4,link2,link3),this.diagramModel.getDiagramEngine().zoomToFit()},AppComponent=tslib__WEBPACK_IMPORTED_MODULE_0__.b([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-root",template:__webpack_require__(568),styles:[__webpack_require__(569)]}),tslib__WEBPACK_IMPORTED_MODULE_0__.d("design:paramtypes",["function"==typeof(_a=void 0!==ngx_diagrams__WEBPACK_IMPORTED_MODULE_2__.a&&ngx_diagrams__WEBPACK_IMPORTED_MODULE_2__.a)?_a:Object])],AppComponent)}()},288:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return MarkdownWrapperComponent});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),MarkdownWrapperComponent=function(){function MarkdownWrapperComponent(){}return tslib__WEBPACK_IMPORTED_MODULE_0__.b([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input)(),tslib__WEBPACK_IMPORTED_MODULE_0__.d("design:type",String)],MarkdownWrapperComponent.prototype,"rawMarkdown",void 0),MarkdownWrapperComponent=tslib__WEBPACK_IMPORTED_MODULE_0__.b([Object(_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"app-markdown-wrapper",template:__webpack_require__(570),styles:[__webpack_require__(571)]}),tslib__WEBPACK_IMPORTED_MODULE_0__.d("design:paramtypes",[])],MarkdownWrapperComponent)}()},289:function(module,exports){module.exports="# ngx-diagrams (WIP)\n___\n\n[![Commitizen friendly](https://img.shields.io/badge/commitizen-friendly-brightgreen.svg)](http://commitizen.github.io/cz-cli/)\n[![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg)](https://github.com/semantic-release/semantic-release)\n[![Build Status](https://travis-ci.com/DanielNetzer/ngx-diagrams.svg?branch=master)](https://travis-ci.com/DanielNetzer/ngx-diagrams)\n[![Gitter](https://badges.gitter.im/ngx-diagrams/community.svg)](https://gitter.im/ngx-diagrams/community?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge)\n\n***Light weight, modular, typed diagram engine for angular inspired by react-storm-diagrams.***\n\nCheck out our [stories](https://danielnetzer.github.io/ngx-diagrams)\n\n# Getting Started\n___\n\n### Installation\n\n```bash\nnpm i ngx-diagrams\n```\n\n### Setup\n- Import the library module.\n  \n`app.module.ts`\n\n```javascript\nimport { NgxDiagramsModule } from 'ngx-diagrams';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    NgxDiagramsModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n```\n\n- instantiate new DiagramModel in the component you want to add the diagram canvas (e.g. app.component.ts), and start adding nodes, links, ports and work with the diagram.\n  \n    `app.component.ts`\n\n```javascript\n diagramModel = new DiagramModel();\n\n  constructor() { }\n\n  ngOnInit() {\n    const newNode = this.diagramModel.addNode('test', 200, 300);\n    newNode.addPort('test', 'out');\n  }\n```"},29:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return PointModel});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_base_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(30),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(35),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(18),PointModel=function(_super){function PointModel(link,_a){var x=_a.x,y=_a.y,_this=_super.call(this)||this;return _this._coords=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a({x:x,y:y}),_this.coords$=_this._coords.asObservable(),_this.setParent(link),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(PointModel,_super),PointModel.prototype.isConnectedToPort=function(){return null!==this.getParent().getPortForPoint(this)},PointModel.prototype.getLink=function(){return this.getParent()},PointModel.prototype.destroy=function(){this.getParent&&this.getParent().removePoint(this),_super.prototype.destroy.call(this)},PointModel.prototype.setCoords=function(newCoords){this._coords.next(tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._coords.getValue(),newCoords))},PointModel.prototype.selectCoords=function(){return this.coords$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)())},PointModel.prototype.getCoords=function(){return this._coords.getValue()},PointModel.prototype.selectX=function(){return this.selectCoords().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(function(c){return c.x}),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)())},PointModel.prototype.selectY=function(){return this.selectCoords().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(function(c){return c.y}),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)())},PointModel}(_base_model__WEBPACK_IMPORTED_MODULE_1__.a)},294:function(module,exports,__webpack_require__){__webpack_require__(295),__webpack_require__(381),__webpack_require__(382),module.exports=__webpack_require__(572)},382:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(66),_storybook_theming__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(284),theme=Object(_storybook_theming__WEBPACK_IMPORTED_MODULE_1__.create)({base:"light",brandTitle:"NGX-Diagrams",brandImage:"/icon.png"});Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.addParameters)({options:{showPanel:!1,theme:theme}}),Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.configure)(function loadStories(){__webpack_require__(559)},module)}.call(this,__webpack_require__(226)(module))},40:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return DefaultPortModel});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_models_port_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(85),_default_link_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(27),DefaultPortModel=function(_super){function DefaultPortModel(isInput,name,label,id){void 0===isInput&&(isInput=!0),void 0===name&&(name="port"),void 0===label&&(label=null);var _this=_super.call(this,name,"default",id)||this;return _this.in=isInput,_this.label=label||name,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(DefaultPortModel,_super),DefaultPortModel.prototype.link=function(port){var link=this.createLinkModel();return link.setSourcePort(this),link.setTargetPort(port),link},DefaultPortModel.prototype.canLinkToPort=function(port){return!(port instanceof DefaultPortModel)||this.in!==port.in},DefaultPortModel.prototype.createLinkModel=function(){return _super.prototype.createLinkModel.call(this)||new _default_link_model__WEBPACK_IMPORTED_MODULE_2__.a},DefaultPortModel}(_models_port_model__WEBPACK_IMPORTED_MODULE_1__.a)},559:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){var _storybook_angular__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(66),projects_playground_src_app_app_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(286),projects_playground_src_app_components_markdown_wrapper_markdown_wrapper_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(288),ngx_diagrams__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(115),ngx_markdown__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(290),_README_md__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(289),_README_md__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_README_md__WEBPACK_IMPORTED_MODULE_5__);Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.storiesOf)("Docs",module).addDecorator(Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.moduleMetadata)({imports:[ngx_markdown__WEBPACK_IMPORTED_MODULE_4__.a.forRoot()]})).add("welcome",function(){return{component:projects_playground_src_app_components_markdown_wrapper_markdown_wrapper_component__WEBPACK_IMPORTED_MODULE_2__.a,props:{rawMarkdown:_README_md__WEBPACK_IMPORTED_MODULE_5___default.a}}}),Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.storiesOf)("Examples",module).addDecorator(Object(_storybook_angular__WEBPACK_IMPORTED_MODULE_0__.moduleMetadata)({imports:[ngx_diagrams__WEBPACK_IMPORTED_MODULE_3__.b]})).add("simple",function(){return{component:projects_playground_src_app_app_component__WEBPACK_IMPORTED_MODULE_1__.a}})}.call(this,__webpack_require__(226)(module))},560:function(module,exports){module.exports="<div class=\"ngdx-diagram\" #canvas (mousedown)=\"onMouseDown($event)\" (wheel)=\"onMouseWheel($event)\">\n\t\x3c!-- Nodes Layer --\x3e\n\t<div\n\t\tclass=\"ngdx-nodes-layer\"\n\t\t[ngStyle]=\"{\n\t\t\ttransform:\n\t\t\t\t'translate(' +\n\t\t\t\t(diagramModel.selectOffsetX() | async) +\n\t\t\t\t'px, ' +\n\t\t\t\t(diagramModel.selectOffsetY() | async) +\n\t\t\t\t'px) scale(' +\n\t\t\t\t(diagramModel.selectZoomLevel() | async) / 100.0 +\n\t\t\t\t')'\n\t\t}\"\n\t>\n\t\t<ng-template #nodesLayer></ng-template>\n\t</div>\n\n\t\x3c!-- Links Layer --\x3e\n\t<div\n\t\tclass=\"ngdx-links-layer\"\n\t\t[ngStyle]=\"{\n\t\t\ttransform:\n\t\t\t\t'translate(' +\n\t\t\t\t(diagramModel.selectOffsetX() | async) +\n\t\t\t\t'px, ' +\n\t\t\t\t(diagramModel.selectOffsetY() | async) +\n\t\t\t\t'px) scale(' +\n\t\t\t\t(diagramModel.selectZoomLevel() | async) / 100.0 +\n\t\t\t\t')'\n\t\t}\"\n\t>\n\t\t<ng-template #linksLayer></ng-template>\n\t</div>\n\n\t\x3c!-- Selection Box --\x3e\n\t<div\n\t\t*ngIf=\"shouldDrawSelectionBox() && selectAction() | async as action\"\n\t\tclass=\"selector\"\n\t\t[ngStyle]=\"{\n\t\t\ttop: action.dimensions.top + 'px',\n\t\t\tleft: action.dimensions.left + 'px',\n\t\t\twidth: action.dimensions.width + 'px',\n\t\t\theight: action.dimensions.height + 'px'\n\t\t}\"\n\t></div>\n</div>\n"},561:function(module,exports){module.exports=".ngdx-diagram {\n  position: relative;\n  flex-grow: 1;\n  display: flex;\n  cursor: move;\n  overflow: hidden; }\n  .ngdx-diagram .selector {\n    position: absolute;\n    background-color: rgba(0, 192, 255, 0.2);\n    border: solid 2px #00c0ff; }\n  .ngdx-diagram .ngdx-nodes-layer {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    -webkit-transform-origin: 0 0;\n            transform-origin: 0 0;\n    overflow: visible !important;\n    pointer-events: none;\n    z-index: 150;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0; }\n  .ngdx-diagram .ngdx-links-layer {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    -webkit-transform-origin: 0 0;\n            transform-origin: 0 0;\n    overflow: visible !important;\n    pointer-events: none;\n    z-index: 100;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0; }\n"},562:function(module,exports){module.exports="<div\n\tclass=\"default-node\"\n\t[ngStyle]=\"{\n\t\t'height.px': height$ | async,\n\t\t'width.px': width$ | async,\n\t\t'background-color': color\n\t}\"\n>\n\t<div class=\"ports\">\n\t\t<ng-template #portsLayer></ng-template>\n\t</div>\n</div>\n"},563:function(module,exports){module.exports=":host.selected .default-node {\n  background-color: white !important;\n  border-color: blue; }\n\n:host .default-node {\n  pointer-events: all;\n  width: 100%;\n  border-radius: 10px;\n  transition: all 0.3s ease-in-out;\n  cursor: auto; }\n\n:host .default-node .title {\n    padding: 10px;\n    text-align: center;\n    border-bottom: 1px solid blue; }\n"},564:function(module,exports){module.exports="<div [ngClass]=\"in ? 'in' : 'out'\"></div>\n"},565:function(module,exports){module.exports=":host {\n  position: absolute;\n  width: 10px;\n  height: 10px;\n  border-radius: 60px;\n  border: 1px solid violet;\n  background-color: lightgray;\n  margin: 10px 0; }\n  :host:hover {\n    background-color: green; }\n  :host.out {\n    right: -5px; }\n  :host.in {\n    left: -5px; }\n"},566:function(module,exports){module.exports='<svg class="default-link">\n\t<g>\n\t\t<path [attr.stroke-width]="width" [attr.stroke]="color" [attr.d]="path$ | async"></path>\n\t\t<path\n\t\t\t(mouseleave)="setSelected(false)"\n\t\t\t(mouseenter)="setSelected()"\n\t\t\t[attr.stroke-width]="20"\n\t\t\t[attr.stroke]="color"\n\t\t\t[attr.stroke-linecap]="\'round\'"\n\t\t\t[attr.data-linkid]="id"\n\t\t\t[attr.stroke-opacity]="(selectSelected() | async) ? \'0.1\' : \'0\'"\n\t\t\t[attr.d]="path$ | async"\n\t\t></path>\n\t</g>\n\t<g *ngFor="let point of points$ | async as points">\n\t\t<circle [attr.cx]="point.x$ | async" [attr.cy]="point.y$ | async" r="5" class="default-point" />\n\n\t\t<circle\n\t\t\t(mouseleave)="setSelected(false)"\n\t\t\t(mouseenter)="setSelected()"\n\t\t\t[attr.data-id]="point.id"\n\t\t\t[attr.data-linkid]="id"\n\t\t\t[attr.cx]="point.x$ | async"\n\t\t\t[attr.cy]="point.y$ | async"\n\t\t\tr="15"\n\t\t\t[attr.opacity]="0"\n\t\t\tclass="default-point"\n\t\t\t[ngClass]="{ \'default-point\': true, selected: point.selectSelected() | async }"\n\t\t/>\n\t\t{{ point.selectSelected() | async }}\n\t</g>\n</svg>\n'},567:function(module,exports){module.exports=".default-link {\n  fill: none;\n  overflow: visible; }\n  .default-link .default-point {\n    fill: rgba(255, 255, 255, 0.5); }\n  .default-link .default-point.selected {\n      fill: rgba(0, 0, 255, 0.5); }\n  @-webkit-keyframes dash {\n  from {\n    stroke-dashoffset: 24; }\n  to {\n    stroke-dashoffset: 0; } }\n  @keyframes dash {\n  from {\n    stroke-dashoffset: 24; }\n  to {\n    stroke-dashoffset: 0; } }\n  .default-link path {\n    fill: none;\n    pointer-events: all; }\n  .default-link.path-selected {\n    stroke: #00c0ff !important;\n    stroke-dasharray: 10, 2;\n    -webkit-animation: dash 1s linear infinite;\n            animation: dash 1s linear infinite; }\n"},568:function(module,exports){module.exports='<ngdx-diagram class="demo-diagram" [model]="diagramModel"></ngdx-diagram>\n'},569:function(module,exports){module.exports=".demo-diagram {\n  display: flex;\n  height: 100%;\n  min-height: 300px;\n  background-color: #3c3c3c !important;\n  background-image: linear-gradient(0deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(255, 255, 255, 0.05) 25%, rgba(255, 255, 255, 0.05) 26%, transparent 27%, transparent 74%, rgba(255, 255, 255, 0.05) 75%, rgba(255, 255, 255, 0.05) 76%, transparent 77%, transparent);\n  background-size: 50px 50px; }\n"},570:function(module,exports){module.exports='\x3c!--<markdown ngPreserveWhitespaces [innerHTML]="rawMarkdown" class="markdown">--\x3e\n\x3c!--</markdown>--\x3e\n'},571:function(module,exports){module.exports=".markdown {\n  padding: 0 50px;\n  display: block; }\n"},572:function(module,exports,__webpack_require__){var content=__webpack_require__(573);"string"==typeof content&&(content=[[module.i,content,""]]);var options={hmr:!0,transform:void 0,insertInto:void 0};__webpack_require__(574)(content,options);content.locals&&(module.exports=content.locals)},573:function(module,exports){module.exports=[[module.i,"/* You can add global styles to this file, and also import other style files */\nhtml,\nbody {\n  height: 100%;\n  width: 100%;\n  margin: 0; }\n","",""]]},63:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return BaseModel});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_base_entity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(156),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(30),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(18),_interfaces_event_interface__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(86),BaseModel=function(_super){function BaseModel(type,id,logPrefix){void 0===logPrefix&&(logPrefix="[Base]");var _this=_super.call(this,id,logPrefix)||this;return _this._parent=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(null),_this._parent$=_this._parent.asObservable(),_this._selected=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(!1),_this._selected$=_this._selected.asObservable(),_this._painted=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(!1),_this._painted$=_this._painted.asObservable(),_this._type=type,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(BaseModel,_super),BaseModel.prototype.getParent=function(){return this._parent.getValue()},BaseModel.prototype.setParent=function(parent){this._parent.next(parent)},BaseModel.prototype.parentChanges=function(){var _this=this;return this._parent$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(function(p){return new _interfaces_event_interface__WEBPACK_IMPORTED_MODULE_5__.d(_this,p)}))},BaseModel.prototype.getPainted=function(){return this._painted.getValue()},BaseModel.prototype.setPainted=function(painted){void 0===painted&&(painted=!0),this._painted.next(painted)},BaseModel.prototype.paintChanges=function(){var _this=this;return this._painted$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(function(p){return new _interfaces_event_interface__WEBPACK_IMPORTED_MODULE_5__.c(_this,p)}))},BaseModel.prototype.getType=function(){return this._type},BaseModel.prototype.getSelected=function(){return this._selected.getValue()},BaseModel.prototype.selectSelected=function(){return this._selected.asObservable()},BaseModel.prototype.setSelected=function(selected){void 0===selected&&(selected=!0),this._selected.next(selected)},BaseModel.prototype.selectionChanges=function(){var _this=this;return this._selected$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(function(s){return new _interfaces_event_interface__WEBPACK_IMPORTED_MODULE_5__.e(_this,s)}),this.withLog("selectionChanges"))},BaseModel.prototype.getSelectedEntities=function(){return this._selected.value?[this]:[]},BaseModel}(_base_entity__WEBPACK_IMPORTED_MODULE_1__.a)},64:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return NodeModel});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),rxjs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(21),_base_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(30),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(35),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(18),_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(23),NodeModel=function(_super){function NodeModel(nodeType,extras,x,y,width,height,id,logPrefix){void 0===nodeType&&(nodeType="default"),void 0===extras&&(extras={}),void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0),void 0===logPrefix&&(logPrefix="[Node]");var _this=_super.call(this,nodeType,id,logPrefix)||this;return _this._extras=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a(extras),_this._ports=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a({}),_this._dimensions=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a({width:width,height:height}),_this._coords=new rxjs__WEBPACK_IMPORTED_MODULE_1__.a({x:x,y:y}),_this.extras$=_this._extras.asObservable(),_this.ports$=_this._ports.asObservable(),_this.coords$=_this._coords.asObservable(),_this.dimensions$=_this._dimensions.asObservable(),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(NodeModel,_super),NodeModel.prototype.getCoords=function(){return this._coords.getValue()},NodeModel.prototype.setCoords=function(_a){var x=_a.x,y=_a.y,_b=this.getCoords(),oldX=_b.x,oldY=_b.y;Object.values(this._ports.getValue()).forEach(function(port){Object.values(port.getLinks()).forEach(function(link){var point=link.getPointForPort(port),_a=point.getCoords(),pointX=_a.x,pointY=_a.y;point.setCoords({x:pointX+x-oldX,y:pointY+y-oldY})})}),this._coords.next({x:x,y:y})},NodeModel.prototype.getSelectedEntities=function(){var entities=_super.prototype.getSelectedEntities.call(this);return this.getSelected()&&Object.values(this._ports.getValue()).forEach(function(port){var links=Object.values(port.getLinks());entities=entities.concat(links.map(function(link){return link.getPointForPort(port)}))}),this.log("selectedEntities",entities),entities},NodeModel.prototype.coordsChanges=function(){return this.coords$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()))},NodeModel.prototype.selectCoords=function(){return this.coords$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)())},NodeModel.prototype.selectX=function(){return this.selectCoords().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(function(c){return c.x}),this.withLog("selectX"),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)())},NodeModel.prototype.selectY=function(){return this.selectCoords().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(function(c){return c.y}),this.withLog("selectY"),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)())},NodeModel.prototype.addPort=function(port){var _a;return port.setParent(this),this._ports.next(tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this._ports.value,((_a={})[port.id]=port,_a))),port},NodeModel.prototype.getPort=function(id){return this._ports.value[id]},NodeModel.prototype.selectPorts=function(selector){return this.ports$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(function(ports){return Object(_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_6__.e)(ports)}),this.withLog("selectPorts"))},NodeModel.prototype.getPorts=function(ids){return this._ports.getValue()},NodeModel.prototype.setDimensions=function(_a){var width=_a.width,height=_a.height;this._dimensions.next({width:width,height:height})},NodeModel.prototype.getDimensions=function(){return this._dimensions.getValue()},NodeModel.prototype.dimensionChanges=function(){return this.dimensions$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(),this.withLog("DimensionChanges"))},NodeModel.prototype.selectWidth=function(){return this.dimensions$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(function(d){return d.width}),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(),this.withLog("selectWidth"))},NodeModel.prototype.selectHeight=function(){return this.dimensions$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.a)(function(d){return d.width}),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)(),this.withLog("selectHeight"))},NodeModel.prototype.setExtras=function(extras){this._extras.next(extras)},NodeModel.prototype.getExtras=function(){return this._extras.getValue()},NodeModel.prototype.selectExtras=function(selector){return this.extras$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.a)(this.onEntityDestroy()),Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.a)())},NodeModel}(_base_model__WEBPACK_IMPORTED_MODULE_2__.a)},84:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return LinkModel});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_base_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63),_point_model__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(29),LinkModel=function(_super){function LinkModel(linkType,id){void 0===linkType&&(linkType="default");var _this=_super.call(this,linkType,id)||this;return _this.points=[new _point_model__WEBPACK_IMPORTED_MODULE_2__.a(_this,{x:0,y:0}),new _point_model__WEBPACK_IMPORTED_MODULE_2__.a(_this,{x:0,y:0})],_this.extras={},_this.sourcePort=null,_this.targetPort=null,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(LinkModel,_super),LinkModel.prototype.setName=function(name){this.name=name},LinkModel.prototype.getName=function(){return this.name},LinkModel.prototype.getExtras=function(){return this.extras},LinkModel.prototype.setExtras=function(extras){this.extras=extras},LinkModel.prototype.destroy=function(){this.sourcePort&&this.sourcePort.removeLink(this),this.targetPort&&this.targetPort.removeLink(this),_super.prototype.destroy.call(this)},LinkModel.prototype.doClone=function(lookupTable,clone){void 0===lookupTable&&(lookupTable={}),clone.setPoints(this.getPoints().map(function(point){return point.clone(lookupTable)})),this.sourcePort&&clone.setSourcePort(this.sourcePort.clone(lookupTable)),this.targetPort&&clone.setTargetPort(this.targetPort.clone(lookupTable))},LinkModel.prototype.isLastPoint=function(point){return this.getPointIndex(point)===this.points.length-1},LinkModel.prototype.getPointIndex=function(point){return this.points.indexOf(point)},LinkModel.prototype.getPointModel=function(id){for(var _i=0,_a=this.points;_i<_a.length;_i++){var point=_a[_i];if(point.id===id)return point}return null},LinkModel.prototype.getPortForPoint=function(point){return null!==this.sourcePort&&this.getFirstPoint().id===point.id?this.sourcePort:null!==this.targetPort&&this.getLastPoint().id===point.id?this.targetPort:null},LinkModel.prototype.getPointForPort=function(port){return null!==this.sourcePort&&this.sourcePort.id===port.id?this.getFirstPoint():null!==this.targetPort&&this.targetPort.id===port.id?this.getLastPoint():null},LinkModel.prototype.getFirstPoint=function(){return this.points[0]},LinkModel.prototype.getLastPoint=function(){return this.points[this.points.length-1]},LinkModel.prototype.setSourcePort=function(port){null!==port&&port.addLink(this),null!==this.sourcePort&&this.sourcePort.removeLink(this),this.sourcePort=port},LinkModel.prototype.getSourcePort=function(){return this.sourcePort},LinkModel.prototype.getTargetPort=function(){return this.targetPort},LinkModel.prototype.setTargetPort=function(port){null!==port&&port.addLink(this),null!==this.targetPort&&this.targetPort.removeLink(this),this.targetPort=port},LinkModel.prototype.point=function(_a){var x=_a.x,y=_a.y;return this.addPoint(this.generatePoint({x:x,y:y}))},LinkModel.prototype.getPoints=function(){return this.points},LinkModel.prototype.setPoints=function(points){var _this=this;points.forEach(function(point){point.setParent(_this)}),this.points=points},LinkModel.prototype.removePoint=function(pointModel){this.points.splice(this.getPointIndex(pointModel),1)},LinkModel.prototype.removePointsBefore=function(pointModel){this.points.splice(0,this.getPointIndex(pointModel))},LinkModel.prototype.removePointsAfter=function(pointModel){this.points.splice(this.getPointIndex(pointModel)+1)},LinkModel.prototype.removeMiddlePoints=function(){this.points.length>2&&this.points.splice(0,this.points.length-2)},LinkModel.prototype.addPoint=function(pointModel,index){return void 0===index&&(index=1),pointModel.setParent(this),this.points.splice(index,0,pointModel),pointModel},LinkModel.prototype.generatePoint=function(_a){var _b=_a.x,x=void 0===_b?0:_b,_c=_a.y,y=void 0===_c?0:_c;return new _point_model__WEBPACK_IMPORTED_MODULE_2__.a(this,{x:x,y:y})},LinkModel}(_base_model__WEBPACK_IMPORTED_MODULE_1__.a)},85:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return PortModel});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_base_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(21),PortModel=function(_super){function PortModel(name,type,id,maximumLinks){var _this=_super.call(this,type,id)||this;return _this.name=name,_this.links$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a({}),_this.maximumLinks=maximumLinks,_this.x$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(0),_this.y$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(0),_this.height$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(0),_this.width$=new rxjs__WEBPACK_IMPORTED_MODULE_2__.a(0),_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(PortModel,_super),PortModel.prototype.getNode=function(){return this.getParent},PortModel.prototype.getName=function(){return this.name},PortModel.prototype.selectX=function(){return this.x$.asObservable()},PortModel.prototype.selectY=function(){return this.y$.asObservable()},PortModel.prototype.getMaximumLinks=function(){return this.maximumLinks},PortModel.prototype.setMaximumLinks=function(maximumLinks){this.maximumLinks=maximumLinks},PortModel.prototype.removeLink=function(link){var links=this.links$.getValue();delete links[link.id],this.links$.next(tslib__WEBPACK_IMPORTED_MODULE_0__.a({},links))},PortModel.prototype.addLink=function(link){var _a;this.links$.next(tslib__WEBPACK_IMPORTED_MODULE_0__.a({},this.links$.value,((_a={})[link.id]=link,_a)))},PortModel.prototype.getLinks=function(){return this.links$.getValue()},PortModel.prototype.selectLinks=function(){return this.links$.asObservable()},PortModel.prototype.updateCoords=function(_a){var x=_a.x,y=_a.y,width=_a.width,height=_a.height;this.x$.next(x),this.y$.next(y),this.width$.next(width),this.height$.next(height)},PortModel.prototype.canLinkToPort=function(port){return!0},PortModel.prototype.isLocked=function(){return _super.prototype.getLocked.call(this)},PortModel.prototype.createLinkModel=function(){var numberOfLinks=Object.keys(this.links$.getValue()).length;return 1===this.maximumLinks&&numberOfLinks>=1?Object.values(this.links$.getValue())[0][0]:(this.maximumLinks,null)},PortModel}(_base_model__WEBPACK_IMPORTED_MODULE_1__.a)},86:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return BaseEvent}),__webpack_require__.d(__webpack_exports__,"b",function(){return LockEvent}),__webpack_require__.d(__webpack_exports__,"d",function(){return ParentChangeEvent}),__webpack_require__.d(__webpack_exports__,"e",function(){return SelectionEvent}),__webpack_require__.d(__webpack_exports__,"c",function(){return PaintedEvent});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23),BaseEvent=function(){return function BaseEvent(entity){var _this=this;this.id=Object(_utils_tool_kit_util__WEBPACK_IMPORTED_MODULE_1__.b)(),this.entity=entity,this.entityId=entity.id,this.firing=!0,this.stopPropagation=function(){return _this.firing=!1}}}(),LockEvent=function(_super){function LockEvent(entity,locked){void 0===locked&&(locked=!1);var _this=_super.call(this,entity)||this;return _this.locked=locked,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(LockEvent,_super),LockEvent}(BaseEvent),ParentChangeEvent=function(_super){function ParentChangeEvent(entity,parent){var _this=_super.call(this,entity)||this;return _this.parent=parent,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(ParentChangeEvent,_super),ParentChangeEvent}(BaseEvent),SelectionEvent=function(_super){function SelectionEvent(entity,selected){var _this=_super.call(this,entity)||this;return _this.isSelected=selected,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(SelectionEvent,_super),SelectionEvent}(BaseEvent),PaintedEvent=function(_super){function PaintedEvent(entity,painted){void 0===painted&&(painted=!1);var _this=_super.call(this,entity)||this;return _this.isPainted=painted,_this}return tslib__WEBPACK_IMPORTED_MODULE_0__.c(PaintedEvent,_super),PaintedEvent}(BaseEvent)}},[[294,1,2]]]);
//# sourceMappingURL=main.5a4a9f9e23532b817870.bundle.js.map